webpackJsonp([12],{"7U82":function(t,s,e){"use strict";var a=e("3cXf"),i=e.n(a),n=(e("VKKs"),{name:"select_address",props:[],inject:["reload"],data:function(){return{showCas:!0,input33:"",input3:"",options2:[],options:[],props2:{label:"EN"==localStorage.lang?"label_en":"label",value:"value",children:"cities",lazy:!0,lazyLoad:this.handleItemChange},selectedOptions:[1],checkedStateNumber:0,queryList:{language:"EN"==localStorage.lang?"en":"zh"}}},created:function(){this.getCountry()},methods:{getCountry:function(){var t=this,s=this.queryList;this.$http.get("/api/personal/countrys",{params:s}).then(function(s){t.options2=s.data.rows,t.options=s.data.rows,t.options2.forEach(function(s,e){t.$set(t.options2[e],"cities",[]),t.$set(t.options[e],"cities",[])})}).catch(function(t){})},searchAddr:function(){var t=this;this.showCas=!1;var s={search:this.input3},e=[],a=[],n={},o={},r={};this.$http.get("/api/personal/locations",{params:s}).then(function(s){t.showCas=!0,t.selectedOptions=[],t.options2=JSON.parse(i()(t.options));var l=s.data;l.success&&(t.showCas=!1,t.showCas=!0,e=l.states,a=l.cities,n=l.country,o=l.state,r=l.city,13128==n.value&&"EN"!=localStorage.lang?(a=a.map(function(t){return t.leaf=!0,t}),e=e.map(function(t){return t.value==o.value&&(t.cities=a),t})):e=e.map(function(t){return t.leaf=!0,t}),t.options2=t.options2.map(function(t){return t.value==n.value&&(t.cities=e),t}),setTimeout(function(){document.querySelector(".realCas").click(),t.selectedOptions=[n.value,o.value||e[0].value],13128==n.value&&"EN"!=localStorage.lang&&(t.selectedOptions=[n.value,o.value||e[0].value,r.value||a[0].value]),t.handleChange()}))})},handleChange:function(t){this.$emit("changed",this.selectedOptions)},handleItemChange:function(t,s){var e=this,a=t.level,i=t.value;if(1==a){var n=this.queryList;this.$http.get("/api/personal/states?country_id="+i,{params:n}).then(function(t){13128==i&&"EN"!=localStorage.lang?t.data.rows.forEach(function(t,s){e.$set(t,"cities",[])}):t.data.rows.forEach(function(t,s){e.$set(t,"leaf",!0)}),s(t.data.rows)}).catch(function(t){})}else if(2==a){this.queryList;this.$http.get("/api/personal/citys?state_id="+i).then(function(t){t.data.rows.forEach(function(t){t.leaf=!0}),s(t.data.rows)}).catch(function(t){})}}},mounted:function(){}}),o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"select_add"},[e("div",{staticClass:"search_address_box"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:t.$t("login.inputCountry"),id:"inputPlace"},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.searchAddr(s)}},model:{value:t.input3,callback:function(s){t.input3=s},expression:"input3"}},[e("el-button",{staticStyle:{"font-size":"20px",padding:"12px 18px!important"},attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchAddr},slot:"append"})],1)],1),t._v(" "),e("el-cascader",{staticClass:"cas2",attrs:{options:t.options2,placeholder:t.$t("login.country"),props:t.props2},on:{change:t.handleChange},model:{value:t.selectedOptions,callback:function(s){t.selectedOptions=s},expression:"selectedOptions"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),t._v(" "),t.showCas?e("el-cascader",{staticClass:"realCas",attrs:{options:t.options2,placeholder:t.$t("login.country"),props:t.props2},on:{change:t.handleChange},model:{value:t.selectedOptions,callback:function(s){t.selectedOptions=s},expression:"selectedOptions"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1):t._e()],1)},staticRenderFns:[]};var r=e("C7Lr")(n,o,!1,function(t){e("TL8j")},null,null);s.a=r.exports},"9F6s":function(t,s,e){"use strict";var a=e("4YfN"),i=e.n(a),n=e("VKKs"),o=e("fUgm"),r=e("u8pK"),l=Object(o.a)("task"),c=l.mapState,u=l.mapMutations,h={components:{switchLanguage:r.a},inject:["reload"],data:function(){return{logo_origin:"",showLogin:!0,user_data:{},show_list:!1,show_user:!1,person_auth:!1,userInfo:""}},props:["show_lang","logo"],watch:{"$route.path":function(t,s){this.userInfo=Object(n.a)("isUserLogin","object").user}},created:function(){var t=this;this.userInfo=Object(n.a)("isUserLogin","object").user,this.showLogin=!localStorage.isUserLogin,this.logo_origin=this.userInfo.logo,Object(n.a)("isUserLogin","object")&&(this.person_auth=Object(n.a)("isUserLogin","object").user.is_temp,this.person_auth||-1==this.$route.path.indexOf("match")&&this.$http.get("/api/personal/user").then(function(s){s.data.success&&(t.setData({userInformation:s.data.message.user}),t.logo_origin=t.userInformation.logo)}).catch(function(t){})),this.show_user=!(!localStorage.isUserLogin||this.person_auth)},methods:i()({},u(["setData"]),{clearUser:function(){var t=this;this.$http.get("/api/auth/logout").then(function(s){s.data.success&&(localStorage.removeItem("isUserLogin"),localStorage.removeItem("isShowDia"),t.setData({show_now_task:!1}),t.setData({userInformation:""}),t.$router.push({path:"/"}),t.reload())})},showHandle:function(){this.show_list=!0},hidelist:function(){this.show_list=!1}}),computed:i()({},c(["show_now_task","userInformation"])),mounted:function(){}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header"},[-1==t.$route.path.indexOf("competition/detail")?e("span",[t.logo.hasLink&&!t.person_auth?e("router-link",{staticClass:"ad_logo",attrs:{to:t.logo.jump}},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.logo.url,alt:""}})]):e("span",{staticClass:"ad_logo"},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.logo.url,alt:""}})])],1):e("span",[t._m(0)]),t._v(" "),e("div",{staticClass:"tab_list"},[t._t("nav_content")],2),t._v(" "),t.person_auth?e("div",{staticClass:"user_handle"},[e("div",{staticClass:"user_info",on:{mouseover:t.showHandle,mouseout:t.hidelist}},[t.userInfo||""!==t.userInfo?e("div",{staticClass:"user_detail clearfix"},[e("span",{staticClass:"user_logo",style:{backgroundImage:"url("+t.userInfo.logo+")",backgroundSize:"cover"}}),t._v(" "),e("span",{staticClass:"user_name"},[t._v(t._s(t.userInfo.nickname))])]):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.show_list,expression:"show_list"}],staticClass:"handle_box"},[e("ul",[e("li",[e("router-link",{attrs:{to:"/competition/personal"}},[t._v(t._s(t.$t("header.personal.home")))])],1),t._v(" "),e("li",[e("span",{on:{click:t.clearUser}},[t._v(t._s(t.$t("header.logout")))])])])])]),t._v(" "),e("switchLanguage",{directives:[{name:"show",rawName:"v-show",value:t.show_lang,expression:"show_lang"}]})],1):t._e(),t._v(" "),e("div",{staticClass:"user_handle"},[t.showLogin?e("div",{staticStyle:{float:"right","margin-left":"40px","margin-top":"2px"}},[e("router-link",{staticClass:"ad_sign",attrs:{to:"/login"}},[t._v(t._s(t.$t("login.now")))]),t._v(" "),e("router-link",{staticClass:"ad_register",attrs:{to:"/register"}},[t._v(t._s(t.$t("login.register2")))])],1):t._e(),t._v(" "),t._t("house_link"),t._v(" "),t._t("message_tips"),t._v(" "),t.show_user?e("div",{staticClass:"user_info",on:{mouseover:t.showHandle,mouseout:t.hidelist}},[t.userInformation||""!==t.userInformation?e("div",{staticClass:"user_detail clearfix"},[e("span",{staticClass:"user_logo",style:{backgroundImage:"url("+t.logo_origin+")",backgroundSize:"cover"}}),t._v(" "),e("span",{staticClass:"user_name"},[t._v(t._s(-1==t.$route.path.indexOf("match")?t.userInformation.nickname:t.userInfo.nickname))])]):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.show_list,expression:"show_list"}],staticClass:"handle_box"},[e("ul",[t.person_auth?t._e():e("li",[e("router-link",{attrs:{to:"/personal"}},[t._v(t._s(t.$t("header.personal.home")))])],1),t._v(" "),e("li",[e("span",{attrs:{id:"signout"},on:{click:t.clearUser}},[t._v(t._s(t.$t("header.logout")))])])])])]):t._e(),t._v(" "),e("switchLanguage",{directives:[{name:"show",rawName:"v-show",value:t.show_lang&&!t.person_auth,expression:"show_lang&&!person_auth"}]})],2)])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"ad_logo zi_ad_logo"},[s("span",{staticStyle:{width:"100%",height:"100%",display:"inline-block","background-size":"100% 100%"}})])}]};var _=e("C7Lr")(h,d,!1,function(t){e("Uj8m")},"data-v-84154a08",null);s.a=_.exports},FDfl:function(t,s){},Pt1D:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("4YfN"),i=e.n(a),n=e("fUgm"),o=e("9F6s"),r=e("7U82"),l=e("VKKs"),c=Object(n.a)("task"),u=c.mapState,h=c.mapMutations,d={components:{"v-header":o.a,selectAddress:r.a},data:function(){return{showLogin:!0,ad_logo:{jump:"/",hasLink:!0,url:"../../../static/img/world.png"},show_question:!1,show_answer_tips:!1,show_message:!1,show_ranklist:!0,rank_active:!1,rank_show:!1,dialogVisible:!1,selectedOptions:[],timer:null,message_num:0,now_question:{},isAnswered:{task_type:"",type_number:"",grade:"",id:""},personal_data:Object(l.a)("isUserLogin","object"),person_auth:!1,queryList:{language:"EN"==localStorage.lang?"en":"zh"}}},name:"index",inject:["reload"],created:function(){var t=this;if(this.show_message=!!localStorage.isUserLogin,this.show_message&&(this.person_auth=this.personal_data.user.is_temp,this.person_auth||(this.timer=setInterval(function(){t.getMessage_num()},15e3),this.$http.get("/api/personal/task_info").then(function(s){"{}"!==s.data?(t.now_question=s.data,t.isAnswered.task_type=s.data.category.toLowerCase(),t.isAnswered.type_number=s.data.category_id,t.isAnswered.grade=s.data.weight,t.isAnswered.id=s.data.id,t.show_answer_tips=!0):t.show_answer_tips=!1}).catch(function(t){}))),localStorage.lang?"CN"==localStorage.lang?(this.lang_statu=!0,this.$i18n.locale="CN"):(this.lang_statu=!1,this.$i18n.locale="EN"):this.lang_statu=!0,localStorage.isUserLogin&&!this.personal_data.user.has_country&&!this.person_auth){this.dialogVisible=!0;var s=this.queryList;this.$http.get("/api/personal/countrys",{params:s}).then(function(s){t.options2=s.data.rows,t.options2.forEach(function(s,e){t.$set(t.options2[e],"cities",[])})}).catch(function(t){})}},beforeDestroy:function(){clearInterval(this.timer)},methods:i()({},h(["setData"]),{getTeamStatus:function(){var t=this;this.$http.get("/api/personal/reload_profile").then(function(s){s.data.success&&(Object(l.b)("isUserLogin",s.data.user_data),s.data.user_data.team.has_team?t.$router.push({path:"/team/homepage"}):t.$router.push({path:"/team/list"}))})},getMessage_num:function(){var t=this;this.$http.get("/api/users/unread_message").then(function(s){t.message_num=s.data.unread_count}).catch(function(t){})},showlist:function(){var t=document.getElementById("scoreboard_nav"),s=(document.getElementsByClassName("rank_nav")[0],t.getElementsByTagName("div")),e=null,a=0,i=this;e||(this.show_ranklist?(a=0,e=setInterval(function(){i.rank_show=!0,s[a].className="show",++a==s.length&&(clearInterval(e),e=null,i.show_ranklist=!1)},200)):(a=s.length-1,e=setInterval(function(){if(s[a].className="hide",--a<0){clearInterval(e),e=null,i.show_ranklist=!0,i.rank_show=!1;for(var t=0;t<s.length;t++)s[t].className=""}},200)))},getAddress:function(t){this.selectedOptions=t},commitAdd:function(){var t=this;this.selectedOptions.length>=2?this.$http.patch("/api/personal/prompt",{country_id:this.selectedOptions[0],state_id:this.selectedOptions[1],city_id:this.selectedOptions[2]||null}).then(function(s){if(s.data.success){t.$notify.success({title:t.$t("dialog_list.tips"),message:t.$t("select_address.success")});var e=Object(l.a)("isUserLogin","object");e.user.has_country=!0,Object(l.b)("isUserLogin",e),t.dialogVisible=!1}}).catch(function(t){}):this.$notify.error({customClass:"error_notify",title:this.$t("public.error"),message:this.$t("select_address.failed")})},hidetips:function(){this.show_answer_tips=!1,this.setData({show_now_task:!1})},displayBox:function(){this.show_question=!this.show_question}}),computed:i()({},u(["show_now_task"])),mounted:function(){var t=this;document.addEventListener("click",function(s){-1==t.$route.fullPath.indexOf("match")&&(t.show_ranklist=!1,t.showlist())})},watch:{$route:function(t,s){-1!=this.$route.fullPath.indexOf("ranking")?this.rank_active=!0:this.rank_active=!1}}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tab border-1px",class:{wai:"/"==this.$route.path}},[e("v-header",{attrs:{show_lang:"true",logo:t.ad_logo}},[t.person_auth?t._e():e("div",{attrs:{slot:"nav_content"},slot:"nav_content"},[e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/task"}},[t._v(t._s(t.$t("header.task.answer")))])],1),t._v(" "),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/competition"}},[t._v(t._s(t.$t("header.competition.competition")))])],1),t._v(" "),e("div",{staticClass:"tab-item select_nav"},[e("div",{staticClass:"rank_list"},[e("span",{staticClass:"rank_title",class:{"tab-active":t.rank_active},on:{click:function(s){return s.stopPropagation(),t.showlist(s)}}},[t._v(t._s(t.$t("header.ranking.rank"))+" "),e("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.rank_show,expression:"rank_show"}],staticClass:"rank_nav"},[e("div",{attrs:{id:"scoreboard_nav"},on:{click:t.showlist}},[e("div",{attrs:{id:"firstDiv"}},[e("span"),t._v(" "),e("div",[e("router-link",{attrs:{to:"/ranking/ctfrank"}},[t._v(t._s(t.$t("header.ranking.ctf")))]),t._v(" "),e("div",[e("router-link",{attrs:{to:"/ranking/specialrank"}},[t._v(t._s(t.$t("header.ranking.special")))]),t._v(" "),e("div",{attrs:{id:"lastdiv"}},[e("router-link",{attrs:{to:"/ranking/WPrank"}},[t._v(t._s(t.$t("header.ranking.WPrank")))])],1)],1)],1)])])])])]),t._v(" "),e("div",{staticClass:"tab-item",on:{click:t.getTeamStatus}},[e("router-link",{attrs:{to:"/team"}},[t._v(t._s(t.$t("header.team.teamHomepage")))])],1),t._v(" "),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/shopping"}},[t._v(t._s(t.$t("header.shopping.shopping")))])],1)]),t._v(" "),e("div",{staticClass:"custom-badge",staticStyle:{float:"left"},attrs:{slot:"message_tips"},slot:"message_tips"},[e("el-badge",{staticClass:"item",attrs:{"is-dot":"",hidden:!t.message_num}},[t.show_message&&!t.person_auth?e("router-link",{staticClass:"message",attrs:{to:"/message"}},[e("span",{staticClass:"message_ico"}),t._v(" "),e("span",{staticClass:"message_text"},[t._v("消息")])]):t._e()],1)],1)]),t._v(" "),e("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$t(t.$route.meta.title),expression:"$t($route.meta.title)"}]}),t._v(" "),e("el-dialog",{attrs:{title:t.$t("select_address.changeAdd"),visible:t.dialogVisible,width:"650px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"custom-class":"ad_public_modal nofoot"},on:{"update:visible":function(s){t.dialogVisible=s}}},[e("div",{staticStyle:{"text-align":"left",padding:"0 40px 15px 40px"}},[e("div",{staticClass:"mrg30B",staticStyle:{"text-align":"left"}},[t._v("\n          "+t._s(t.$t("select_address.address_tips"))+"\n        ")]),t._v(" "),e("p",{staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(t.$t("select_address.select_place"))+":")]),t._v(" "),e("selectAddress",{on:{changed:t.getAddress}})],1),t._v(" "),e("div",{staticClass:"dialog-footer",staticStyle:{"padding-bottom":"20px!important"},attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.commitAdd}},[t._v(t._s(t.$t("modal.submit")))])],1)]),t._v(" "),t.show_now_task&&t.show_answer_tips&&!t.person_auth?e("div",{staticClass:"beingAnswered"},[e("div",{staticStyle:{width:"100%"}},[e("div",{staticClass:"cursor_btn",on:{click:t.displayBox}},[e("span",{staticClass:"count"},[t._v("1")])])]),t._v(" "),t.show_question?e("div",{staticClass:"tips_box"},[e("div",[t._v(t._s(t.$t("task.doing")))]),t._v(" "),e("h3",[e("span",{staticStyle:{display:"inline-block"}},[t._v(t._s(t.now_question.category)+"：")]),t._v(" "),e("span",{staticStyle:{width:"170px",display:"inline-block"}},[e("span",{staticClass:"ellipsis_txt"},[t._v(t._s(t.now_question.title))])])]),t._v(" "),e("div",{staticClass:"btn_group"},[e("span",{staticClass:"to_hide",on:{click:t.hidetips}},[t._v(t._s(t.$t("task.hide")))]),t._v(" "),e("span",{on:{click:t.hidetips}},[e("router-link",{staticClass:"to_answer",attrs:{to:{path:"/task/answer",query:{type:t.isAnswered.task_type,number:t.isAnswered.type_number,grade:t.isAnswered.grade,id:t.isAnswered.id}}}},[t._v(t._s(t.$t("task.go")))])],1)])]):t._e()]):t._e()],1)},staticRenderFns:[]};var p=e("C7Lr")(d,_,!1,function(t){e("fENl"),e("rs80"),e("FDfl")},"data-v-7bf2cbc5",null);s.default=p.exports},TL8j:function(t,s){},Uj8m:function(t,s){},fENl:function(t,s){},rs80:function(t,s){}});