webpackJsonp([9],{"2Lec":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("KXq/"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"homepage"}},[s("div",{staticClass:"clearfix"},[s("router-link",{staticClass:"list_btn",attrs:{to:"/team/list"}},[t._v(t._s(t.$t("team.teamWall")))])],1),t._v(" "),s("div",{staticClass:"home_wrap clearfix"},[s("div",{attrs:{id:"leftnav"}},[s("div",{staticClass:"team_info mrg20B",attrs:{id:"tops"}},[s("el-upload",{staticClass:"avatar-uploader",staticStyle:{float:"none"},attrs:{action:"/api/teams/upload/team_avatar/"+t.t_id,headers:{"X-CSRF-Token":t.csrfToken},"show-file-list":!1,"on-success":t.handleAvatarSuccess,name:"logo","before-upload":t.beforeAvatarUpload}},[s("div",{attrs:{id:"team_logo"}},[s("div",{attrs:{id:"layer"}},[s("div",[s("img",{attrs:{src:a("YnUS"),alt:""}}),t._v(" "),s("p",{staticClass:"uoloadTitle"},[t._v("上传头像")])])]),t._v(" "),t.tdata.logo_url?s("span",{staticStyle:{width:"100%",height:"100%","border-radius":"10px",display:"inline-block"},style:{backgroundImage:"url("+t.tdata.logo_url+")",backgroundSize:"cover",backgroundPosition:"center center"}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon "})])]),t._v(" "),s("div",{staticClass:"ellipsis_txt",staticStyle:{"font-size":"22px",margin:"20px 0 10px"},attrs:{title:t.tdata.name},domProps:{textContent:t._s(t.tdata.name)}}),t._v(" "),s("div",[t._v("ID:"+t._s(t.tdata.id))])],1),t._v(" "),s("div",{staticClass:"notice"},[s("div",{staticClass:"notice_title"},[t._v(t._s(t.$t("team.teamNotice")))]),t._v(" "),s("div",{staticClass:"notice_content"},[s("div",[""==t.tdata.notice?s("span",{staticStyle:{width:"100%",display:"inline-block","text-align":"center"}},[t._v(t._s(t.$t("team.noNotice")))]):s("span",{directives:[{name:"show",rawName:"v-show",value:!t.change_onoff,expression:"!change_onoff"}],staticClass:"notcie_box",domProps:{textContent:t._s(t.splitstr(80))}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.change_onoff,expression:"change_onoff"}],attrs:{id:"write_notice"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tdata.notice,expression:"tdata.notice"},{name:"focus",rawName:"v-focus",value:t.change_onoff,expression:"change_onoff"}],attrs:{name:""},domProps:{value:t.tdata.notice},on:{input:function(e){e.target.composing||t.$set(t.tdata,"notice",e.target.value)}}}),t._v(" "),s("div",{staticClass:"text-center"},[s("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:t.changed_notice}},[t._v(t._s(t.$t("modal.confirm")))]),t._v(" "),s("el-button",{attrs:{round:"",size:"mini"},on:{click:t.cancel_edit}},[t._v(t._s(t.$t("modal.cancel")))])],1)]),t._v(" "),1==t.user_authority.position||2==t.user_authority.position?s("span",[s("span",{directives:[{name:"show",rawName:"v-show",value:!t.change_onoff,expression:"!change_onoff"}],staticClass:"edit_notice",on:{click:t.change_notice}},[s("i",{staticClass:"el-icon-edit"}),t._v(t._s(t.$t("team.edit")))])]):t._e()])]),t._v(" "),s("router-link",{attrs:{id:"team_detail",to:{path:"/team/detail",query:{id:t.t_id}}}},[t._v(t._s(t.$t("team.teamInfo"))+"\n      ")])],1),t._v(" "),s("div",{staticClass:"list_table"},[t.showJoinList?s("div",{key:"apply-list",staticClass:"apply ordinary disabled_hover"},[s("div",{staticClass:"member_btn"},[s("span",{staticClass:"content_btn",on:{click:function(e){t.showJoinList=!t.showJoinList}}},[t._v(t._s(t.$t("team.team_members")))])]),t._v(" "),s("div",{staticClass:"table_wrap"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingapply,expression:"loadingapply"}],staticStyle:{width:"100%"},attrs:{data:t.apply_data,border:""}},[s("el-table-column",{attrs:{type:"index",label:t.$t("team.table.order"),index:t.indexMethod2,width:"80"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("team.table.member_name"),width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"text-left"},[s("span",{staticClass:"team_logo",style:{backgroundImage:"url("+e.row.apply_user.logo+")",backgroundSize:"cover",backgroundPosition:"center center"}}),t._v(" "),s("span",{domProps:{textContent:t._s(e.row.apply_user.nickname.length>10?e.row.apply_user.nickname.substr(0,9)+"…":e.row.apply_user.nickname)}})])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"apply_user.level",label:t.$t("team.table.level")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s("CN"==t.$i18n.locale?e.row.apply_user.level.zh:e.row.apply_user.level.en)+"\n              ")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"apply_user.good_at",label:t.$t("team.table.goodat")}}),t._v(" "),s("el-table-column",{attrs:{prop:"apply_user.points",label:t.$t("team.table.points")}}),t._v(" "),s("el-table-column",{attrs:{prop:"apply_content",label:t.$t("team.table.leavingMessage")},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"look_message",on:{click:function(a){return t.look_apply_content(e.row)}}},[t._v(t._s(t.$t("team.table.look")))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"join_num",width:"260",label:t.$t("team.table.operation")},scopedSlots:t._u([{key:"default",fn:function(e){return[s("button",{staticClass:"handle_btn",on:{click:function(a){return t.apply_solve(1,e.row,e.$index)}}},[t._v(t._s(t.$t("team.agree"))+"\n                ")]),t._v(" "),s("button",{staticClass:"handle_btn",on:{click:function(a){return t.apply_solve(2,e.row,e.$index)}}},[t._v(t._s(t.$t("team.refuse"))+"\n                ")]),t._v(" "),s("button",{staticClass:"handle_btn",on:{click:function(a){return t.apply_solve(0,e.row,e.$index)}}},[t._v(t._s(t.$t("team.ignore"))+"\n                ")])]}}])})],1)],1),t._v(" "),s("div",{staticStyle:{position:"absolute",bottom:"20px",left:"0",right:"0",margin:"0 auto"}},[s("v-page",{directives:[{name:"show",rawName:"v-show",value:t.pager2.total>t.pager2.pageSize,expression:"pager2.total>pager2.pageSize"}],attrs:{total:t.pager2.total,page:t.pager2.currentPage,limit:t.pager2.pageSize,layout:t.pager2.layout},on:{"update:page":function(e){return t.$set(t.pager2,"currentPage",e)},"update:limit":function(e){return t.$set(t.pager2,"pageSize",e)},pagination:t.getapply}})],1)]):s("div",{key:"team-list",staticClass:"member"},[s("div",{staticClass:"join_btn"},[1==t.user_authority.position||2==t.user_authority.position?s("span",{staticClass:"content_btn",on:{click:t.showApply}},[s("span",[t._v(t._s(t.$t("team.applyJoin")))]),t._v(" "),t.tdata.apply_count?s("span",{staticClass:"apply_count",domProps:{textContent:t._s(t.applyCount)}}):t._e()]):t._e()]),t._v(" "),s("div",{staticClass:"gf-table posRelative ordinary hide_last_row user_logo_radius"},[[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingUsergroupList,expression:"loadingUsergroupList"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"element-loading-text":t.$t("team.table.loading"),"default-sort":{prop:"position",order:"ascending"},border:"","row-class-name":t.addActive},on:{"row-click":t.clickrow}},[s("el-table-column",{attrs:{type:"index",label:t.$t("team.table.order"),index:t.indexMethod,width:"80"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("team.table.member_name"),width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"text-left"},[s("span",{staticClass:"team_logo",style:{backgroundImage:"url("+e.row.user.logo+")",backgroundSize:"cover",backgroundPosition:"center center"}}),t._v(" "),s("span",{domProps:{textContent:t._s(e.row.user.nickname.length>10?e.row.user.nickname.substr(0,9)+"…":e.row.user.nickname)}})])]}}],null,!1,2845228304)}),t._v(" "),s("el-table-column",{attrs:{prop:"job_name",label:t.$t("team.table.position")}}),t._v(" "),s("el-table-column",{attrs:{prop:"user.level",label:t.$t("team.table.level")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                  "+t._s("CN"==t.$i18n.locale?e.row.user.level.zh:e.row.user.level.en)+"\n                ")]}}],null,!1,2818475072)}),t._v(" "),s("el-table-column",{attrs:{prop:"user.good_at",label:t.$t("team.table.goodat")}}),t._v(" "),s("el-table-column",{attrs:{prop:"user.points",label:t.$t("team.table.points")}}),t._v(" "),s("el-table-column",{attrs:{prop:"user.competition_num",label:t.$t("team.table.competition_num"),width:"120"}}),t._v(" "),t._e()],1)]],2),t._v(" "),s("div",{staticStyle:{position:"absolute",bottom:"10px",left:"0",right:"0",margin:"0 auto"}},[s("v-page",{directives:[{name:"show",rawName:"v-show",value:t.pager.total>t.pager.pageSize,expression:"pager.total>pager.pageSize"}],attrs:{total:t.pager.total,page:t.pager.currentPage,limit:t.pager.pageSize,layout:t.pager.layout},on:{"update:page":function(e){return t.$set(t.pager,"currentPage",e)},"update:limit":function(e){return t.$set(t.pager,"pageSize",e)},pagination:t.getList}})],1),t._v(" "),s("div",{staticClass:"teamer_handle clearfix mrg30T"},[s("div",{},[s("div",{staticClass:"cursor md_blue_btn fr",on:{click:t.leave_team}},[t._v(t._s(t.$t("team.leave.name")))]),t._v(" "),1==t.user_authority.position&&1!=t.tableData.length?s("div",{staticClass:"cursor md_blue_btn fr mrg15R",on:{click:t.pass_to}},[t._v(t._s(t.$t("team.transfer.name"))+"\n            ")]):t._e(),t._v(" "),t.has_team_member?t._e():s("div",{staticClass:"cursor md_blue_btn fr mrg15R",on:{click:t.expulsion}},[t._v(t._s(t.$t("team.expulsion.name"))+"\n            ")]),t._v(" "),1==t.user_authority.position&&1!=t.tableData.length?s("div",{staticClass:"cursor md_blue_btn fr mrg15R",on:{click:t.assignment}},[t._v(t._s(t.$t("team.appointment.name"))+"\n            ")]):t._e()])])])])]),t._v(" "),s("el-dialog",{attrs:{title:t.$t("team.appointment.name"),visible:t.handleVisible,width:"700px","custom-class":"ad_public_modal "},on:{"update:visible":function(e){t.handleVisible=e}}},[s("div",{staticClass:"task_group"},[s("div",{staticClass:"text-left font16"},[s("span",[t._v(t._s(t.$t("team.appointment.line1"))),s("span",{staticStyle:{color:"#0080ff","font-size":"18px","font-weight":"bold"},domProps:{textContent:t._s(t.currentRow.job_name)}})])]),t._v(" "),s("div",{staticClass:"mrg20T text-left font16"},[s("span",[t._v(t._s(t.$t("team.appointment.line2"))+":")]),t._v(" "),s("span",{staticClass:"select_job select_job_active",domProps:{textContent:t._s(t.assignment_modal.assignd_list.assign_name)}})]),t._v(" "),t.just_write?s("div",{staticClass:"text-left mrg20T font14 blueC"},[t._v(t._s(t.$t("team.appointment.vice_captain_tips")))]):t._e()]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.handleVisible=!1}}},[t._v(t._s(t.$t("modal.cancel")))]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.changed_job}},[t._v(t._s(t.$t("modal.confirm")))])],1)]),t._v(" "),s("el-dialog",{attrs:{title:t.$t("team.transfer.selectPassed"),visible:t.passVisible,width:"700px","custom-class":"ad_public_modal "},on:{"update:visible":function(e){t.passVisible=e}}},[s("el-form",{ref:"passtoForm",staticClass:"demo-ruleForm",attrs:{model:t.passtoForm,rules:t.passto_rules,size:"medium"}},[s("el-form-item",{staticStyle:{width:"300px","margin-bottom":"8px"},attrs:{label:"",prop:"name"}},[s("el-input",{attrs:{placeholder:t.$t("team.transfer.input")},on:{input:t.search_passto},model:{value:t.passtoForm.searchWord,callback:function(e){t.$set(t.passtoForm,"searchWord",e)},expression:"passtoForm.searchWord"}})],1),t._v(" "),s("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{prop:"passto_user"}},[s("div",{staticClass:"modal_table posRelative writeup_content",staticStyle:{border:"1px solid #053a66",background:"#0d223d"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData_passto,height:"250",border:"","row-class-name":t.addpassActive},on:{"row-click":t.click_passed}},[s("el-table-column",{attrs:{prop:"user.nickname",label:t.$t("team.table.member_name"),width:"180"}}),t._v(" "),s("el-table-column",{attrs:{prop:"user.id",label:"ID",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{prop:"user.level",label:t.$t("team.table.level")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s("CN"==t.$i18n.locale?e.row.user.level.zh:e.row.user.level.en)+"\n              ")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"user.points",label:t.$t("team.table.points")}})],1),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.passtoForm.passto_user,expression:"passtoForm.passto_user"}],attrs:{name:"",id:"write_passto",cols:"30",rows:"10"},domProps:{value:t.passtoForm.passto_user},on:{input:function(e){e.target.composing||t.$set(t.passtoForm,"passto_user",e.target.value)}}})],1)]),t._v(" "),t.loadingUsergroupList?t._e():s("div",{staticClass:"imcode"},[t.user_authority.user.NMC?s("v-phone",{ref:"validatePhone",attrs:{config:t.phone_modal.config},on:{send_parent_phone:t.get_phone,send_parent_code:t.get_code}}):t._e()],1),t._v(" "),s("div",{staticClass:"mrg0L dialog-footer pad10T"},[s("el-button",{on:{click:function(e){t.passVisible=!1}}},[t._v(t._s(t.$t("modal.cancel")))]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitpasstoForm("passtoForm")}}},[t._v(t._s(t.$t("modal.confirm")))])],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[]};var o=function(t){a("qLiZ"),a("WQj7"),a("VBSt"),a("2OwE")},n=a("C7Lr")(s.a,i,!1,o,"data-v-0a8f213c",null);e.default=n.exports},"2OwE":function(t,e){},"KXq/":function(t,e,a){"use strict";(function(t){var s=a("aA9S"),i=a.n(s),o=a("a3Yh"),n=a.n(o),r=a("VKKs"),l=a("L0wk"),c=a("vbk2");e.a={name:"team_homepage",components:{"v-page":l.a,"v-phone":c.a},data:function(){var t;return t={handleVisible:!1,passVisible:!1,tableData:[],tableData_passto:[],pagination_data:{click_url:"/x_person/api/team_users/",list_total:0},page_config:{now_page_num:1,page_size:10},pager:{currentPage:1,pageSize:10,total:0,layout:"prev, pager, next",class:"bluepage"},pager2:{currentPage:1,pageSize:10,total:0,layout:"prev, pager, next",class:"bluepage"},user_authority:{position:3},modal_config:{title:"",showCancelButton:!0,customClass:"public_confirm public_confirm_md"},assignment_modal:{id:"assignment_modal",header:{title:this.$t("team.appointment.name")},assignd_list:{},changed_index:0},phone_modal:{id:"phone_modal",header:{title:this.$t("dialog_list.tips")},assignd_list:{},changed_index:0,clickBg_nohidden:!0,phone:"",code:"",config:{known_phone:!0,phone:Object(r.a)("isUserLogin","object").user.phone,url:"/api/users/send_mobile_captcha/"}},currentRow:"",header:"",left_nav:{},passto_modal:{id:"passto_modal",header:{title:this.$t("team.transfer.selectPassed")}},passtoForm:{passto:{},searchWord:"",passto_user:"",phone:Object(r.a)("isUserLogin","object").user.phone,code:""},passto_rules:{passto_user:[{required:!0,message:this.$t("team.transfer.validate_person"),trigger:"blur"}],code:[{required:!0,message:this.$t("team.transfer.validate_phone"),trigger:"blur"}]},filter_table:[],init_user_index:"",loadingUsergroupList:!0,loadingapply:!0,t_id:Object(r.a)("isUserLogin","object").team.data.id,has_vice_captain:!1,just_write:!1,has_team_member:!0,is_community_member:!1,tdata:{},apply_data:[],showJoinList:!1,user_data:localStorage.isUserLogin,change_onoff:!1,notice:{new_notice:"",old_notice:""}},n()(t,"header",""),n()(t,"todoNumber",0),n()(t,"show_code_validate",Object(r.a)("isUserLogin","object").user.NMC),t},created:function(){var t=this;this.getList(),this.$http.get("/api/teams/"+this.t_id).then(function(e){t.tdata=e.data}).catch(function(e){t.$router.push({path:"/team/list"})})},methods:{handleAvatarSuccess:function(t,e){var a=this;t.success?(this.tdata.logo_url=URL.createObjectURL(e.raw),this.$http.get("/api/teams/"+this.t_id).then(function(t){t.data.success&&a.$nextTick(function(){a.tdata.logo_url=t.data.logo_url})}).catch(function(t){})):this.$notify.error({customClass:"error_notify",title:this.$t("public.error"),message:this.$t("api_message."+t.message)})},beforeAvatarUpload:function(t){var e=!1;"image/jpeg"!==t.type&&"image/png"!==t.type&&"image/gif"!==t.type||(e=!0);var a=t.size/1024/1024<2;return e||this.$notify.error({customClass:"error_notify",title:this.$t("public.error"),message:this.$t("validateImg.logo_require")}),a||this.$notify.error({customClass:"error_notify",title:this.$t("public.error"),message:this.$t("validateImg.size")}),e&&a},getList:function(){var t=this;this.$http.get("/api/teams/users/"+this.t_id,{params:{offset:(this.pager.currentPage-1)*this.pager.pageSize,limit:this.pager.pageSize,key:""}}).then(function(e){var a=e.data;t.tableData=a.rows,t.pager.total=a.total,t.tableData_passto=a.rows,t.loadingUsergroupList=!1;for(var s=0;s<t.tableData.length;s++)p(t.tableData[s],t),t.tableData[s].id==a.current_user.id&&(t.init_user_index=s),2==t.tableData[s].position&&(t.has_vice_captain=!0);if(t.pagination_data.list_total=a.total,t.user_authority=a.current_user,1==t.user_authority.position){if(t.passtoForm.phone=t.user_authority.bind_phone,t.tableData.length<=1?t.has_team_member=!0:t.has_team_member=!1,t.user_authority.is_creator){if(t.show_code_validate&&""==t.user_authority.bind_phone){t.is_community_member=!1;var i="CN"==t.$i18n.locale?'为不影响操作,请到<a href="/personal/detail" style="color:#0080ff;margin-left:5px;margin-right:5px;">个人中心</a>绑定手机号':'In order not to affect the operation, please go to the <a href="/personal/detail" style="color:#0080ff;margin-left:5px;margin-right:5px;">personal center</a> to bind the mobile phone number.';t.$alert(i,t.$t("el.messagebox.title"),{customClass:"public_confirm public_confirm_sm text-center",showConfirmButton:!1,showClose:!1,dangerouslyUseHTMLString:!0,confirmButtonText:t.$t("modal.confirm")})}}else if(t.show_code_validate&&""==t.user_authority.bind_phone){var o="CN"==t.$i18n.locale?t.user_authority.handle_user+'已把队长职位转让给您,为不影响操作，请到<a href="/personal/detail" style="color:#0080ff;margin-left:5px;margin-right:5px;">个人中心</a>绑定手机号':t.user_authority.handle_user+' has transferred the position of captain to you. In order not to affect the operation, please go to the <a href="/personal/detail" style="color:#0080ff;margin-left:5px;margin-right:5px;">personal center</a> to bind the mobile phone number.';t.$alert(o,t.$t("el.messagebox.title"),{customClass:"public_confirm public_confirm_sm text-center",showConfirmButton:!1,showClose:!1,dangerouslyUseHTMLString:!0,confirmButtonText:t.$t("modal.confirm")})}}else 2==t.user_authority.position&&(t.tableData.length<=2?t.has_team_member=!0:t.has_team_member=!1);p(t.user_authority,t)}).catch(function(e){t.$http.get("/api/personal/reload_profile").then(function(t){t.data.success&&Object(r.b)("isUserLogin",t.data.user_data)}),t.$router.push({path:"/team/list"})})},getapply:function(){var t=this;this.loadingapply=!0,this.$http.get("/api/teams/user_records",{params:{offset:(this.pager2.currentPage-1)*this.pager2.pageSize,limit:this.pager2.pageSize,team_id:this.t_id}}).then(function(e){t.loadingapply=!1,t.apply_data=e.data.rows,t.pager2.total=e.data.total}).catch(function(e){t.$router.push({path:"/team/list"})})},showApply:function(){this.showJoinList=!this.showJoinList,this.pager2.currentPage=1,this.pager2.pageSize=10,this.getapply()},init_list:function(t){this.tableData=t},clickrow:function(t,e){3==t.position&&this.has_vice_captain?this.just_write=!0:this.just_write=!1,t.position>this.user_authority.position?(this.currentRow=t,2==t.position?this.assignment_modal.assignd_list={assign_num:3,assign_name:this.$t("team.job.team_member")}:3==t.position&&(this.assignment_modal.assignd_list={assign_num:2,assign_name:this.$t("team.job.vice_captain")})):this.currentRow=""},addActive:function(t,e){if(this.user_authority.position<3){if(t.row.position<=this.user_authority.position)return"disabled_row";if(t.row.id==this.currentRow.id)return"activerow"}},get_phone:function(t){0!=t.length&&(this.passtoForm.phone=Number(t))},get_code:function(t){0!=t.length&&(this.passtoForm.code=Number(t))},confirm_bind_phone:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;var s=new URLSearchParams;s.append("phone",a.phone_modal.phone),s.append("verification_code",a.phone_modal.code),axios.post("/x_person/api/team_users/"+a.user_authority.id+"/bind_phone/",s,{headers:a.header}).then(function(e){if(e.data.success){var s=String(a.phone_modal.phone);a.user_authority.bind_phone=a.passtoForm.phone=s.substr(0,3)+"****"+s.substr(7,4),a.$notify.error({customClass:"error_notify",title:a.$t("public.error"),message:e.data.data}),t("#phone_modal").modal("hide")}}).catch(function(t){a.$router.push({path:"/team/list"})})})},leave_team:function(){var t=this;this.modal_config.confirmButtonText=this.$t("modal.confirm"),this.modal_config.cancelButtonText=this.$t("modal.cancel");var e=this.user_authority.position,a=this.$createElement;if(1===this.tableData.length){var s={message:a("div",{style:"text-align:center"},[a("p",null,[a("span",null,this.$t("team.leave.onlyoneTips"))])])};this.$msgbox(i()(this.modal_config,s)).then(function(e){u(t)})}else if(1===e){s={message:a("div",{style:"text-align:center"},[a("p",null,[a("span",null,this.$t("team.leave.line1")),a("span",{style:"color:#0181fe;font-weight:bold;font-size:16px;margin-left:5px;"},this.user_authority.job_name)]),a("p",null,this.$t("team.leave.line2"))])};this.$msgbox(i()(this.modal_config,s)).then(function(e){t.passVisible=!0})}else{s={message:a("div",{style:"text-align:center"},[a("p",null,this.$t("team.leave.confirmleave")),a("p",null,this.$t("team.leave.leavedThing"))])};this.$msgbox(i()(this.modal_config,s)).then(function(e){u(t)})}},pass_to:function(){var t=this;this.modal_config.confirmButtonText=this.$t("modal.confirm"),this.modal_config.cancelButtonText=this.$t("modal.cancel");var e=this.$createElement,a=(this.user_authority,{message:e("div",{style:"text-align:center"},[e("p",null,[e("span",null,this.$t("team.leave.line1")),e("span",{style:"color:#0181fe;font-weight:bold;font-size:16px;margin-left:5px;"},this.user_authority.job_name)]),e("p",null,this.$t("team.transfer.line2")+this.user_authority.job_name+","+this.$t("team.transfer.line3"))])});this.$msgbox(i()(this.modal_config,a)).then(function(e){t.passVisible=!0})},search_passto:function(){var t=this;this.$http.get("/api/teams/users/"+this.t_id,{params:{key:this.passtoForm.searchWord}}).then(function(e){t.tableData_passto=e.data.rows}).catch(function(e){t.$router.push({path:"/team/list"})})},assignment:function(){this.currentRow?this.handleVisible=!0:this.$notify.error({customClass:"error_notify",title:this.$t("public.error"),message:this.$t("team.selectMember")})},select_job:function(t){this.assignment_modal.changed_index=t},changed_job:function(){var t=this;this.$http.patch("/api/teams/users/"+this.currentRow.id,{position:this.assignment_modal.assignd_list.assign_num,type:5}).then(function(e){if(e.data.success){for(var a=0;a<t.tableData.length;a++)3==t.currentRow.position&&2==t.tableData[a].position&&(t.tableData[a].position=3,t.tableData[a].job_name=t.$t("team.job.team_member")),t.tableData[a].id==t.currentRow.id&&(t.tableData[a].position=t.assignment_modal.assignd_list.assign_num,t.tableData[a].job_name=t.assignment_modal.assignd_list.assign_name);t.tableData.sort(function(t,e){return t.position-e.position}),t.$notify.success({title:t.$t("dialog_list.tips"),message:t.$t("team.appointment.success")}),t.handleVisible=!1}}).catch(function(e){t.$router.push({path:"/team/list"})})},expulsion:function(){var t=this;this.currentRow?this.$prompt(this.$t("team.expulsion.title"),this.$t("team.expulsion.name"),{confirmButtonText:this.$t("modal.confirm"),cancelButtonText:this.$t("modal.cancel"),inputPattern:/\S/,inputErrorMessage:this.$t("team.expulsion.tips"),showClose:!1,inputType:"textarea",inputPlaceholder:this.$t("team.expulsion.placeholder"),customClass:"public_confirm public_confirm_md"}).then(function(e){var a=e.value;t.$http.patch("/api/teams/users/"+t.currentRow.id,{type:6,content:a}).then(function(e){e.data.success&&(t.$notify.success({title:t.$t("dialog_list.tips"),message:t.$t("team.expulsion.confirm")}),t.getList(),t.currentRow="")}).catch(function(e){t.$router.push({path:"/team/list"})})}).catch(function(e){t.$notify.success({title:t.$t("dialog_list.tips"),message:t.$t("team.expulsion.cancel")})}):this.$notify.error({customClass:"error_notify",title:this.$t("public.error"),message:this.$t("team.selectMember")})},indexMethod:function(t){return(this.pager.currentPage-1)*this.pager.pageSize+t+1},indexMethod2:function(t){return(this.pager2.currentPage-1)*this.pager2.pageSize+t+1},click_passed:function(t,e){this.passtoForm.pass_to=t,this.passtoForm.passto_user=t.id},addpassActive:function(t,e){return t.row.position<=this.user_authority.position?"disabled_row":t.row.id==this.passtoForm.passto_user?"activerow":void 0},submitpasstoForm:function(t){var e=this;this.user_authority.user.NMC&&this.$refs.validatePhone.changeImg(),this.$refs[t].validate(function(t){if(!t)return!1;e.$http.patch("/api/teams/users/"+e.passtoForm.pass_to.id,{type:4,position:e.user_authority.position,verification_code:e.passtoForm.code,phone:e.passtoForm.phone}).then(function(t){if(t.data.success){e.$notify.success({title:e.$t("dialog_list.tips"),message:e.$t("team.transfer.success")}),e.passVisible=!1;for(var a=0;a<e.tableData.length;a++)e.tableData[a].id==e.passtoForm.passto_user&&(e.tableData[a].position=e.user_authority.position,e.tableData[a].job_name=e.user_authority.job_name);e.user_authority.position=3,e.tableData[e.init_user_index].position=3,e.has_team_member=!0,e.tableData[e.init_user_index].job_name=e.$t("team.job.team_member"),e.tableData.sort(function(t,e){return t.position-e.position})}}).catch(function(t){e.$router.push({path:"/team/list"})})})},look_apply_content:function(t){var e=null==t.apply_content?this.$t("team.nomessage"):t.apply_content;this.$alert(e,"",{customClass:"public_confirm public_confirm_sm",showConfirmButton:!1,center:!0,closeOnClickModal:!0})},apply_solve:function(t,e,a){var s=this;(new URLSearchParams).append("type",t),this.$http.patch("/api/teams/user_records/"+e.id,{type:t}).then(function(e){e.data.success&&(1==t&&s.getList(),s.apply_data.splice(a,1),s.tdata.apply_count--,s.$notify.success({title:s.$t("dialog_list.tips"),message:s.$t("team.handle_success")}))}).catch(function(t){s.$router.push({path:"/team/list"})})},splitstr:function(t){var e=this.tdata.notice;if(e)return e.length>t?e.substring(0,t)+"……":e},change_notice:function(){this.change_onoff=!0,this.notice.old_notice=this.tdata.notice},changed_notice:function(){var t=this;this.$http.patch("/api/teams/"+this.tdata.id,{notice:this.tdata.notice}).then(function(e){e.data.success&&t.$notify.success({title:t.$t("dialog_list.tips"),message:t.$t("team.edit_success")})}).catch(function(e){t.$router.push({path:"/team/list"})}),this.change_onoff=!1,this.notice.old_notice=this.tdata.notice},cancel_edit:function(){this.change_onoff=!1,this.tdata.notice=this.notice.old_notice}},computed:{applyCount:function(){return this.tdata.apply_count>10?"10+":this.tdata.apply_count},csrfToken:function(){var t,e=new RegExp("(^| )X-CSRF-Token=([^;]*)(;|$)");return(t=document.cookie.match(e))?unescape(t[2]):null}},directives:{focus:{update:function(t){t.focus()}}}};var p=function(t,e){switch(t.position){case 1:t.job_name=e.$t("team.job.captain");break;case 2:t.job_name=e.$t("team.job.vice_captain");break;case 3:t.job_name=e.$t("team.job.team_member")}},u=function(t){t.$http.patch("/api/teams/users/"+t.user_authority.id,{type:3}).then(function(e){if(e.data.success){var a=Object(r.a)("isUserLogin","object");a.team.has_team=!1,a.team.data={},Object(r.b)("isUserLogin",a),t.$notify.success({title:t.$t("dialog_list.tips"),message:t.$t("team.leave.success")}),setTimeout(function(){t.$router.push({path:"/team/list"})},800)}}).catch(function(e){t.$router.push({path:"/team/list"})})}}).call(e,a("hcrA"))},RUR6:function(t,e,a){var s=a("Wtcz");s(s.S+s.F*!a("uoC7"),"Object",{defineProperty:a("hHwa").f})},VBSt:function(t,e){},WQj7:function(t,e){},YnUS:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAhFJREFUeNrsWE1Og0AUhqb7jol7ce2iPQI3KHsX4g3wBNIb9AbOEeoJpCeQHsCIiXunexN8JF+bVxxaZmiBBS/50iFA5+PN935m3DzPnT7byOm5DQQHghXmE1aEvCYUISZ4xjMVUWyIOLc3RRAm85mSk2yypcFkHiHFe6kJSVtyoYXnZ/BgYUnd91xNovY0erkjXGP8SJCW2p0REsKE8EH4ZvcKnS5xv1KD4RH9/BJ8C8+VcY//qjJZ5cHCY58Yr/E1in1LWrpuYgLeLGeGZ4yfML+j01hyBi/ZIgKHTBckCW4GHRJ0WCAVka9N1Krj4pEyyZ291M2gJdGnWszL3jvhjfADT4RdE4xBaI7rL8IG4ynhBeRFFwRDlhZeCbfQTbHMV4QFYQvy0noWTRT7NWvrLtqiE+XNtDwe8LD1YIBytd4n1OqIXGActbnEAX7rLN2SabL1IMlqPKMQPI6mvPWm5Re2RcCWoGI5sE7yniCis7YIrpjwRY1cyd9phaCEriZoMMWR5+YlokY2bqCrAOSmWDreDe+68hvWhWdWs1gmap6I0xO7ONP9ywGPccPoTBEEITwqSjqVTdu38ZnSiGxUb/9v2vaZYmSZOi5lPtNtWtZgwLQTddDq+6wBkVX74mKZHjDesvb70uYxz23gSVV1NhNjV9WFyfKxiHvkCNizOo2yL53a1XKHM+qBYMf2J8AA9Xh+iWNiHwIAAAAASUVORK5CYII="},a3Yh:function(t,e,a){"use strict";e.__esModule=!0;var s,i=a("liLe"),o=(s=i)&&s.__esModule?s:{default:s};e.default=function(t,e,a){return e in t?(0,o.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},liLe:function(t,e,a){t.exports={default:a("zhwF"),__esModule:!0}},qLiZ:function(t,e){},zhwF:function(t,e,a){a("RUR6");var s=a("ZuHZ").Object;t.exports=function(t,e,a){return s.defineProperty(t,e,a)}}});